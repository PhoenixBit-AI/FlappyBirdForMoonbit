{"version":3,"file":"wasm4.js","sources":["../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/css-tag.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/reactive-element.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/lit-html.js","../../../../node_modules/.pnpm/lit-element@4.0.6/node_modules/lit-element/lit-element.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/custom-element.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/property.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/state.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/query.js","../../../../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/base.js","../../src/constants.ts","../../src/devkit.ts","../../src/ui/utils.ts","../../src/z85.ts","../../src/state.ts","../../src/netplay/rollback-manager.ts","../../src/netplay/peer-manager.ts","../../src/netplay/chunks.ts","../../src/netplay/bits.ts","../../src/netplay/moving-average.ts","../../src/netplay/index.ts","../../src/apu-worklet.min.generated.js?raw","../../src/apu.ts","../../src/framebuffer.ts","../../src/webgl-constants.ts","../../src/compositor.ts","../../src/runtime.ts","../../src/ui/app.ts","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/map.js","../../src/ui/menu-overlay.ts","../../src/ui/virtual-gamepad.ts","../../src/ui/notifications.ts","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directive.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/class-map.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directive-helpers.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/repeat.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/async-directive.js","../../../../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/ref.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_freeGlobal.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_root.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_Symbol.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_getRawTag.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_objectToString.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseGetTag.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isSymbol.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_trimmedEndIndex.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseTrim.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isObject.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toNumber.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/isObjectLike.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/now.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/debounce.js","../../../../devtools/web/dist/web-devtools.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/throttle.js"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=y){if(s.state&&(s.attribute=!1),this._$Ei(),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,s);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(t,s,i){const{get:e,set:h}=r(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get(){return e?.call(this)},set(s){const r=e?.call(this);h.call(this,s),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...h(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$EC(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==r?this.removeAttribute(e):this.setAttribute(e,r),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),r=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=r.fromAttribute(s,t.type),this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??f)(this[t],s))return;this.P(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,s,i){this._$AL.has(t)||this._$AL.set(t,s),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t)!0!==i.wrapped||this._$AL.has(s)||void 0===this[s]||this.P(s,this[s],i)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:\"open\"},b[d(\"elementProperties\")]=new Map,b[d(\"finalized\")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push(\"2.0.4\");export{b as ReactiveElement,u as defaultConverter,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=Symbol.for(\"lit-noChange\"),T=Symbol.for(\"lit-nothing\"),A=new WeakMap,E=r.createTreeWalker(r,129);function C(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const P=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[C(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),o]};class V{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=P(t,s);if(this.el=V.createElement(f,n),E.currentNode=this.el.content,2===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=E.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?k:\"?\"===e[1]?H:\"@\"===e[1]?I:R}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),E.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function N(t,i,s=t,e){if(i===w)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=N(t,h._$AS(t,i.values),h,e)),i}class S{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);E.currentNode=e;let h=E.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new M(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new L(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=E.nextNode(),o++)}return E.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class M{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=T,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=N(this,t,i),c(t)?t===T||null==t||\"\"===t?(this._$AH!==T&&this._$AR(),this._$AH=T):t!==this._$AH&&t!==w&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==T&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=V.createElement(C(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new S(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new V(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new M(this.S(l()),this.S(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class R{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=T,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=T}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=N(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==w,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=N(this,e[s+n],i,n),r===w&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===T?t=T:t!==T&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===T?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class k extends R{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===T?void 0:t}}class H extends R{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==T)}}class I extends R{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=N(this,t,i,0)??T)===w)return;const s=this._$AH,e=t===T&&s!==T||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==T&&(s===T||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){N(this,t)}}const z={P:e,A:h,C:o,M:1,L:P,R:S,D:u,V:N,I:M,H:R,N:H,U:I,B:k,F:L},Z=t.litHtmlPolyfillSupport;Z?.(V,M),(t.litHtmlVersions??=[]).push(\"3.1.4\");const j=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new M(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{z as _$LH,x as html,w as noChange,T as nothing,j as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return i}}s._$litElement$=!0,s[(\"finalized\",\"finalized\")]=!0,globalThis.litElementHydrateSupport?.({LitElement:s});const r=globalThis.litElementPolyfillSupport;r?.({LitElement:s});const o={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(globalThis.litElementVersions??=[]).push(\"4.0.6\");export{s as LitElement,o as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{defaultConverter as t,notEqual as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:t,reflect:!1,hasChanged:e},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.P(o,void 0,t),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import{desc as t}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function e(e,r){return(n,s,i)=>{const o=t=>t.renderRoot?.querySelector(e)??null;if(r){const{get:e,set:r}=\"object\"==typeof s?n:i??(()=>{const t=Symbol();return{get(){return this[t]},set(e){this[t]=e}}})();return t(n,s,{get(){let t=e.call(this);return void 0===t&&(t=o(this),(null!==t||this.hasUpdated)&&r.call(this,t)),t}})}return t(n,s,{get(){return o(this)}})}}export{e as query};\n//# sourceMappingURL=query.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=(e,t,c)=>(c.configurable=!0,c.enumerable=!0,Reflect.decorate&&\"object\"!=typeof t&&Object.defineProperty(e,t,c),c);export{e as desc};\n//# sourceMappingURL=base.js.map\n","export const GAMEDEV_MODE = WASM4_GAMEDEV_MODE;\nexport const WIDTH = 160;\nexport const HEIGHT = 160;\n\nexport const STORAGE_SIZE = 1024;\n\nexport const CRASH_TITLE = \"WASM-4\";\n\n// Default palette\nexport const COLORS = [\n    0xe0f8cf,\n    0x86c06c,\n    0x306850,\n    0x071821,\n];\n\n// Memory layout\nexport const ADDR_PALETTE = 0x04;\nexport const ADDR_DRAW_COLORS = 0x14;\nexport const ADDR_GAMEPAD1 = 0x16;\nexport const ADDR_GAMEPAD2 = 0x17;\nexport const ADDR_GAMEPAD3 = 0x18;\nexport const ADDR_GAMEPAD4 = 0x19;\nexport const ADDR_MOUSE_X = 0x1a;\nexport const ADDR_MOUSE_Y = 0x1c;\nexport const ADDR_MOUSE_BUTTONS = 0x1e;\nexport const ADDR_SYSTEM_FLAGS = 0x1f;\nexport const ADDR_NETPLAY = 0x20;\nexport const ADDR_FRAMEBUFFER = 0xa0;\n\nexport const BUTTON_X = 1;\nexport const BUTTON_Z = 2;\n// export const BUTTON_RESERVED = 4;\n// export const BUTTON_RESERVED = 8;\nexport const BUTTON_LEFT = 16;\nexport const BUTTON_RIGHT = 32;\nexport const BUTTON_UP = 64;\nexport const BUTTON_DOWN = 128;\n\nexport const MOUSE_LEFT = 1;\nexport const MOUSE_RIGHT = 2;\nexport const MOUSE_MIDDLE = 4;\n\nexport const SYSTEM_PRESERVE_FRAMEBUFFER = 1;\nexport const SYSTEM_HIDE_GAMEPAD_OVERLAY = 2;\n\n// Flags for Runtime.pauseState\nexport const PAUSE_CRASHED = 1;\nexport const PAUSE_REBOOTING = 2;\n\nexport const FONT = Uint8Array.of(\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xc7, 0xc7, 0xc7, 0xcf, 0xcf, 0xff, 0xcf, 0xff,\n    0x93, 0x93, 0x93, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0x93, 0x01, 0x93, 0x93, 0x93, 0x01, 0x93, 0xff,\n    0xef, 0x83, 0x2f, 0x83, 0xe9, 0x03, 0xef, 0xff,\n    0x9d, 0x5b, 0x37, 0xef, 0xd9, 0xb5, 0x73, 0xff,\n    0x8f, 0x27, 0x27, 0x8f, 0x25, 0x33, 0x81, 0xff,\n    0xcf, 0xcf, 0xcf, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xf3, 0xe7, 0xcf, 0xcf, 0xcf, 0xe7, 0xf3, 0xff,\n    0x9f, 0xcf, 0xe7, 0xe7, 0xe7, 0xcf, 0x9f, 0xff,\n    0xff, 0x93, 0xc7, 0x01, 0xc7, 0x93, 0xff, 0xff,\n    0xff, 0xe7, 0xe7, 0x81, 0xe7, 0xe7, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xcf, 0xcf, 0x9f,\n    0xff, 0xff, 0xff, 0x81, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xcf, 0xcf, 0xff,\n    0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f, 0xff,\n    0xc7, 0xb3, 0x39, 0x39, 0x39, 0x9b, 0xc7, 0xff,\n    0xe7, 0xc7, 0xe7, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0x83, 0x39, 0xf1, 0xc3, 0x87, 0x1f, 0x01, 0xff,\n    0x81, 0xf3, 0xe7, 0xc3, 0xf9, 0x39, 0x83, 0xff,\n    0xe3, 0xc3, 0x93, 0x33, 0x01, 0xf3, 0xf3, 0xff,\n    0x03, 0x3f, 0x03, 0xf9, 0xf9, 0x39, 0x83, 0xff,\n    0xc3, 0x9f, 0x3f, 0x03, 0x39, 0x39, 0x83, 0xff,\n    0x01, 0x39, 0xf3, 0xe7, 0xcf, 0xcf, 0xcf, 0xff,\n    0x87, 0x3b, 0x1b, 0x87, 0x61, 0x79, 0x83, 0xff,\n    0x83, 0x39, 0x39, 0x81, 0xf9, 0xf3, 0x87, 0xff,\n    0xff, 0xcf, 0xcf, 0xff, 0xcf, 0xcf, 0xff, 0xff,\n    0xff, 0xcf, 0xcf, 0xff, 0xcf, 0xcf, 0x9f, 0xff,\n    0xf3, 0xe7, 0xcf, 0x9f, 0xcf, 0xe7, 0xf3, 0xff,\n    0xff, 0xff, 0x01, 0xff, 0x01, 0xff, 0xff, 0xff,\n    0x9f, 0xcf, 0xe7, 0xf3, 0xe7, 0xcf, 0x9f, 0xff,\n    0x83, 0x01, 0x39, 0xf3, 0xc7, 0xff, 0xc7, 0xff,\n    0x83, 0x7d, 0x45, 0x55, 0x41, 0x7f, 0x83, 0xff,\n    0xc7, 0x93, 0x39, 0x39, 0x01, 0x39, 0x39, 0xff,\n    0x03, 0x39, 0x39, 0x03, 0x39, 0x39, 0x03, 0xff,\n    0xc3, 0x99, 0x3f, 0x3f, 0x3f, 0x99, 0xc3, 0xff,\n    0x07, 0x33, 0x39, 0x39, 0x39, 0x33, 0x07, 0xff,\n    0x01, 0x3f, 0x3f, 0x03, 0x3f, 0x3f, 0x01, 0xff,\n    0x01, 0x3f, 0x3f, 0x03, 0x3f, 0x3f, 0x3f, 0xff,\n    0xc1, 0x9f, 0x3f, 0x31, 0x39, 0x99, 0xc1, 0xff,\n    0x39, 0x39, 0x39, 0x01, 0x39, 0x39, 0x39, 0xff,\n    0x81, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0xf9, 0xf9, 0xf9, 0xf9, 0xf9, 0x39, 0x83, 0xff,\n    0x39, 0x33, 0x27, 0x0f, 0x07, 0x23, 0x31, 0xff,\n    0x9f, 0x9f, 0x9f, 0x9f, 0x9f, 0x9f, 0x81, 0xff,\n    0x39, 0x11, 0x01, 0x01, 0x29, 0x39, 0x39, 0xff,\n    0x39, 0x19, 0x09, 0x01, 0x21, 0x31, 0x39, 0xff,\n    0x83, 0x39, 0x39, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0x03, 0x39, 0x39, 0x39, 0x03, 0x3f, 0x3f, 0xff,\n    0x83, 0x39, 0x39, 0x39, 0x21, 0x33, 0x85, 0xff,\n    0x03, 0x39, 0x39, 0x31, 0x07, 0x23, 0x31, 0xff,\n    0x87, 0x33, 0x3f, 0x83, 0xf9, 0x39, 0x83, 0xff,\n    0x81, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xff,\n    0x39, 0x39, 0x39, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0x39, 0x39, 0x39, 0x11, 0x83, 0xc7, 0xef, 0xff,\n    0x39, 0x39, 0x29, 0x01, 0x01, 0x11, 0x39, 0xff,\n    0x39, 0x11, 0x83, 0xc7, 0x83, 0x11, 0x39, 0xff,\n    0x99, 0x99, 0x99, 0xc3, 0xe7, 0xe7, 0xe7, 0xff,\n    0x01, 0xf1, 0xe3, 0xc7, 0x8f, 0x1f, 0x01, 0xff,\n    0xc3, 0xcf, 0xcf, 0xcf, 0xcf, 0xcf, 0xc3, 0xff,\n    0x7f, 0xbf, 0xdf, 0xef, 0xf7, 0xfb, 0xfd, 0xff,\n    0x87, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0x87, 0xff,\n    0xc7, 0x93, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x01,\n    0xef, 0xf7, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0x3f, 0x3f, 0x03, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xff, 0xff, 0x81, 0x3f, 0x3f, 0x3f, 0x81, 0xff,\n    0xf9, 0xf9, 0x81, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0xff, 0xff, 0x83, 0x39, 0x01, 0x3f, 0x83, 0xff,\n    0xf1, 0xe7, 0x81, 0xe7, 0xe7, 0xe7, 0xe7, 0xff,\n    0xff, 0xff, 0x81, 0x39, 0x39, 0x81, 0xf9, 0x83,\n    0x3f, 0x3f, 0x03, 0x39, 0x39, 0x39, 0x39, 0xff,\n    0xe7, 0xff, 0xc7, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0xf3, 0xff, 0xe3, 0xf3, 0xf3, 0xf3, 0xf3, 0x87,\n    0x3f, 0x3f, 0x31, 0x03, 0x07, 0x23, 0x31, 0xff,\n    0xc7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0xff, 0xff, 0x03, 0x49, 0x49, 0x49, 0x49, 0xff,\n    0xff, 0xff, 0x03, 0x39, 0x39, 0x39, 0x39, 0xff,\n    0xff, 0xff, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xff, 0xff, 0x03, 0x39, 0x39, 0x03, 0x3f, 0x3f,\n    0xff, 0xff, 0x81, 0x39, 0x39, 0x81, 0xf9, 0xf9,\n    0xff, 0xff, 0x91, 0x8f, 0x9f, 0x9f, 0x9f, 0xff,\n    0xff, 0xff, 0x83, 0x3f, 0x83, 0xf9, 0x03, 0xff,\n    0xe7, 0xe7, 0x81, 0xe7, 0xe7, 0xe7, 0xe7, 0xff,\n    0xff, 0xff, 0x39, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0xff, 0xff, 0x99, 0x99, 0x99, 0xc3, 0xe7, 0xff,\n    0xff, 0xff, 0x49, 0x49, 0x49, 0x49, 0x81, 0xff,\n    0xff, 0xff, 0x39, 0x01, 0xc7, 0x01, 0x39, 0xff,\n    0xff, 0xff, 0x39, 0x39, 0x39, 0x81, 0xf9, 0x83,\n    0xff, 0xff, 0x01, 0xe3, 0xc7, 0x8f, 0x01, 0xff,\n    0xf3, 0xe7, 0xe7, 0xcf, 0xe7, 0xe7, 0xf3, 0xff,\n    0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xff,\n    0x9f, 0xcf, 0xcf, 0xe7, 0xcf, 0xcf, 0x9f, 0xff,\n    0xff, 0xff, 0x8f, 0x45, 0xe3, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0x93, 0x93, 0xff,\n    0x83, 0x29, 0x29, 0x11, 0x29, 0x29, 0x83, 0xff,\n    0x83, 0x39, 0x09, 0x11, 0x21, 0x39, 0x83, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0x83, 0x11, 0x21, 0x7d, 0x21, 0x11, 0x83, 0xff,\n    0x83, 0x11, 0x09, 0x7d, 0x09, 0x11, 0x83, 0xff,\n    0x83, 0x11, 0x39, 0x55, 0x11, 0x11, 0x83, 0xff,\n    0x83, 0x11, 0x11, 0x55, 0x39, 0x11, 0x83, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xe7, 0xff, 0xe7, 0xe7, 0xc7, 0xc7, 0xc7, 0xff,\n    0xef, 0x83, 0x29, 0x2f, 0x29, 0x83, 0xef, 0xff,\n    0xc3, 0x99, 0x9f, 0x03, 0x9f, 0x9f, 0x01, 0xff,\n    0xff, 0xa5, 0xdb, 0xdb, 0xdb, 0xa5, 0xff, 0xff,\n    0x99, 0x99, 0xc3, 0x81, 0xe7, 0x81, 0xe7, 0xff,\n    0xe7, 0xe7, 0xe7, 0xff, 0xe7, 0xe7, 0xe7, 0xff,\n    0xc3, 0x99, 0x87, 0xdb, 0xe1, 0x99, 0xc3, 0xff,\n    0x93, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xc3, 0xbd, 0x66, 0x5e, 0x5e, 0x66, 0xbd, 0xc3,\n    0x87, 0xc3, 0x93, 0xc3, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xc9, 0x93, 0x27, 0x93, 0xc9, 0xff, 0xff,\n    0xff, 0xff, 0x81, 0xf9, 0xf9, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xc3, 0xbd, 0x46, 0x5a, 0x46, 0x5a, 0xbd, 0xc3,\n    0x83, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xef, 0xd7, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xe7, 0xe7, 0x81, 0xe7, 0xe7, 0xff, 0x81, 0xff,\n    0xc7, 0xf3, 0xe7, 0xc3, 0xff, 0xff, 0xff, 0xff,\n    0xc3, 0xe7, 0xf3, 0xc7, 0xff, 0xff, 0xff, 0xff,\n    0xf7, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0x33, 0x33, 0x33, 0x33, 0x09, 0x3f,\n    0xc1, 0x95, 0xb5, 0x95, 0xc1, 0xf5, 0xf5, 0xff,\n    0xff, 0xff, 0xff, 0xcf, 0xcf, 0xff, 0xff, 0xff,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf7, 0xcf,\n    0xe7, 0xc7, 0xe7, 0xc3, 0xff, 0xff, 0xff, 0xff,\n    0xc7, 0x93, 0x93, 0xc7, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0x27, 0x93, 0xc9, 0x93, 0x27, 0xff, 0xff,\n    0xbd, 0x3b, 0xb7, 0xad, 0xd9, 0xb1, 0x7d, 0xff,\n    0xbd, 0x3b, 0xb7, 0xa9, 0xdd, 0xbb, 0x71, 0xff,\n    0x1d, 0xbb, 0xd7, 0x2d, 0xd9, 0xb1, 0x7d, 0xff,\n    0xc7, 0xff, 0xc7, 0x9f, 0x39, 0x01, 0x83, 0xff,\n    0xdf, 0xef, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0xf7, 0xef, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0xc7, 0x93, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0xcb, 0xa7, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0x93, 0xff, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0xef, 0xd7, 0xc7, 0x93, 0x39, 0x01, 0x39, 0xff,\n    0xc1, 0x87, 0x27, 0x21, 0x07, 0x27, 0x21, 0xff,\n    0xc3, 0x99, 0x3f, 0x3f, 0x99, 0xc3, 0xf7, 0xcf,\n    0xdf, 0xef, 0x01, 0x3f, 0x03, 0x3f, 0x01, 0xff,\n    0xf7, 0xef, 0x01, 0x3f, 0x03, 0x3f, 0x01, 0xff,\n    0xc7, 0x93, 0x01, 0x3f, 0x03, 0x3f, 0x01, 0xff,\n    0x93, 0xff, 0x01, 0x3f, 0x03, 0x3f, 0x01, 0xff,\n    0xef, 0xf7, 0x81, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0xf7, 0xef, 0x81, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0xe7, 0xc3, 0x81, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0x99, 0xff, 0x81, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0x87, 0x93, 0x99, 0x09, 0x99, 0x93, 0x87, 0xff,\n    0xcb, 0xa7, 0x19, 0x09, 0x01, 0x21, 0x31, 0xff,\n    0xdf, 0xef, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xf7, 0xef, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xc7, 0x93, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xcb, 0xa7, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0x93, 0xff, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xff, 0xbb, 0xd7, 0xef, 0xd7, 0xbb, 0xff, 0xff,\n    0x83, 0x39, 0x31, 0x29, 0x19, 0x39, 0x83, 0xff,\n    0xdf, 0xef, 0x39, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xf7, 0xef, 0x39, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xc7, 0x93, 0xff, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0x93, 0xff, 0x39, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xf7, 0xef, 0x99, 0x99, 0xc3, 0xe7, 0xe7, 0xff,\n    0x3f, 0x03, 0x39, 0x39, 0x39, 0x03, 0x3f, 0xff,\n    0xc3, 0x99, 0x99, 0x93, 0x99, 0x89, 0x93, 0xff,\n    0xdf, 0xef, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0xf7, 0xef, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0xc7, 0x93, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0xcb, 0xa7, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0x93, 0xff, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0xef, 0xd7, 0x83, 0xf9, 0x81, 0x39, 0x81, 0xff,\n    0xff, 0xff, 0x83, 0xe9, 0x81, 0x2f, 0x83, 0xff,\n    0xff, 0xff, 0x81, 0x3f, 0x3f, 0x81, 0xf7, 0xcf,\n    0xdf, 0xef, 0x83, 0x39, 0x01, 0x3f, 0x83, 0xff,\n    0xf7, 0xef, 0x83, 0x39, 0x01, 0x3f, 0x83, 0xff,\n    0xc7, 0x93, 0x83, 0x39, 0x01, 0x3f, 0x83, 0xff,\n    0x93, 0xff, 0x83, 0x39, 0x01, 0x3f, 0x83, 0xff,\n    0xdf, 0xef, 0xff, 0xc7, 0xe7, 0xe7, 0x81, 0xff,\n    0xf7, 0xef, 0xff, 0xc7, 0xe7, 0xe7, 0x81, 0xff,\n    0xc7, 0x93, 0xff, 0xc7, 0xe7, 0xe7, 0x81, 0xff,\n    0x93, 0xff, 0xc7, 0xe7, 0xe7, 0xe7, 0x81, 0xff,\n    0x9b, 0x87, 0x67, 0x83, 0x39, 0x39, 0x83, 0xff,\n    0xcb, 0xa7, 0x03, 0x39, 0x39, 0x39, 0x39, 0xff,\n    0xdf, 0xef, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xf7, 0xef, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xc7, 0x93, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xcb, 0xa7, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0x93, 0xff, 0x83, 0x39, 0x39, 0x39, 0x83, 0xff,\n    0xff, 0xe7, 0xff, 0x81, 0xff, 0xe7, 0xff, 0xff,\n    0xff, 0xff, 0x83, 0x31, 0x29, 0x19, 0x83, 0xff,\n    0xdf, 0xef, 0x39, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0xf7, 0xef, 0x39, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0xc7, 0x93, 0xff, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0x93, 0xff, 0x39, 0x39, 0x39, 0x39, 0x81, 0xff,\n    0xf7, 0xef, 0x39, 0x39, 0x39, 0x81, 0xf9, 0x83,\n    0x3f, 0x3f, 0x03, 0x39, 0x39, 0x03, 0x3f, 0x3f,\n    0x93, 0xff, 0x39, 0x39, 0x39, 0x81, 0xf9, 0x83\n);\n\nexport const showDevToolsQueryKey = 'devtools-open';\n","import * as constants from \"./constants\";\nexport const websocket = constants.GAMEDEV_MODE\n    ? new WebSocket((location.protocol == \"https:\" ? \"wss\" : \"ws\") + \"://\" + location.host)\n    : null;\n","export function getUrlParam (name: string): string | null {\n    const url = new URL(location.href);\n\n    // First try the URL query string\n    const value = url.searchParams.get(name);\n    if (value != null) {\n        return value;\n    }\n\n    // Fallback to using the value in the hash\n    const hash = new URL(url.hash.substring(1), \"https://x\");\n    return hash.searchParams.get(name);\n}\n\nexport function requestFullscreen () {\n    if (document.fullscreenElement == null) {\n        function expandIframe () {\n            // Fullscreen failed, try to maximize our own iframe. We don't yet have a button to go\n            // back to minimized, but this at least makes games on wasm4.org playable on iPhone\n            const iframe = window.frameElement as HTMLIFrameElement | null;\n            if (iframe) {\n                iframe.style.position = \"fixed\";\n                iframe.style.top = \"0\";\n                iframe.style.left = \"0\";\n                iframe.style.zIndex = \"99999\";\n                iframe.style.width = \"100%\";\n                iframe.style.height = \"100%\";\n            }\n        }\n\n        const promise = document.body.requestFullscreen && document.body.requestFullscreen({navigationUI: \"hide\"});\n        if (promise) {\n            promise.catch(expandIframe);\n        } else {\n            expandIframe();\n        }\n    }\n}\n\nexport async function copyToClipboard (text: string): Promise<void> {\n    try {\n        // Attempt to use the async clipboard API, which is not universally supported\n        await navigator.clipboard.writeText(text);\n    } catch {\n        // Safari does not allow writing to the clipboard outside of user interaction events.\n        // Fallback is to present user with a dialog box from which they can copy the link.\n\n        let dialog = document.createElement('dialog');\n        dialog.title = 'Netplay URL';\n        dialog.textContent = text;\n        document.body.append(dialog);\n\n        let copyButton = document.createElement('button');\n        copyButton.textContent = 'Copy';\n        copyButton.style.marginLeft = '1em';\n        copyButton.onclick = () => navigator.clipboard.writeText(text);\n        dialog.appendChild(copyButton);\n\n        let closeButton = document.createElement('button');\n        closeButton.textContent = 'Close';\n        closeButton.style.marginLeft = '1em';\n        closeButton.onclick = () => {\n          document.body.removeChild(dialog);\n        };\n        dialog.appendChild(closeButton);\n        \n        dialog.showModal();\n        \n    }\n}\n","// Encodes binary data into text, like base64 but more efficient.\n//\n// Implements http://rfc.zeromq.org/spec:32\n// Ported from https://github.com/zeromq/libzmq/blob/8cda54c52b08005b71f828243f22051cdbc482b4/src/zmq_utils.cpp#L77-L168\n\nconst ENCODER = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#\".split(\"\");\n\nconst DECODER = [\n    0x00, 0x44, 0x00, 0x54, 0x53, 0x52, 0x48, 0x00,\n    0x4B, 0x4C, 0x46, 0x41, 0x00, 0x3F, 0x3E, 0x45,\n    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n    0x08, 0x09, 0x40, 0x00, 0x49, 0x42, 0x4A, 0x47,\n    0x51, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2A,\n    0x2B, 0x2C, 0x2D, 0x2E, 0x2F, 0x30, 0x31, 0x32,\n    0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A,\n    0x3B, 0x3C, 0x3D, 0x4D, 0x00, 0x4E, 0x43, 0x00,\n    0x00, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10,\n    0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18,\n    0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F, 0x20,\n    0x21, 0x22, 0x23, 0x4F, 0x00, 0x50, 0x00, 0x00\n];\n\nexport function encode (src: number[] | Uint8Array | Uint8ClampedArray): string {\n    const size = src.length;\n    const extra = (size % 4);\n    const paddedSize = extra ? size + 4-extra : size;\n\n\tlet str = \"\",\n\t\tbyte_nbr = 0,\n\t\tvalue = 0;\n\twhile (byte_nbr < paddedSize) {\n        const b = (byte_nbr < size) ? src[byte_nbr] : 0;\n        ++byte_nbr;\n\t\tvalue = (value * 256) + b;\n\t\tif ((byte_nbr % 4) == 0) {\n\t\t\tlet divisor = 85 * 85 * 85 * 85;\n\t\t\twhile (divisor >= 1) {\n\t\t\t\tconst idx = Math.floor(value / divisor) % 85;\n\t\t\t\tstr += ENCODER[idx];\n\t\t\t\tdivisor /= 85;\n\t\t\t}\n\t\t\tvalue = 0;\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport function decode (string: string, dest: number[] | Uint8Array | Uint8ClampedArray): number {\n    let byte_nbr = 0,\n        char_nbr = 0,\n        value = 0;\n    const string_len = string.length,\n        dest_len = dest.length;\n\n    if ((string.length % 5) == 0) {\n        while (char_nbr < string_len) {\n            const idx = string.charCodeAt(char_nbr++) - 32;\n            if ((idx < 0) || (idx >= DECODER.length)) {\n                return byte_nbr;\n            }\n            value = (value * 85) + DECODER[idx];\n            if ((char_nbr % 5) == 0) {\n                let divisor = 256 * 256 * 256;\n                while (divisor >= 1) {\n                    if (byte_nbr >= dest_len) {\n                        return byte_nbr;\n                    }\n                    dest[byte_nbr++] = (value / divisor) % 256;\n                    divisor /= 256;\n                }\n                value = 0;\n            }\n        }\n    }\n\n    return byte_nbr;\n}\n","import * as constants from \"./constants\";\nimport { Runtime } from \"./runtime\";\n\nexport class State {\n    memory: ArrayBuffer;\n\n    diskSize: number;\n    diskBuffer: ArrayBuffer;\n\n    // TODO(2022-03-17): APU state\n\n    constructor () {\n        this.memory = new ArrayBuffer(1 << 16);\n        this.diskBuffer = new ArrayBuffer(constants.STORAGE_SIZE);\n        this.diskSize = 0;\n    }\n\n    read (runtime: Runtime) {\n        new Uint8Array(this.memory).set(new Uint8Array(runtime.memory.buffer));\n\n        this.diskSize = runtime.diskSize;\n        new Uint8Array(this.diskBuffer).set(new Uint8Array(runtime.diskBuffer, 0, runtime.diskSize));\n    }\n\n    write (runtime: Runtime) {\n        new Uint8Array(runtime.memory.buffer).set(new Uint8Array(this.memory));\n\n        runtime.diskSize = this.diskSize;\n        new Uint8Array(runtime.diskBuffer).set(new Uint8Array(this.diskBuffer, 0, this.diskSize));\n    }\n\n    toBytes (dest?: Uint8Array): Uint8Array {\n        if (!dest) {\n            dest = new Uint8Array((1<<16) + 4 + this.diskSize);\n        }\n\n        dest.set(new Uint8Array(this.memory), 0);\n\n        const dataView = new DataView(dest.buffer, dest.byteOffset, dest.byteLength);\n        dataView.setUint32(1<<16, this.diskSize);\n\n        dest.set(new Uint8Array(this.diskBuffer, 0, this.diskSize), (1<<16) + 4);\n\n        return dest;\n    }\n\n    fromBytes (src: Uint8Array) {\n        new Uint8Array(this.memory).set(src.subarray(0, 1<<16));\n\n        const dataView = new DataView(src.buffer, src.byteOffset, src.byteLength);\n        this.diskSize = dataView.getUint32(1<<16);\n\n        const offset = (1<<16) + 4;\n        new Uint8Array(this.diskBuffer).set(src.subarray(offset, offset + this.diskSize));\n    }\n}\n","import { State } from \"../state\";\nimport { Runtime } from \"../runtime\";\n\nexport const HISTORY_LENGTH = 20;\n\nconst PLAYER_COUNT = 4;\n\n// A gamepad input byte\ntype InputData = number;\n\n// A single frame of input history\nclass History {\n    frame = -1;\n\n    // Inputs for each player\n    readonly inputs: InputData[];\n\n    // For each input, whether it was a prediction\n    readonly predicted: boolean[];\n\n    // The state at the beginning of this frame\n    readonly state: State;\n\n    constructor () {\n        this.state = new State();\n\n        this.inputs = new Array(PLAYER_COUNT);\n        this.predicted = new Array(PLAYER_COUNT);\n        for (let ii = 0; ii < PLAYER_COUNT; ++ii) {\n            this.inputs[ii] = 0;\n            this.predicted[ii] = true;\n        }\n    }\n}\n\nclass Player {\n    /** Inputs queued for frames that we haven't simulated locally yet. */\n    readonly futureInputs = new Map<number,InputData>();\n}\n\n/**\n * Collects gamepad inputs from all players and handles rollbacks.\n */\nexport class RollbackManager {\n    private history: History[];\n    private players: Player[];\n\n    private rollbackIdx: number = HISTORY_LENGTH;\n\n    constructor (public currentFrame: number, private runtime: Runtime) {\n        this.history = new Array(HISTORY_LENGTH);\n        for (let ii = 0; ii < HISTORY_LENGTH; ++ii) {\n            this.history[ii] = new History();\n        }\n\n        this.players = new Array(PLAYER_COUNT);\n        for (let ii = 0; ii < PLAYER_COUNT; ++ii) {\n            this.players[ii] = new Player();\n        }\n    }\n\n    addInputs (playerIdx: number, frame: number, inputs: InputData[]) {\n        const player = this.players[playerIdx];\n\n        // console.log(`${playerIdx} frame ${frame} -> ${inputs.join(\", \")}`);\n\n        // TODO(2022-04-09): Optimize\n\n        for (const input of inputs) {\n            if (frame >= this.currentFrame) {\n                // Never overwrite a previously added input\n                if (!player.futureInputs.has(frame)) {\n                    // We haven't simulated this frame locally yet, schedule the input for later\n                    player.futureInputs.set(frame, input);\n                }\n\n            } else {\n                // Search our history for this frame\n                for (let ii = 0, ll = HISTORY_LENGTH; ii < ll; ++ii) {\n                    const history = this.history[ii];\n                    if (history.frame == frame) {\n                        // We only consider frames that have been predicted\n                        if (history.predicted[playerIdx]) {\n                            history.predicted[playerIdx] = false;\n\n                            // If the input is different than we predicted, schedule a rollback\n                            if (history.inputs[playerIdx] != input) {\n                                history.inputs[playerIdx] = input;\n                                this.rollbackIdx = Math.min(ii, this.rollbackIdx);\n                            }\n                        }\n                        break;\n                    }\n                }\n            }\n\n            ++frame;\n        }\n    }\n\n    update () {\n        // Apply any rollbacks\n        if (this.rollbackIdx < HISTORY_LENGTH) {\n            // console.log(`Rolling back ${HISTORY_LENGTH - this.rollbackIdx} frames`);\n\n            // Update predicted inputs, propagating them forward\n            for (let ii = this.rollbackIdx+1; ii < HISTORY_LENGTH; ++ii) {\n                const history = this.history[ii];\n                for (let playerIdx = 0; playerIdx < PLAYER_COUNT; ++playerIdx) {\n                    if (history.predicted[playerIdx]) {\n                        const prevHistory = this.history[ii-1];\n                        history.inputs[playerIdx] = prevHistory.inputs[playerIdx];\n                    }\n                }\n            }\n\n            let first = true;\n\n            while (this.rollbackIdx < HISTORY_LENGTH) {\n                const history = this.history[this.rollbackIdx++];\n\n                if (first) {\n                    first = false;\n\n                    // Restore runtime state to the beginning of the rollback\n                    history.state.write(this.runtime);\n\n                } else {\n                    // Update the saved state for this frame\n                    history.state.read(this.runtime);\n                }\n\n                for (let playerIdx = 0; playerIdx < PLAYER_COUNT; ++playerIdx) {\n                    this.runtime.setGamepad(playerIdx, history.inputs[playerIdx]);\n                }\n                this.runtime.update();\n            }\n        }\n\n        const prevHistory = this.history[HISTORY_LENGTH-1];\n\n        const nextHistory = this.history.shift()!;\n        this.history.push(nextHistory);\n\n        nextHistory.frame = this.currentFrame;\n\n        // Save state before executing the frame\n        nextHistory.state.read(this.runtime);\n\n        // Copy inputs into the next frame\n        for (let playerIdx = 0; playerIdx < PLAYER_COUNT; ++playerIdx) {\n            const player = this.players[playerIdx];\n\n            let input = player.futureInputs.get(this.currentFrame);\n            if (input != null) {\n                nextHistory.predicted[playerIdx] = false;\n                player.futureInputs.delete(this.currentFrame);\n            } else {\n                // No known input for this player, repeat the input from the last frame\n                nextHistory.predicted[playerIdx] = true;\n                input = prevHistory.inputs[playerIdx];\n            }\n\n            nextHistory.inputs[playerIdx] = input;\n\n            // Also poke runtime memory\n            this.runtime.setGamepad(playerIdx, input);\n        }\n\n        this.runtime.update();\n\n        ++this.currentFrame;\n    }\n}\n","/** WebRTC signaling messages. */\ntype Message = WhoAmIRequestMessage | WhoAmIReplyMessage | OfferMessage | AnswerMessage | CandidateMessage | AbortMessage | KeepaliveMessage;\n\n/** Sent by a newly connecting client requesting its peer ID. */\ntype WhoAmIRequestMessage = {\n    type: \"WHOAMI_REQUEST\";\n}\n\ntype WhoAmIReplyMessage = {\n    type: \"WHOAMI_REPLY\";\n    yourPeerId: string;\n    iceServers?: RTCIceServer[];\n}\n\ntype OfferMessage = {\n    type: \"OFFER\";\n    description: RTCSessionDescriptionInit;\n}\n\ntype AnswerMessage = {\n    type: \"ANSWER\";\n    description: RTCSessionDescriptionInit;\n}\n\ntype CandidateMessage = {\n    type: \"CANDIDATE\";\n    candidate: RTCIceCandidateInit;\n}\n\n/** Sent by the server when it failed to contact the other peer. */\ntype AbortMessage = {\n    type: \"ABORT\";\n}\n\ntype KeepaliveMessage = {\n    type: \"KEEPALIVE\";\n}\n\n/**\n * Connects to our websocket server for exchanging the signaling messages needed to establish WebRTC\n * peer-to-peer connections.\n */\nclass SignalClient {\n    private socket?: WebSocket;\n    private readonly bufferedOutput: string[] = [];\n    private keepaliveInterval: number;\n\n    constructor (private onMessage: (source: string, message: Message) => void) {\n        this.connect();\n\n        // Regularly send messages to keep the websocket connection from an idle timeout\n        this.keepaliveInterval = window.setInterval(() => {\n            this.send(\"\", { type: \"KEEPALIVE\" }, false);\n        }, 15000);\n    }\n\n    private async connect (): Promise<void> {\n        // Connect to the first available signal server\n        const servers = [\n            // \"ws://localhost:3001\",\n\n            \"wss://webrtc-signal-server.wasm4.org\",\n            \"wss://ywc2h85cv1.execute-api.us-east-1.amazonaws.com/production\",\n\n            \"wss://webrtc-signal-server.wasm4.jwq.moe\",\n            \"wss://iyuavuru2h.execute-api.eu-central-1.amazonaws.com/production\"\n        ];\n        for (const server of servers) {\n            try {\n                this.socket = await new Promise((resolve, reject) => {\n                    const socket = new WebSocket(server);\n                    socket.addEventListener(\"open\", () => {\n                        resolve(socket);\n                    });\n                    socket.addEventListener(\"error\", () => {\n                        reject();\n                    });\n                });\n                break;\n            } catch (error) {\n                console.error(error)\n            }\n        }\n        if (!this.socket) {\n            throw new Error(\"Unable to connect to signal server\");\n        }\n\n        this.socket.addEventListener(\"message\", event => {\n            const { source, message } = JSON.parse(event.data);\n            // console.log(`Received ${message.type} message from ${source}`);\n            this.onMessage(source, message);\n        });\n\n        // Flush the output queue\n        for (const output of this.bufferedOutput) {\n            this.socket.send(output);\n        }\n        this.bufferedOutput.length = 0;\n    }\n\n    send (target: string, message: Message, deferIfNotReady = true) {\n        // console.log(`Sent ${message.type} message to ${target}`);\n        const output = JSON.stringify({ target, message });\n        if (this.socket?.readyState == 1) {\n            this.socket.send(output);\n        } else if (deferIfNotReady) {\n            this.bufferedOutput.push(output);\n        }\n    }\n\n    close () {\n        this.socket?.close();\n        window.clearInterval(this.keepaliveInterval);\n    }\n}\n\n/**\n * Handles brokering P2P connections.\n */\nexport class PeerManager {\n    readonly localPeerId: Promise<string>;\n\n    /** Pending P2P connections that haven't been fully established yet. */\n    private readonly connections = new Map<string,RTCPeerConnection>();\n\n    /** Our connection to the signaling server. */\n    private readonly signalClient: SignalClient;\n\n    /** The ICE servers we should use to setup RTC connections. */\n    private iceServers?: RTCIceServer[];\n\n    constructor (onConnection: (connection: RTCPeerConnection, remotePeerId: string) => void) {\n        let resolveLocalPeerId: (localPeerId: string) => void;\n        this.localPeerId = new Promise((resolve) => {\n            resolveLocalPeerId = resolve;\n        });\n\n        this.signalClient = new SignalClient(async (source, message) => {\n            switch (message.type) {\n            case \"WHOAMI_REPLY\": {\n                this.iceServers = message.iceServers;\n                resolveLocalPeerId(message.yourPeerId);\n            } break;\n\n            case \"OFFER\": {\n                if (!this.connections.has(source)) {\n                    const connection = this.createConnection(source);\n\n                    await connection.setRemoteDescription(message.description);\n                    await connection.setLocalDescription(await connection.createAnswer());\n\n                    onConnection(connection, source);\n\n                    this.signalClient.send(source, { type: \"ANSWER\", description: connection.localDescription!.toJSON() });\n\n                } else {\n                    throw new Error(\"Received offer for a connection we already initiated\");\n                }\n            } break;\n\n            case \"ANSWER\": {\n                const connection = this.connections.get(source);\n                if (connection) {\n                    await connection.setRemoteDescription(message.description);\n                }\n            } break;\n\n            case \"CANDIDATE\": {\n                const connection = this.connections.get(source);\n                if (connection) {\n                    await connection.addIceCandidate(new RTCIceCandidate(message.candidate));\n                }\n            } break;\n\n            case \"ABORT\": {\n                const connection = this.connections.get(source);\n                if (connection) {\n                    connection.close();\n                }\n            } break;\n            }\n        });\n\n        this.signalClient.send(\"\", {\n            type: \"WHOAMI_REQUEST\",\n        });\n    }\n\n    private createConnection (peerId: string): RTCPeerConnection {\n        const connection = new RTCPeerConnection({\n            iceServers: this.iceServers,\n        });\n        this.connections.set(peerId, connection);\n\n        connection.addEventListener(\"negotiationneeded\", async () => {\n            await connection.setLocalDescription(await connection.createOffer());\n            this.signalClient.send(peerId, { type: \"OFFER\", description: connection.localDescription!.toJSON() });\n        });\n\n        connection.addEventListener(\"icecandidate\", ({ candidate }) => {\n            if (candidate) {\n                this.signalClient.send(peerId, { type: \"CANDIDATE\", candidate: candidate.toJSON() });\n            }\n        });\n\n        connection.addEventListener(\"connectionstatechange\", () => {\n            const state = connection.connectionState;\n            if (state == \"connected\" || state == \"failed\") {\n                // After they connected (or failed to connect), we don't need to manage this\n                // connection anymore\n                this.connections.delete(peerId);\n            }\n        });\n\n        return connection;\n    }\n\n    connect (remotePeerId: string): RTCPeerConnection {\n        return this.connections.get(remotePeerId) || this.createConnection(remotePeerId);\n    }\n\n    close () {\n        this.signalClient.close();\n        for (const [peerId, connection] of this.connections) {\n            connection.close();\n        }\n    }\n}\n","/** A safe maximum size for WebRTC data channel messages. */\nconst CAPACITY = 16384;\n\n/** Receives incoming binary chunks and glues them back together. */\nexport class ChunkReader {\n    private readonly chunks: Uint8Array[] = [];\n    private size: number = 0;\n\n    constructor (channel: RTCDataChannel) {\n        channel.addEventListener(\"message\", event => {\n            if (event.data instanceof ArrayBuffer) {\n                const chunk = new Uint8Array(event.data);\n                this.size += chunk.byteLength;\n                this.chunks.push(chunk);\n                // console.log(\"CHUNK received\", chunk.byteLength);\n            }\n        });\n    }\n\n    read (): Uint8Array {\n        const data = new Uint8Array(this.size);\n        let destPos = 0;\n        for (const chunk of this.chunks) {\n            data.set(chunk, destPos);\n            destPos += chunk.byteLength;\n        }\n\n        // Clear the local buffer\n        this.chunks.length = 0;\n        this.size = 0;\n\n        return data;\n    }\n}\n\n/** Splits outgoing binary data into chunks. */\nexport class ChunkWriter {\n    private buffer: Uint8Array | undefined;\n    private size: number = 0;\n\n    constructor (private channel: RTCDataChannel) {\n    }\n\n    write (src: Uint8Array) {\n        if (!this.buffer) {\n            this.buffer = new Uint8Array(CAPACITY);\n        }\n\n        let destPos = this.size;\n        let srcPos = 0;\n\n        while (srcPos < src.length) {\n            const slice = src.subarray(srcPos, srcPos + CAPACITY - destPos);\n            this.buffer.set(slice, destPos);\n\n            srcPos += slice.length;\n            destPos += slice.length;\n\n            if (destPos >= CAPACITY) {\n                destPos -= CAPACITY;\n\n                // console.log(\"CHUNK sending\", this.buffer.length);\n                this.channel.send(this.buffer);\n            }\n        }\n\n        this.size = destPos;\n    }\n\n    flush () {\n        if (this.buffer && this.size > 0) {\n            // console.log(\"CHUNK flushing\", this.size);\n            this.channel.send(this.buffer.subarray(0, this.size));\n        }\n\n        this.buffer = undefined;\n    }\n}\n","/** Reads a stream of individual bits from a byte buffer. */\nexport class BitReader {\n    constructor (private buffer: Uint8Array, public position = 0) {\n    }\n\n    readBit (): boolean {\n        const value = !!(this.buffer[(this.position / 8) >>> 0] & (1 << (this.position & 7)));\n        ++this.position;\n        return value;\n    }\n\n    readBits (size: number): number {\n        let value = 0;\n        for (let ii = 0; ii < size; ++ii) {\n            value |= +this.readBit() << ii;\n        }\n        return value;\n    }\n}\n\n/** Writes a stream of individual bits to a byte buffer. */\nexport class BitWriter {\n    constructor (private buffer: Uint8Array, public position = 0) {\n    }\n\n    write1 () {\n        this.buffer[(this.position / 8) >>> 0] |= 1 << (this.position & 7);\n        ++this.position;\n    }\n\n    write0 () {\n        this.buffer[(this.position / 8) >>> 0] &= ~(1 << (this.position & 7));\n        ++this.position;\n    }\n\n    writeBits (value: number, size: number) {\n        for (let ii = 0; ii < size; ++ii) {\n            if (value & (1 << ii)) {\n                this.write1();\n            } else {\n                this.write0();\n            }\n        }\n    }\n}\n","/**\n * Estimates an average value from a sequence, used for estimating things like ping and frame drift.\n */\nexport class MovingAverage {\n    public average = 0;\n\n    private firstUpdate = true;\n\n    constructor (private discount = 0.125) {\n    }\n\n    update (value: number) {\n        if (this.firstUpdate) {\n            this.firstUpdate = false;\n            this.average = value;\n        } else {\n            const discount = this.discount;\n            this.average = (1-discount)*this.average + discount*value;\n        }\n    }\n}\n","import { State } from \"../state\";\nimport { Runtime } from \"../runtime\";\nimport { RollbackManager, HISTORY_LENGTH } from \"./rollback-manager\";\nimport { PeerManager } from \"./peer-manager\";\nimport { ChunkReader, ChunkWriter } from \"./chunks\";\nimport { BitReader, BitWriter } from \"./bits\";\nimport { MovingAverage } from \"./moving-average\";\n\n/**\n * Flag for easier netplay testing. When this is on, open http://localhost:3000 to immediately start\n * hosting netplay, and http://localhost:3000/#?netplay=host in a second window to connect to it.\n */\nexport const DEV_NETPLAY = false;\n\nconst SIMULATE_LAG = false;\n\nconst MAX_OUTBOUND_INPUTS = 20;\n\n// Calculate our worst case tick size and use it to size a reusable buffer\nconst MAX_TICK_SIZE = 8 + Math.ceil((MAX_OUTBOUND_INPUTS * (1 + 8*4))/8);\nconst SEND_BUFFER = new ArrayBuffer(MAX_TICK_SIZE);\n\n/**\n * Control messages sent over the reliable data channel.\n *\n * The initial handshake when peer A connects to peer B goes like this:\n *\n * 1. B  WELCOME  A\n * 2. A  JOIN_REQUEST  B\n * 3. B  (binary payload containing the cart and game state)  A\n * 4. B  JOIN_REPLY  A\n *\n * At any point, a peer can send a PLAYER_INFO to another to inform them of their player index.\n */\ntype Message =\n    WelcomeMessage |\n    JoinRequestMessage |\n    JoinReplyMessage |\n    JoinRejectMessage |\n    PlayerInfoMessage;\n\ntype WelcomeMessage = {\n    type: \"WELCOME\";\n    otherPeers: string[];\n}\n\ntype JoinRequestMessage = {\n    type: \"JOIN_REQUEST\";\n}\n\ntype JoinReplyMessage = {\n    type: \"JOIN_REPLY\";\n    yourPlayerIdx: number;\n    frame: number;\n\n    // The offset to the state data in the binary payload\n    stateOffset: number;\n}\n\n/** Sent instead of JoinReply if the request failed for some reason, such as the game being full. */\ntype JoinRejectMessage = {\n    type: \"JOIN_REJECT\";\n}\n\ntype PlayerInfoMessage = {\n    type: \"PLAYER_INFO\";\n    playerIdx: number;\n}\n\nclass RemotePlayer {\n    playerIdx = -1;\n\n    frame = 0;\n\n    nextNeededFrame = 0;\n\n    outboundFrame = 0;\n    readonly outboundInputs: number[] = [];\n\n    /** Estimated round-trip time for this player. */\n    ping = new MovingAverage();\n\n    /** Estimated number of frames we are ahead of this player. */\n    readonly drift = new MovingAverage();\n\n    readonly chunkReader: ChunkReader;\n    readonly chunkWriter: ChunkWriter;\n\n    constructor (public readonly peerId: string, private connection: RTCPeerConnection,\n            private reliableChannel: RTCDataChannel, private unreliableChannel: RTCDataChannel) {\n        this.chunkReader = new ChunkReader(reliableChannel);\n        this.chunkWriter = new ChunkWriter(reliableChannel);\n    }\n\n    addOutboundInput (frame: number, input: number) {\n        if (this.outboundFrame == 0) {\n            this.outboundFrame = frame;\n        }\n\n        if (frame < this.outboundFrame) {\n            // Prepend inputs so that our outbound inputs are based on the new frame\n            for (let count = this.outboundFrame - frame; count > 0; --count) {\n                this.outboundInputs.unshift(input);\n            }\n            this.outboundFrame = frame;\n\n        } else {\n            const frameIdx = frame - this.outboundFrame;\n\n            // Ensure we never overwrite a frame we already queued input for\n            if (frameIdx >= this.outboundInputs.length) {\n                // Pad out any intermediate frames we don't have by repeating the last input\n                for (let ii = this.outboundInputs.length; ii < frameIdx; ++ii) {\n                    this.outboundInputs[ii] = (ii > 0) ? this.outboundInputs[ii-1] : 0;\n                }\n                this.outboundInputs[frameIdx] = input;\n            }\n        }\n    }\n\n    sendMessage (message: Message) {\n        // console.log(`Sending ${message.type} message to ${this.peerId}`, message);\n        this.reliableChannel.send(JSON.stringify(message));\n    }\n\n    sendUnreliableBuffer (buffer: Uint8Array) {\n        // Simulate a bad connection with packet loss and unordered delivery\n        if (SIMULATE_LAG) {\n            if (Math.random() > 0.05) {\n                const simulatedTransmissionDelay = Math.random()*30 + 50;\n                buffer = buffer.slice();\n                setTimeout(() => {\n                    if (this.unreliableChannel.readyState == \"open\") {\n                        this.unreliableChannel.send(buffer);\n                    }\n                }, simulatedTransmissionDelay);\n            }\n        } else {\n            this.unreliableChannel.send(buffer);\n        }\n    }\n\n    sendPingRequest () {\n        const data = new DataView(SEND_BUFFER);\n        data.setUint8(0, 2); // type = PING_REQUEST\n        data.setUint32(1, performance.now() >>> 0);\n        this.sendUnreliableBuffer(new Uint8Array(SEND_BUFFER, 0, 5));\n    }\n\n    sendPingReply (timestamp: number) {\n        const data = new DataView(SEND_BUFFER);\n        data.setUint8(0, 3); // type = PING_REPLY\n        data.setUint32(1, timestamp);\n        this.sendUnreliableBuffer(new Uint8Array(SEND_BUFFER, 0, 5));\n    }\n\n    sendTick (currentFrame: number) {\n        const data = new DataView(SEND_BUFFER);\n        data.setUint8(0, 1); // type = TICK\n\n        // We delta encode frame numbers relative to the first base frame to save space\n        data.setUint32(1, currentFrame); // frame\n        data.setInt8(5, (this.nextNeededFrame == 0) ? -127 : this.nextNeededFrame - currentFrame); // requestedFrame\n        data.setInt8(6, this.outboundFrame - currentFrame); // inputFrame\n        data.setUint8(7, this.outboundInputs.length); // inputCount\n\n        // Pack inputs into a stream of bits:\n        // 1NNN: Toggle button N\n        // 0: Advance to next frame's inputs\n        const inputWriter = new BitWriter(new Uint8Array(SEND_BUFFER, 8));\n        let prevInput = 0;\n        for (const input of this.outboundInputs) {\n            const changed = prevInput ^ input;\n            prevInput = input;\n            for (let button = 0; button < 8; ++button) {\n                if (changed & (1 << button)) {\n                    inputWriter.write1();\n                    inputWriter.writeBits(button, 3);\n                }\n            }\n            inputWriter.write0();\n        }\n\n        const byteLength = 8 + Math.ceil(inputWriter.position / 8);\n        this.sendUnreliableBuffer(new Uint8Array(SEND_BUFFER, 0, byteLength));\n    }\n\n    close () {\n        this.reliableChannel.close();\n        this.unreliableChannel.close();\n        this.connection.close();\n    }\n}\n\n/**\n * Handles connections and messaging between other players.\n */\nexport class Netplay {\n    private rollbackMgr?: RollbackManager;\n    private peerMgr: PeerManager;\n\n    private remotePlayers = new Map<string,RemotePlayer>();\n    private localPlayerIdx = -1;\n\n    private updateCount = 0;\n\n    // Callbacks for showing UI notifications\n    onstart?: (playerIdx: number) => void;\n    onjoin?: (playerIdx: number) => void;\n    onleave?: (playerIdx: number) => void;\n\n    constructor (private runtime: Runtime) {\n        this.peerMgr = new PeerManager(async (connection, peerId) => {\n            const otherPeers = Array.from(this.remotePlayers.keys());\n\n            // When a peer connects to us, send them a welcome message containing all other peer IDs\n            // so they can connect to the entire mesh\n            const remotePlayer = await this.createRemotePlayer(connection, peerId);\n            remotePlayer.sendMessage({\n                type: \"WELCOME\",\n                otherPeers,\n            });\n\n            // Also inform them of our own player state\n            if (this.localPlayerIdx >= 0) {\n                remotePlayer.sendMessage({\n                    type: \"PLAYER_INFO\",\n                    playerIdx: this.localPlayerIdx,\n                });\n            }\n        });\n    }\n\n    host () {\n        this.runtime.setNetplay(0);\n\n        // Start at frame 1 because we treat frame 0 as a \"null\" state\n        this.rollbackMgr = new RollbackManager(1, this.runtime);\n        this.localPlayerIdx = 0;\n    }\n\n    join (peerId: string) {\n        const connection = this.peerMgr.connect(peerId);\n        this.createRemotePlayer(connection, peerId).then(remotePlayer => {\n            remotePlayer.sendMessage({ type: \"JOIN_REQUEST\" });\n        }, error => {\n            this.runtime.blueScreen(\"Failed to connect\\nto peer. They may\\nbe offline?\");\n        });\n    }\n\n    async getInviteLink (): Promise<string> {\n        const localPeerId = await this.peerMgr.localPeerId;\n\n        const loc = window.location;\n        if (loc.protocol == \"file:\"\n            || loc.hostname == \"localhost\"\n            || loc.hostname == \"127.0.0.1\"\n            || loc.hostname == \"wasm4.org\") {\n            return `https://wasm4.org/netplay/#${localPeerId}`;\n        }\n        const url = new URL(loc.href);\n        url.searchParams.set('netplay', localPeerId);\n        return url.href;\n    }\n\n    close () {\n        for (const remotePlayer of this.remotePlayers.values()) {\n            remotePlayer.close();\n        }\n        this.peerMgr.close();\n    }\n\n    private async createRemotePlayer (connection: RTCPeerConnection, peerId: string): Promise<RemotePlayer> {\n        function createDataChannel (config: RTCDataChannelInit): Promise<RTCDataChannel> {\n            return new Promise((resolve, reject) => {\n                const channel = connection.createDataChannel(\"WASM-4\", config);\n                channel.binaryType = \"arraybuffer\";\n\n                channel.onopen = () => { resolve(channel) };\n                channel.onerror = reject;\n            });\n        }\n\n        const [ reliableChannel, unreliableChannel ] = await Promise.all([\n            createDataChannel({ negotiated: true, id: 0 }),\n            createDataChannel({ negotiated: true, id: 1, ordered: false, maxRetransmits: 0 }),\n            // TODO(2022-03-24): Add connection timeout\n        ]);\n\n        const remotePlayer = new RemotePlayer(peerId, connection, reliableChannel, unreliableChannel);\n        this.remotePlayers.set(peerId, remotePlayer);\n\n        const onClose = () => {\n            if (this.remotePlayers.has(peerId)) {\n                // console.log(`Peer ${peerId} left`);\n                this.remotePlayers.delete(peerId);\n\n                if (this.onleave && remotePlayer.playerIdx >= 0) {\n                    this.onleave(remotePlayer.playerIdx);\n                }\n            }\n        };\n        connection.addEventListener(\"connectionstatechange\", () => {\n            if (connection.connectionState == \"disconnected\") {\n                onClose();\n            }\n        });\n        reliableChannel.addEventListener(\"close\", onClose);\n        unreliableChannel.addEventListener(\"close\", onClose);\n\n        reliableChannel.addEventListener(\"message\", async event => {\n            if (typeof event.data != \"string\") {\n                return; // Ignore binary data\n            }\n\n            const message = JSON.parse(event.data) as Message;\n            // console.log(`Received ${message.type} message from ${peerId}`, message);\n\n            switch (message.type) {\n            case \"WELCOME\": {\n                for (const peerId of message.otherPeers) {\n                    if (!this.remotePlayers.has(peerId)) {\n                        const connection = this.peerMgr.connect(peerId);\n                        const remotePlayer = await this.createRemotePlayer(connection, peerId);\n\n                        if (this.localPlayerIdx >= 0) {\n                            remotePlayer.sendMessage({\n                                type: \"PLAYER_INFO\",\n                                playerIdx: this.localPlayerIdx,\n                            });\n                        }\n                    }\n                }\n            } break;\n\n            case \"JOIN_REQUEST\": {\n                // Assign them a player index\n                const playerIdx = this.nextPlayerIdx();\n\n                if (playerIdx >= 4) {\n                    // Game is already full\n                    remotePlayer.sendMessage({ type: \"JOIN_REJECT\" });\n                    remotePlayer.close();\n\n                } else {\n                    remotePlayer.playerIdx = playerIdx;\n\n                    // Send the cart data\n                    remotePlayer.chunkWriter.write(this.runtime.wasmBuffer!);\n\n                    // And the game state\n                    const state = new State();\n                    state.read(this.runtime);\n                    remotePlayer.chunkWriter.write(state.toBytes());\n\n                    remotePlayer.chunkWriter.flush();\n\n                    remotePlayer.sendMessage({\n                        type: \"JOIN_REPLY\",\n                        yourPlayerIdx: remotePlayer.playerIdx,\n                        frame: this.rollbackMgr!.currentFrame,\n                        stateOffset: this.runtime.wasmBuffer!.byteLength,\n                    });\n\n                    if (this.onjoin) {\n                        this.onjoin(remotePlayer.playerIdx);\n                    }\n                }\n            } break;\n\n            case \"JOIN_REPLY\": {\n                this.localPlayerIdx = message.yourPlayerIdx;\n\n                // Tell all other peers about our new player info\n                for (const otherPlayer of this.remotePlayers.values()) {\n                    if (otherPlayer != remotePlayer) {\n                        otherPlayer.sendMessage({\n                            type: \"PLAYER_INFO\",\n                            playerIdx: this.localPlayerIdx,\n                        });\n                    }\n                }\n\n                const bytes = remotePlayer.chunkReader.read();\n                const cartBytes = bytes.subarray(0, message.stateOffset);\n                const stateBytes = bytes.subarray(message.stateOffset);\n\n                // Load the cart, ignoring file size limits so netplay works even during development\n                await this.runtime.load(cartBytes, false);\n\n                const state = new State();\n                state.fromBytes(stateBytes);\n                state.write(this.runtime);\n\n                this.runtime.setNetplay(this.localPlayerIdx);\n\n                this.rollbackMgr = new RollbackManager(message.frame, this.runtime);\n\n                if (this.onstart) {\n                    this.onstart(this.localPlayerIdx);\n                }\n            } break;\n\n            case \"JOIN_REJECT\": {\n                this.runtime.blueScreen(\"Connected, but the\\ngame is already\\nfull!\");\n                this.close();\n            } break;\n\n            case \"PLAYER_INFO\": {\n                if (remotePlayer.playerIdx == -1) {\n                    remotePlayer.playerIdx = message.playerIdx;\n\n                    // TODO(2022-04-03): Don't send this for initially joining clients\n                    if (this.onjoin) {\n                        this.onjoin(remotePlayer.playerIdx);\n                    }\n                }\n            } break;\n            }\n        });\n\n        unreliableChannel.addEventListener(\"message\", async event => {\n            const buffer = event.data as ArrayBuffer;\n            const data = new DataView(buffer);\n\n            const type = data.getUint8(0);\n            switch (type) {\n            case 1: { // TICK\n                // Ignore if we haven't started our local simulation, or we haven't yet received a\n                // player index from this peer\n                if (this.rollbackMgr && remotePlayer.playerIdx >= 0) {\n                    const frame = data.getUint32(1);\n\n                    if (frame > remotePlayer.frame) {\n                        const requestedFrame = data.getInt8(5) + frame;\n                        const inputFrame = data.getInt8(6) + frame;\n                        const inputCount = data.getUint8(7);\n\n                        // Unpack inputs\n                        const inputReader = new BitReader(new Uint8Array(buffer, 8));\n                        const inputs = new Array(inputCount);\n                        let prevInput = 0;\n                        for (let ii = 0; ii < inputCount; ++ii) {\n                            while (inputReader.readBit()) {\n                                const button = inputReader.readBits(3);\n                                prevInput ^= (1 << button);\n                            }\n                            inputs[ii] = prevInput;\n                        }\n\n                        remotePlayer.frame = frame;\n                        remotePlayer.nextNeededFrame = inputFrame + inputs.length;\n\n                        // Update outboundFrame\n                        if (remotePlayer.outboundFrame == 0) {\n                            remotePlayer.outboundFrame = requestedFrame;\n                        } else if (requestedFrame > remotePlayer.outboundFrame) {\n                            // Trim no longer needed inputs\n                            const delta = requestedFrame - remotePlayer.outboundFrame;\n                            remotePlayer.outboundFrame = requestedFrame;\n                            remotePlayer.outboundInputs.splice(0, delta);\n                        }\n\n                        // We can estimate the remote frame by offsetting half the ping (RTT)\n                        const estimatedRemoteFrame = frame + 0.5*remotePlayer.ping.average*60/1000;\n                        // Calculate the difference and update our drift\n                        const drift = this.rollbackMgr.currentFrame - estimatedRemoteFrame;\n                        remotePlayer.drift.update(drift);\n\n                        // Apply the remote inputs to the local simulation\n                        this.rollbackMgr.addInputs(remotePlayer.playerIdx, inputFrame, inputs);\n                    }\n                }\n            } break;\n\n            case 2: { // PING_REQUEST\n                const timestamp = data.getUint32(1);\n                remotePlayer.sendPingReply(timestamp);\n            } break;\n\n            case 3: { // PING_REPLY\n                const timestamp = data.getUint32(1);\n                const ping = (performance.now() >>> 0) - timestamp;\n                remotePlayer.ping.update(ping);\n            } break;\n            }\n        });\n\n        return remotePlayer;\n    }\n\n    /** Returns the next available player index, or -1. */\n    private nextPlayerIdx () {\n        outer: for (let playerIdx = 0; playerIdx < 4; ++playerIdx) {\n            if (this.localPlayerIdx == playerIdx) {\n                continue;\n            }\n            for (const remotePlayer of this.remotePlayers.values()) {\n                if (remotePlayer.playerIdx == playerIdx) {\n                    continue outer;\n                }\n            }\n            return playerIdx;\n        }\n        return -1;\n    }\n\n    update (localInput: number): boolean {\n        if (!this.rollbackMgr) {\n            return false; // Not joined yet\n        }\n\n        // Perform certain actions only once every few ticks\n        const every8Ticks = (this.updateCount & 7) == 0;\n        const every32Ticks = (this.updateCount & 31) == 0;\n        ++this.updateCount;\n\n        const currentFrame = this.rollbackMgr.currentFrame;\n        const inputDelay = 2;\n        const inputFrame = currentFrame + inputDelay;\n\n        // Add our input to the local simulation\n        this.rollbackMgr.addInputs(this.localPlayerIdx, inputFrame, [ localInput ]);\n\n        let stall = false;\n\n        for (const remotePlayer of this.remotePlayers.values()) {\n            // Enqueue our input to send to the remote player\n            remotePlayer.addOutboundInput(inputFrame, localInput);\n\n            remotePlayer.sendTick(currentFrame);\n\n            // Stall if we're starved for input from this player, or the outbound buffer is full\n            if (remotePlayer.nextNeededFrame < currentFrame - HISTORY_LENGTH || remotePlayer.outboundInputs.length >= MAX_OUTBOUND_INPUTS) {\n                stall = true;\n            }\n\n            if (every32Ticks) {\n                remotePlayer.sendPingRequest();\n            }\n        }\n\n        if (every8Ticks) {\n            // If we're more than one frame ahead of everybody else, stall this frame and eventually\n            // they'll catch up to us\n            let maxDrift = 0;\n            for (const remotePlayer of this.remotePlayers.values()) {\n                maxDrift = Math.max(remotePlayer.drift.average, maxDrift);\n            }\n            if (maxDrift >= 1) {\n                stall = true;\n            }\n        }\n\n        if (!stall) {\n            this.rollbackMgr.update();\n        } else {\n            // console.log(\"STALL\");\n        }\n\n        // // Temporary debug info to show in devtools live expressions\n        // const debug = [];\n        // debug.push(`frame=${currentFrame} inputDelay=${inputDelay}`);\n        // for (const remotePlayer of this.remotePlayers.values()) {\n        //     debug.push(`Player #${remotePlayer.playerIdx}: ping=${Math.round(remotePlayer.ping.average)} drift=${remotePlayer.drift.average.toFixed(2)} outboundInputs=${remotePlayer.outboundInputs.length}`);\n        // }\n        // (window as any).NETPLAY_DEBUG = debug.join(\" / \");\n\n        return !stall;\n    }\n\n    /** Get a player summary for UI display. */\n    getSummary (): { playerIdx: number, ping: number }[] {\n        const summary = [{ playerIdx: this.localPlayerIdx, ping: -1 }];\n        for (const remotePlayer of this.remotePlayers.values()) {\n            summary.push({ playerIdx: remotePlayer.playerIdx, ping: remotePlayer.ping.average });\n        }\n        summary.sort((a, b) => a.playerIdx - b.playerIdx);\n        return summary;\n    }\n}\n","export default \"\\\"use strict\\\";(()=>{var M=Math.floor(44.1),b=class{constructor(){this.freq1=0;this.freq2=0;this.startTime=0;this.attackTime=0;this.decayTime=0;this.sustainTime=0;this.releaseTime=0;this.endTick=0;this.sustainVolume=0;this.peakVolume=0;this.phase=0;this.pan=0;this.pulseDutyCycle=0;this.noiseSeed=1;this.noiseLastRandom=0}};function L(m,e,s){return m+s*(e-m)}function V(m,e){if(m<e){let s=m/e;return s+s-s*s}else if(m>1-e){let s=(m-(1-e))/e;return 1-(s+s-s*s)}else return 1}function x(m,e){return Math.pow(2,(m-69+e/256)/12)*440}var y=class extends AudioWorkletProcessor{constructor(){super(),this.time=0,this.ticks=0,this.channels=new Array(4);for(let e=0;e<4;++e)this.channels[e]=new b;this.port!=null&&(this.port.onmessage=e=>{e.data===\\\"tick\\\"?this.tick():this.tone(...e.data)})}ramp(e,s,f,u){if(this.time>=u)return s;let a=(this.time-f)/(u-f);return L(e,s,a)}getCurrentFrequency(e){return e.freq2>0?this.ramp(e.freq1,e.freq2,e.startTime,e.releaseTime):e.freq1}getCurrentVolume(e){let s=this.time;return s>=e.sustainTime&&e.releaseTime-e.sustainTime>M?this.ramp(e.sustainVolume,0,e.sustainTime,e.releaseTime):s>=e.decayTime?e.sustainVolume:s>=e.attackTime?this.ramp(e.peakVolume,e.sustainVolume,e.attackTime,e.decayTime):this.ramp(0,e.peakVolume,e.startTime,e.attackTime)}tick(){this.ticks++}tone(e,s,f,u){let a=e&65535,p=e>>16&65535,A=s&255,h=s>>8&255,o=s>>16&255,i=s>>24&255,E=Math.min(f&255,100),l=Math.min(f>>8&255,100),n=u&3,r=u>>2&3,c=u>>4&3,d=u&64,t=this.channels[n];this.time>t.releaseTime&&this.ticks!=t.endTick&&(t.phase=n==2?.25:0),d?(t.freq1=x(a&255,a>>8),t.freq2=p==0?0:x(p&255,p>>8)):(t.freq1=a,t.freq2=p),t.startTime=this.time,t.attackTime=t.startTime+(44100*i/60>>>0),t.decayTime=t.attackTime+(44100*o/60>>>0),t.sustainTime=t.decayTime+(44100*A/60>>>0),t.releaseTime=t.sustainTime+(44100*h/60>>>0),t.endTick=this.ticks+i+o+A+h,t.pan=c;let T=n==2?.25:.15;if(t.sustainVolume=T*E/100,t.peakVolume=l?T*l/100:T,n==0||n==1)switch(r){case 0:t.pulseDutyCycle=.125;break;case 1:case 3:default:t.pulseDutyCycle=.25;break;case 2:t.pulseDutyCycle=.5;break}else n==2&&h==0&&(t.releaseTime+=M)}process(e,[[s,f]],u){for(let a=0,p=s.length;a<p;++a,++this.time){let A=0,h=0;for(let o=0;o<4;++o){let i=this.channels[o];if(this.time<i.releaseTime||this.ticks==i.endTick){let E=this.getCurrentFrequency(i),l=this.getCurrentVolume(i),n;if(o==3){for(i.phase+=E*E/(1e6/44100*44100);i.phase>0;){i.phase--;let r=i.noiseSeed;r^=r>>7,r^=r<<9,r^=r>>13,i.noiseSeed=r,i.noiseLastRandom=((r&1)<<1)-1}n=l*i.noiseLastRandom}else{let r=E/44100,c=i.phase+r;if(c>=1&&c--,i.phase=c,o==2)n=l*(2*Math.abs(2*i.phase-1)-1);else{let d,t,T,k=i.pulseDutyCycle;c<k?(d=c/k,t=r/k,T=l):(d=(c-k)/(1-k),t=r/(1-k),T=-l),n=T*V(d,t)}}i.pan!=1&&(h+=n),i.pan!=2&&(A+=n)}}s[a]=A,f[a]=h}return!0}};registerProcessor(\\\"wasm4-apu\\\",y);})();\\n\"","// Created using `npm run build:apu-worklet` and\n// is automatically generated in build and start scripts.\nimport workletRawSource from \"./apu-worklet.min.generated.js?raw\";\n\ndeclare global {\n    interface Window {\n      webkitAudioContext: typeof AudioContext\n    }\n}\n\nexport class APU {\n    audioCtx: AudioContext;\n    processor!: APUProcessor;\n    processorPort!: MessagePort;\n\n    constructor () {\n        this.audioCtx = new (window.AudioContext || window.webkitAudioContext)({\n            sampleRate: 44100, // must match SAMPLE_RATE in worklet\n        });\n    }\n\n    async init () {\n        const audioCtx = this.audioCtx;\n        const blob = new Blob([workletRawSource], {type: \"application/javascript\"});\n        const url = URL.createObjectURL(blob);\n\n        try {\n            await audioCtx.audioWorklet.addModule(url);\n\n            const workletNode = new AudioWorkletNode(audioCtx, \"wasm4-apu\", {\n                outputChannelCount: [2],\n            });\n            this.processorPort = workletNode.port;\n            workletNode.connect(audioCtx.destination);\n\n        } catch (error) {\n            console.warn(\"AudioWorklet loading failed, falling back to slow audio\", error);\n\n            // Scoop out the APUProcessor with a simple polyfill\n            let processor!: APUProcessor;\n            const registerProcessor: typeof globalThis.registerProcessor = (name, p) => {\n                processor = new p() as APUProcessor;\n            }\n            const fn = new Function(\"registerProcessor\", \"AudioWorkletProcessor\", workletRawSource);\n            fn(registerProcessor, class {});\n            this.processor = processor;\n\n            const scriptNode = audioCtx.createScriptProcessor(1024, 0, 2);\n            scriptNode.onaudioprocess = event => {\n                const outputLeft = event.outputBuffer.getChannelData(0);\n                const outputRight = event.outputBuffer.getChannelData(1);\n                processor.process(null, [[outputLeft, outputRight]], null);\n            };\n            scriptNode.connect(audioCtx.destination);\n        }\n    }\n\n    tick() {\n        if (this.processorPort != null) {\n            this.processorPort.postMessage('tick');\n        } else {\n            this.processor.tick();\n        }\n    }\n\n    tone (frequency: number, duration: number, volume: number, flags: number) {\n        if (this.processorPort != null) {\n            // Send params out to the worker\n            this.processorPort.postMessage([frequency, duration, volume, flags]);\n        } else {\n            // For the ScriptProcessorNode fallback, just call tone() directly\n            this.processor.tone(frequency, duration, volume, flags);\n        }\n    }\n\n    unlockAudio () {\n        const audioCtx = this.audioCtx;\n        if (audioCtx.state == \"suspended\") {\n            audioCtx.resume();\n        }\n    }\n\n    pauseAudio () {\n        const audioCtx = this.audioCtx;\n        if (audioCtx.state == \"running\") {\n            audioCtx.suspend();\n        }\n    }\n}\n","import {\n    FONT,\n    WIDTH,\n    HEIGHT,\n    ADDR_FRAMEBUFFER,\n    ADDR_DRAW_COLORS\n} from \"./constants\";\n\nexport class Framebuffer {\n    drawColors: Uint16Array;\n    bytes: Uint8Array;\n\n    constructor (memory: ArrayBuffer) {\n        this.bytes = new Uint8Array(memory, ADDR_FRAMEBUFFER, WIDTH * HEIGHT >>> 2);\n        this.drawColors = new Uint16Array(memory, ADDR_DRAW_COLORS, 1);\n    }\n\n    clear (): void {\n        this.bytes.fill(0);\n    }\n\n    drawPoint (color: number, x: number, y: number) {\n        const idx = (WIDTH * y + x) >>> 2;\n        const shift = (x & 0x3) << 1;\n        const mask = 0x3 << shift;\n        this.bytes[idx] = (color << shift) | (this.bytes[idx] & ~mask);\n    }\n\n    drawPointUnclipped (color: number, x: number, y: number) {\n        if (x >= 0 && x < WIDTH && y >= 0 && y < HEIGHT) {\n            this.drawPoint(color, x, y);\n        }\n    }\n\n    drawHLineFast(color: number, startX: number, y: number, endX: number) {\n        const fillEnd = endX - (endX & 3);\n        const fillStart = Math.min((startX + 3) & ~3, fillEnd);\n\n        if (fillEnd - fillStart > 3) {\n            for (let xx = startX; xx < fillStart; xx++) {\n                this.drawPoint(color, xx, y);\n            }\n\n            const from = (WIDTH * y + fillStart) >>> 2;\n            const to = (WIDTH * y + fillEnd) >>> 2;\n            const fillColor = color * 0b01010101;\n\n            this.bytes.fill(fillColor, from, to);\n            startX = fillEnd;\n        }\n\n        for (let xx = startX; xx < endX; xx++) {\n            this.drawPoint(color, xx, y);\n        }\n    }\n\n    drawHLineUnclipped(color: number, startX: number, y: number, endX: number) {\n        if (y >= 0 && y < HEIGHT) {\n            if (startX < 0) {\n                startX = 0;\n            }\n            if (endX > WIDTH) {\n                endX = WIDTH;\n            }\n            if (startX < endX) {\n                this.drawHLineFast(color, startX, y, endX);\n            }\n        }\n    }\n\n    drawHLine(x: number, y: number, len: number) {\n        const dc0 = this.drawColors[0] & 0xf;\n        if (dc0 == 0) {\n            return;\n        }\n\n        const strokeColor = (dc0 - 1) & 0x3;\n        this.drawHLineUnclipped(strokeColor, x, y, x + len);\n    }\n\n    drawVLine(x: number, y: number, len: number) {\n        if (y + len <= 0 || x < 0 || x >= WIDTH) {\n            return;\n        }\n\n        const dc0 = this.drawColors[0] & 0xf;\n        if (dc0 == 0) {\n            return;\n        }\n\n        const startY = Math.max(0, y);\n        const endY = Math.min(HEIGHT, y + len);\n        const strokeColor = (dc0 - 1) & 0x3;\n        for (let yy = startY; yy < endY; yy++) {\n            this.drawPoint(strokeColor, x, yy);\n        }\n    }\n\n    drawRect(x: number, y: number, width: number, height: number) {\n        const startX = Math.max(0, x);\n        const startY = Math.max(0, y);\n        const endXUnclamped = x + width;\n        const endYUnclamped = y + height;\n        const endX = Math.max(0, Math.min(endXUnclamped, WIDTH));\n        const endY = Math.max(0, Math.min(endYUnclamped, HEIGHT));\n\n        const drawColors = this.drawColors[0];\n        const dc0 = drawColors & 0xf;\n        const dc1 = (drawColors >>> 4) & 0xf;\n\n        if (dc0 !== 0) {\n            const fillColor = (dc0 - 1) & 0x3;\n            for (let yy = startY; yy < endY; ++yy) {\n                this.drawHLineFast(fillColor, startX, yy, endX);\n            }\n        }\n\n        if (dc1 !== 0) {\n            const strokeColor = (dc1 - 1) & 0x3;\n\n            // Left edge\n            if (x >= 0 && x < WIDTH) {\n                for (let yy = startY; yy < endY; ++yy) {\n                    this.drawPoint(strokeColor, x, yy);\n                }\n            }\n\n            // Right edge\n            if (endXUnclamped > 0 && endXUnclamped <= WIDTH) {\n                for (let yy = startY; yy < endY; ++yy) {\n                    this.drawPoint(strokeColor, endXUnclamped - 1, yy);\n                }\n            }\n\n            // Top edge\n            if (y >= 0 && y < HEIGHT) {\n                this.drawHLineFast(strokeColor, startX, y, endX);\n            }\n\n            // Bottom edge\n            if (endYUnclamped > 0 && endYUnclamped <= HEIGHT) {\n                this.drawHLineFast(strokeColor, startX, endYUnclamped - 1, endX);\n            }\n        }\n    }\n\n    // Oval drawing function using a variation on the midpoint algorithm.\n    // TIC-80's ellipse drawing function used as reference.\n    // https://github.com/nesbox/TIC-80/blob/main/src/core/draw.c\n    //\n    // Javatpoint has a in depth academic explanation that mostly went over my head:\n    // https://www.javatpoint.com/computer-graphics-midpoint-ellipse-algorithm\n    //\n    // Draws the ellipse by \"scanning\" along the edge in one quadrant, and mirroring\n    // the movement for the other four quadrants.\n    //\n    // There are a lot of details to get correct while implementing this algorithm,\n    // so ensure the edge cases are covered when changing it. Long, thin ellipses\n    // are particularly susceptible to being drawn incorrectly.\n    drawOval (x: number, y: number, width: number, height: number) {\n        const drawColors = this.drawColors[0];\n        const dc0 = drawColors & 0xf;\n        const dc1 = (drawColors >>> 4) & 0xf;\n\n        if (dc1 === 0xf) {\n            return;\n        }\n\n        const strokeColor = (dc1 - 1) & 0x3;\n        const fillColor = (dc0 - 1) & 0x3;\n\n        let a = width - 1;\n        const b = height - 1;\n        let b1 = b % 2; // Compensates for precision loss when dividing\n\n        let north = y + Math.floor(height / 2); // Precision loss here\n        let west = x;\n        let east = x + width - 1;\n        let south = north - b1; // Compensation here. Moves the bottom line up by\n                                // one (overlapping the top line) for even heights\n\n        const a2 = a * a;\n        const b2 = b * b;\n\n        // Error increments. Also known as the decision parameters\n        let dx = 4 * (1 - a) * b2;\n        let dy = 4 * (b1 + 1) * a2;\n\n        // Error of 1 step\n        let err = dx + dy + b1 * a2;\n\n        a = 8 * a2;\n        b1 = 8 * b2;\n\n        do {\n            this.drawPointUnclipped(strokeColor, east, north); /*   I. Quadrant     */\n            this.drawPointUnclipped(strokeColor, west, north); /*   II. Quadrant    */\n            this.drawPointUnclipped(strokeColor, west, south); /*   III. Quadrant   */\n            this.drawPointUnclipped(strokeColor, east, south); /*   IV. Quadrant    */\n\n            const start = west + 1;\n            const len = east - start;\n\n            if (dc0 !== 0 && len > 0) { // Only draw fill if the length from west to east is not 0\n                this.drawHLineUnclipped(fillColor, start, north, east); /*   I and III. Quadrant */\n                this.drawHLineUnclipped(fillColor, start, south, east); /*  II and IV. Quadrant */\n            }\n\n            const err2 = 2 * err;\n\n            if (err2 <= dy) {\n                // Move vertical scan\n                north += 1;\n                south -= 1;\n                dy += a;\n                err += dy;\n            }\n\n            if (err2 >= dx || err2 > dy) {\n                // Move horizontal scan\n                west += 1;\n                east -= 1;\n                dx += b1;\n                err += dx;\n            }\n        } while (west <= east);\n\n        // Make sure north and south have moved the entire way so top/bottom aren't missing\n        while (north - south < height) {\n            this.drawPointUnclipped(strokeColor, west - 1, north); /*   II. Quadrant    */\n            this.drawPointUnclipped(strokeColor, east + 1, north); /*   I. Quadrant     */\n            north += 1;\n            this.drawPointUnclipped(strokeColor, west - 1, south); /*   III. Quadrant   */\n            this.drawPointUnclipped(strokeColor, east + 1, south); /*   IV. Quadrant    */\n            south -= 1;\n        }\n    }\n\n    // From https://github.com/nesbox/TIC-80/blob/master/src/core/draw.c\n    drawLine (x1: number, y1: number, x2: number, y2: number) {\n        const drawColors = this.drawColors[0];\n        const dc0 = drawColors & 0xf;\n        if (dc0 === 0) {\n            return;\n        }\n        const strokeColor = (dc0 - 1) & 0x3;\n\n        if (y1 > y2) {\n            let swap = x1;\n            x1 = x2;\n            x2 = swap;\n\n            swap = y1;\n            y1 = y2;\n            y2 = swap;\n        }\n\n        const dx = Math.abs(x2 - x1), sx = x1 < x2 ? 1 : -1;\n        const dy = y2 - y1;\n        let err = (dx > dy ? dx : -dy) / 2, e2;\n\n        for (;;) {\n            this.drawPointUnclipped(strokeColor, x1, y1);\n            if (x1 === x2 && y1 === y2) {\n                break;\n            }\n            e2 = err;\n            if (e2 > -dx) {\n                err -= dy;\n                x1 += sx;\n            }\n            if (e2 < dy) {\n                err += dx;\n                y1++;\n            }\n        }\n    }\n\n    drawText (charArray: number[] | Uint8Array | Uint8ClampedArray | Uint16Array, x: number, y: number) {\n        let currentX = x;\n        for (let ii = 0, len = charArray.length; ii < len; ++ii) {\n            const charCode = charArray[ii];\n            if (charCode === 0) {\n                return;\n            } else if (charCode === 10) {\n                y += 8;\n                currentX = x;\n            } else if (charCode >= 32 && charCode <= 255) {\n                this.blit(FONT, currentX, y, 8, 8, 0, (charCode - 32) << 3, 8);\n                currentX += 8;\n            } else {\n                currentX += 8;\n            }\n        }\n    }\n\n    blit (\n        sprite: Uint8Array,\n        dstX: number, dstY: number,\n        width: number, height: number,\n        srcX: number, srcY: number,\n        srcStride: number,\n        bpp2: number | boolean = false,\n        flipX: number | boolean = false,\n        flipY: number | boolean = false,\n        rotate: number | boolean = false\n    ) {\n        const drawColors = this.drawColors[0];\n\n        // Clip rectangle to screen\n        let clipXMin, clipYMin, clipXMax, clipYMax;\n        if (rotate) {\n            flipX = !flipX;\n            clipXMin = Math.max(0, dstY) - dstY;\n            clipYMin = Math.max(0, dstX) - dstX;\n            clipXMax = Math.min(width, HEIGHT - dstY);\n            clipYMax = Math.min(height, WIDTH - dstX);\n        } else {\n            clipXMin = Math.max(0, dstX) - dstX;\n            clipYMin = Math.max(0, dstY) - dstY;\n            clipXMax = Math.min(width, WIDTH - dstX);\n            clipYMax = Math.min(height, HEIGHT - dstY);\n        }\n\n        // Iterate pixels in rectangle\n        for (let y = clipYMin; y < clipYMax; y++) {\n            for (let x = clipXMin; x < clipXMax; x++) {\n                // Calculate sprite target coords\n                const tx = dstX + (rotate ? y : x);\n                const ty = dstY + (rotate ? x : y);\n\n                // Calculate sprite source coords\n                const sx = srcX + (flipX ? width - x - 1 : x);\n                const sy = srcY + (flipY ? height - y - 1 : y);\n\n                // Sample the sprite to get a color index\n                let colorIdx;\n                const bitIndex = sy * srcStride + sx;\n                if (bpp2) {\n                    const byte = sprite[bitIndex >>> 2];\n                    const shift = 6 - ((bitIndex & 0x03) << 1);\n                    colorIdx = (byte >>> shift) & 0b11;\n                } else {\n                    const byte = sprite[bitIndex >>> 3];\n                    const shift = 7 - (bitIndex & 0x7);\n                    colorIdx = (byte >>> shift) & 0b1;\n                }\n\n                // Get the final color using the drawColors indirection\n                // TODO(2021-08-11): Use a lookup table here?\n                const dc = (drawColors >>> (colorIdx << 2)) & 0x0f;\n                if (dc !== 0) {\n                    this.drawPoint((dc - 1) & 0x03, tx, ty);\n                }\n            }\n        }\n    }\n}\n","/**\n * The following defined constants and descriptions are directly ported from https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants\n *\n * Any copyright is dedicated to the Public Domain. http://creativecommons.org/publicdomain/zero/1.0/\n *\n * Contributors\n *\n * See: https://developer.mozilla.org/en-US/profiles/Sheppy\n * See: https://developer.mozilla.org/en-US/profiles/fscholz\n * See: https://developer.mozilla.org/en-US/profiles/AtiX\n * See: https://developer.mozilla.org/en-US/profiles/Sebastianz\n *\n * These constants are defined on the WebGLRenderingContext / WebGL2RenderingContext interface\n */\n\n// Clearing buffers\n// Constants passed to WebGLRenderingContext.clear() to clear buffer masks\n\n/**\n * Passed to clear to clear the current depth buffer\n * @constant {number}\n */\nexport const DEPTH_BUFFER_BIT = 0x00000100;\n\n/**\n * Passed to clear to clear the current stencil buffer\n * @constant {number}\n */\nexport const STENCIL_BUFFER_BIT = 0x00000400;\n\n/**\n * Passed to clear to clear the current color buffer\n * @constant {number}\n */\nexport const COLOR_BUFFER_BIT = 0x00004000;\n\n// Rendering primitives\n// Constants passed to WebGLRenderingContext.drawElements() or WebGLRenderingContext.drawArrays() to specify what kind of primitive to render\n\n/**\n * Passed to drawElements or drawArrays to draw single points\n * @constant {number}\n */\nexport const POINTS = 0x0000;\n\n/**\n * Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it\n * @constant {number}\n */\nexport const LINES = 0x0001;\n\n/**\n * Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment\n * @constant {number}\n */\nexport const LINE_LOOP = 0x0002;\n\n/**\n * Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last\n * @constant {number}\n */\nexport const LINE_STRIP = 0x0003;\n\n/**\n * Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle\n * @constant {number}\n */\nexport const TRIANGLES = 0x0004;\n\n/**\n * Passed to drawElements or drawArrays to draw a connected group of triangles\n * @constant {number}\n */\nexport const TRIANGLE_STRIP = 0x0005;\n\n/**\n * Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan\n * @constant {number}\n */\nexport const TRIANGLE_FAN = 0x0006;\n\n// Blending modes\n// Constants passed to WebGLRenderingContext.blendFunc() or WebGLRenderingContext.blendFuncSeparate() to specify the blending mode (for both, RBG and alpha, or separately)\n\n/**\n * Passed to blendFunc or blendFuncSeparate to turn off a component\n * @constant {number}\n */\nexport const ZERO = 0;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to turn on a component\n * @constant {number}\n */\nexport const ONE = 1;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color\n * @constant {number}\n */\nexport const SRC_COLOR = 0x0300;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color\n * @constant {number}\n */\nexport const ONE_MINUS_SRC_COLOR = 0x0301;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha\n * @constant {number}\n */\nexport const SRC_ALPHA = 0x0302;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha\n * @constant {number}\n */\nexport const ONE_MINUS_SRC_ALPHA = 0x0303;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha\n * @constant {number}\n */\nexport const DST_ALPHA = 0x0304;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha\n * @constant {number}\n */\nexport const ONE_MINUS_DST_ALPHA = 0x0305;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color\n * @constant {number}\n */\nexport const DST_COLOR = 0x0306;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color\n * @constant {number}\n */\nexport const ONE_MINUS_DST_COLOR = 0x0307;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha\n * @constant {number}\n */\nexport const SRC_ALPHA_SATURATE = 0x0308;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to specify a constant color blend function\n * @constant {number}\n */\nexport const CONSTANT_COLOR = 0x8001;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function\n * @constant {number}\n */\nexport const ONE_MINUS_CONSTANT_COLOR = 0x8002;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function\n * @constant {number}\n */\nexport const CONSTANT_ALPHA = 0x8003;\n\n/**\n * Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function\n * @constant {number}\n */\nexport const ONE_MINUS_CONSTANT_ALPHA = 0x8004;\n\n// Blending equations\n// Constants passed to WebGLRenderingContext.blendEquation() or WebGLRenderingContext.blendEquationSeparate() to control how the blending is calculated (for both, RBG and alpha, or separately)\n\n/**\n * Passed to blendEquation or blendEquationSeparate to set an addition blend function\n * @constant {number}\n */\nexport const FUNC_ADD = 0x8006;\n\n/**\n * Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination)\n * @constant {number}\n */\nexport const FUNC_SUBSTRACT = 0x800a;\n\n/**\n * Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source)\n * @constant {number}\n */\nexport const FUNC_REVERSE_SUBTRACT = 0x800b;\n\n// Getting GL parameter information\n// Constants passed to WebGLRenderingContext.getParameter() to specify what information to return\n\n/**\n * Passed to getParameter to get the current RGB blend function\n * @constant {number}\n */\nexport const BLEND_EQUATION = 0x8009;\n\n/**\n * Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION\n * @constant {number}\n */\nexport const BLEND_EQUATION_RGB = 0x8009;\n\n/**\n * Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION\n * @constant {number}\n */\nexport const BLEND_EQUATION_ALPHA = 0x883d;\n\n/**\n * Passed to getParameter to get the current destination RGB blend function\n * @constant {number}\n */\nexport const BLEND_DST_RGB = 0x80c8;\n\n/**\n * Passed to getParameter to get the current source RGB blend function\n * @constant {number}\n */\nexport const BLEND_SRC_RGB = 0x80c9;\n\n/**\n * Passed to getParameter to get the current destination alpha blend function\n * @constant {number}\n */\nexport const BLEND_DST_ALPHA = 0x80ca;\n\n/**\n * Passed to getParameter to get the current source alpha blend function\n * @constant {number}\n */\nexport const BLEND_SRC_ALPHA = 0x80cb;\n\n/**\n * Passed to getParameter to return a the current blend color\n * @constant {number}\n */\nexport const BLEND_COLOR = 0x8005;\n\n/**\n * Passed to getParameter to get the array buffer binding\n * @constant {number}\n */\nexport const ARRAY_BUFFER_BINDING = 0x8894;\n\n/**\n * Passed to getParameter to get the current element array buffer\n * @constant {number}\n */\nexport const ELEMENT_ARRAY_BUFFER_BINDING = 0x8895;\n\n/**\n * Passed to getParameter to get the current lineWidth (set by the lineWidth method)\n * @constant {number}\n */\nexport const LINE_WIDTH = 0x0b21;\n\n/**\n * Passed to getParameter to get the current size of a point drawn with gl.POINTS\n * @constant {number}\n */\nexport const ALIASED_POINT_SIZE_RANGE = 0x846d;\n\n/**\n * Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1\n * @constant {number}\n */\nexport const ALIASED_LINE_WIDTH_RANGE = 0x846e;\n\n/**\n * Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK\n * @constant {number}\n */\nexport const CULL_FACE_MODE = 0x0b45;\n\n/**\n * Passed to getParameter to determine the current value of frontFace. Should return CW or CCW\n * @constant {number}\n */\nexport const FRONT_FACE = 0x0b46;\n\n/**\n * Passed to getParameter to return a length-2 array of floats giving the current depth range\n * @constant {number}\n */\nexport const DEPTH_RANGE = 0x0b70;\n\n/**\n * Passed to getParameter to determine if the depth write mask is enabled\n * @constant {number}\n */\nexport const DEPTH_WRITEMASK = 0x0b72;\n\n/**\n * Passed to getParameter to determine the current depth clear value\n * @constant {number}\n */\nexport const DEPTH_CLEAR_VALUE = 0x0b73;\n\n/**\n * Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL\n * @constant {number}\n */\nexport const DEPTH_FUNC = 0x0b74;\n\n/**\n * Passed to getParameter to get the value the stencil will be cleared to\n * @constant {number}\n */\nexport const STENCIL_CLEAR_VALUE = 0x0b91;\n\n/**\n * Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL\n * @constant {number}\n */\nexport const STENCIL_FUNC = 0x0b92;\n\n/**\n * Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP\n * @constant {number}\n */\nexport const STENCIL_FAIL = 0x0b94;\n\n/**\n * Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP\n * @constant {number}\n */\nexport const STENCIL_PASS_DEPTH_FAIL = 0x0b95;\n\n/**\n * Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP\n * @constant {number}\n */\nexport const STENCIL_PASS_DEPTH_PASS = 0x0b96;\n\n/**\n * Passed to getParameter to get the reference value used for stencil tests\n * @constant {number}\n */\nexport const STENCIL_REF = 0x0b97;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_VALUE_MASK = 0x0b93;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_WRITEMASK = 0x0b98;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_FUNC = 0x8800;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_FAIL = 0x8801;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_PASS_DEPTH_FAIL = 0x8802;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_PASS_DEPTH_PASS = 0x8803;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_REF = 0x8ca3;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_VALUE_MASK = 0x8ca4;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BACK_WRITEMASK = 0x8ca5;\n\n/**\n * Returns an Int32Array with four elements for the current viewport dimensions\n * @constant {number}\n */\nexport const VIEWPORT = 0x0ba2;\n\n/**\n * Returns an Int32Array with four elements for the current scissor box dimensions\n * @constant {number}\n */\nexport const SCISSOR_BOX = 0x0c10;\n\n/**\n * @constant {number}\n */\nexport const COLOR_CLEAR_VALUE = 0x0c22;\n\n/**\n * @constant {number}\n */\nexport const COLOR_WRITEMASK = 0x0c23;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_ALIGNMENT = 0x0cf5;\n\n/**\n * @constant {number}\n */\nexport const PACK_ALIGNMENT = 0x0d05;\n\n/**\n * @constant {number}\n */\nexport const MAX_TEXTURE_SIZE = 0x0d33;\n\n/**\n * @constant {number}\n */\nexport const MAX_VIEWPORT_DIMS = 0x0d3a;\n\n/**\n * @constant {number}\n */\nexport const SUBPIXEL_BITS = 0x0d50;\n\n/**\n * @constant {number}\n */\nexport const RED_BITS = 0x0d52;\n\n/**\n * @constant {number}\n */\nexport const GREEN_BITS = 0x0d53;\n\n/**\n * @constant {number}\n */\nexport const BLUE_BITS = 0x0d54;\n\n/**\n * @constant {number}\n */\nexport const ALPHA_BITS = 0x0d55;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_BITS = 0x0d56;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_BITS = 0x0d57;\n\n/**\n * @constant {number}\n */\nexport const POLYGON_OFFSET_UNITS = 0x2a00;\n\n/**\n * @constant {number}\n */\nexport const POLYGON_OFFSET_FACTOR = 0x8038;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_BINDING_2D = 0x8069;\n\n/**\n * @constant {number}\n */\nexport const SAMPLE_BUFFERS = 0x80a8;\n\n/**\n * @constant {number}\n */\nexport const SAMPLES = 0x80a9;\n\n/**\n * @constant {number}\n */\nexport const SAMPLE_COVERAGE_VALUE = 0x80aa;\n\n/**\n * @constant {number}\n */\nexport const SAMPLE_COVERAGE_INVERT = 0x80ab;\n\n/**\n * @constant {number}\n */\nexport const COMPRESSED_TEXTURE_FORMATS = 0x86a3;\n\n/**\n * @constant {number}\n */\nexport const VENDOR = 0x1f00;\n\n/**\n * @constant {number}\n */\nexport const RENDERER = 0x1f01;\n\n/**\n * @constant {number}\n */\nexport const VERSION = 0x1f02;\n\n/**\n * @constant {number}\n */\nexport const IMPLEMENTATION_COLOR_READ_TYPE = 0x8b9a;\n\n/**\n * @constant {number}\n */\nexport const IMPLEMENTATION_COLOR_READ_FORMAT = 0x8b9b;\n\n/**\n * @constant {number}\n */\nexport const BROWSER_DEFAULT_WEBGL = 0x9244;\n\n// Buffers\n// Constants passed to WebGLRenderingContext.bufferData(), WebGLRenderingContext.bufferSubData(), WebGLRenderingContext.bindBuffer(), or WebGLRenderingContext.getBufferParameter()\n\n/**\n * Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often\n * @constant {number}\n */\nexport const STATIC_DRAW = 0x88e4;\n\n/**\n * Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often\n * @constant {number}\n */\nexport const STREAM_DRAW = 0x88e0;\n\n/**\n * Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often\n * @constant {number}\n */\nexport const DYNAMIC_DRAW = 0x88e8;\n\n/**\n * Passed to bindBuffer or bufferData to specify the type of buffer being used\n * @constant {number}\n */\nexport const ARRAY_BUFFER = 0x8892;\n\n/**\n * Passed to bindBuffer or bufferData to specify the type of buffer being used\n * @constant {number}\n */\nexport const ELEMENT_ARRAY_BUFFER = 0x8893;\n\n/**\n * Passed to getBufferParameter to get a buffer's size\n * @constant {number}\n */\nexport const BUFFER_SIZE = 0x8764;\n\n/**\n * Passed to getBufferParameter to get the hint for the buffer passed in when it was created\n * @constant {number}\n */\nexport const BUFFER_USAGE = 0x8765;\n\n// Vertex attributes\n// Constants passed to WebGLRenderingContext.getVertexAttrib()\n\n/**\n * Passed to getVertexAttrib to read back the current vertex attribute\n * @constant {number}\n */\nexport const CURRENT_VERTEX_ATTRIB = 0x8626;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_ENABLED = 0x8622;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_SIZE = 0x8623;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_STRIDE = 0x8624;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_TYPE = 0x8625;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_NORMALIZED = 0x886a;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_POINTER = 0x8645;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889f;\n\n// Culling\n// Constants passed to WebGLRenderingContext.cullFace()\n\n/**\n * Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method\n * @constant {number}\n */\nexport const CULL_FACE = 0x0b44;\n\n/**\n * Passed to cullFace to specify that only front faces should be culled\n * @constant {number}\n */\nexport const FRONT = 0x0404;\n\n/**\n * Passed to cullFace to specify that only back faces should be culled\n * @constant {number}\n */\nexport const BACK = 0x0405;\n\n/**\n * Passed to cullFace to specify that front and back faces should be culled\n * @constant {number}\n */\nexport const FRONT_AND_BACK = 0x0408;\n\n// Enabling and disabling\n// Constants passed to WebGLRenderingContext.enable() or WebGLRenderingContext.disable()\n\n/**\n * Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method\n * @constant {number}\n */\nexport const BLEND = 0x0be2;\n\n/**\n * Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test\n * @constant {number}\n */\nexport const DEPTH_TEST = 0x0b71;\n\n/**\n * Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method\n * @constant {number}\n */\nexport const DITHER = 0x0bd0;\n\n/**\n * Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test\n * @constant {number}\n */\nexport const POLYGON_OFFSET_FILL = 0x8037;\n\n/**\n * Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels\n * @constant {number}\n */\nexport const SAMPLE_ALPHA_TO_COVERAGE = 0x809e;\n\n/**\n * Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling\n * @constant {number}\n */\nexport const SAMPLE_COVERAGE = 0x80a0;\n\n/**\n * Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test\n * @constant {number}\n */\nexport const SCISSOR_TEST = 0x0c11;\n\n/**\n * Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test\n * @constant {number}\n */\nexport const STENCIL_TEST = 0x0b90;\n\n// Errors\n// Constants returned from WebGLRenderingContext.getError()\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const NO_ERROR = 0;\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const INVALID_ENUM = 0x0500;\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const INVALID_VALUE = 0x0501;\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const INVALID_OPERATION = 0x0502;\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const OUT_OF_MEMORY = 0x0505;\n\n/**\n * Returned from getError\n * @constant {number}\n */\nexport const CONTEXT_LOST_WEBGL = 0x9242;\n\n// Front face directions\n// Constants passed to WebGLRenderingContext.frontFace()\n\n/**\n * Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction,\n * @constant {number}\n */\nexport const CW = 0x0900;\n\n/**\n * Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction\n * @constant {number}\n */\nexport const CCW = 0x0901;\n\n// Hints\n// Constants passed to WebGLRenderingContext.hint()\n\n/**\n * There is no preference for this behavior\n * @constant {number}\n */\nexport const DONT_CARE = 0x1100;\n\n/**\n * The most efficient behavior should be used\n * @constant {number}\n */\nexport const FASTEST = 0x1101;\n\n/**\n * The most correct or the highest quality option should be used\n * @constant {number}\n */\nexport const NICEST = 0x1102;\n\n/**\n * Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap()\n * @constant {number}\n */\nexport const GENERATE_MIPMAP_HINT = 0x8192;\n\n// Data types\n\n/**\n * @constant {number}\n */\nexport const BYTE = 0x1400;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_BYTE = 0x1401;\n\n/**\n * @constant {number}\n */\nexport const SHORT = 0x1402;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_SHORT = 0x1403;\n\n/**\n * @constant {number}\n */\nexport const INT = 0x1404;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT = 0x1405;\n\n/**\n * @constant {number}\n */\nexport const FLOAT = 0x1406;\n\n// Pixel formats\n\n/**\n * @constant {number}\n */\nexport const DEPTH_COMPONENT = 0x1902;\n\n/**\n * @constant {number}\n */\nexport const ALPHA = 0x1906;\n\n/**\n * @constant {number}\n */\nexport const RGB = 0x1907;\n\n/**\n * @constant {number}\n */\nexport const RGBA = 0x1908;\n\n/**\n * @constant {number}\n */\nexport const LUMINANCE = 0x1909;\n\n/**\n * @constant {number}\n */\nexport const LUMINANCE_ALPHA = 0x190a;\n\n// Pixel types\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_SHORT_4_4_4_4 = 0x8033;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_SHORT_5_5_5_1 = 0x8034;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_SHORT_5_6_5 = 0x8363;\n\n// Shaders\n// Constants passed to WebGLRenderingContext.getShaderParameter()\n\n/**\n * Passed to createShader to define a fragment shader\n * @constant {number}\n */\nexport const FRAGMENT_SHADER = 0x8b30;\n\n/**\n * Passed to createShader to define a vertex shader\n * @constant {number}\n */\nexport const VERTEX_SHADER = 0x8b31;\n\n/**\n * Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error\n * @constant {number}\n */\nexport const COMPILE_STATUS = 0x8b81;\n\n/**\n * Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise\n * @constant {number}\n */\nexport const DELETE_STATUS = 0x8b80;\n\n/**\n * Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error\n * @constant {number}\n */\nexport const LINK_STATUS = 0x8b82;\n\n/**\n * Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found\n * @constant {number}\n */\nexport const VALIDATE_STATUS = 0x8b83;\n\n/**\n * Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred\n * @constant {number}\n */\nexport const ATTACHED_SHADERS = 0x8b85;\n\n/**\n * Passed to getProgramParameter to get the number of attributes active in a program\n * @constant {number}\n */\nexport const ACTIVE_ATTRIBUTES = 0x8b89;\n\n/**\n * Passed to getProgramParamter to get the number of uniforms active in a program\n * @constant {number}\n */\nexport const ACTIVE_UNIFORMS = 0x8b86;\n\n/**\n * The maximum number of entries possible in the vertex attribute list\n * @constant {number}\n */\nexport const MAX_VERTEX_ATTRIBS = 0x8869;\n\n/**\n * @constant {number}\n */\nexport const MAX_VERTEX_UNIFORM_VECTORS = 0x8dfb;\n\n/**\n * @constant {number}\n */\nexport const MAX_VARYING_VECTORS = 0x8dfc;\n\n/**\n * @constant {number}\n */\nexport const MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8b4d;\n\n/**\n * @constant {number}\n */\nexport const MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8b4c;\n\n/**\n * Implementation dependent number of maximum texture units. At least 8\n * @constant {number}\n */\nexport const MAX_TEXTURE_IMAGE_UNITS = 0x8872;\n\n/**\n * @constant {number}\n */\nexport const MAX_FRAGMENT_UNIFORM_VECTORS = 0x8dfd;\n\n/**\n * @constant {number}\n */\nexport const SHADER_TYPE = 0x8b4f;\n\n/**\n * @constant {number}\n */\nexport const SHADING_LANGUAGE_VERSION = 0x8b8c;\n\n/**\n * @constant {number}\n */\nexport const CURRENT_PROGRAM = 0x8b8d;\n\n// Depth or stencil tests\n// Constants passed to WebGLRenderingContext.stencilFunc()\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn\n * @constant {number}\n */\nexport const NEVER = 0x0200;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn\n * @constant {number}\n */\nexport const ALWAYS = 0x0207;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value\n * @constant {number}\n */\nexport const LESS = 0x0201;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value\n * @constant {number}\n */\nexport const EQUAL = 0x0202;\n\n/**\n *  Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value\n * @constant {number}\n */\nexport const LEQUAL = 0x0203;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value\n * @constant {number}\n */\nexport const GREATER = 0x0204;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value\n * @constant {number}\n */\nexport const GEQUAL = 0x0206;\n\n/**\n * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value\n * @constant {number}\n */\nexport const NOTEQUAL = 0x0205;\n\n// Stencil actions\n// Constants passed to WebGLRenderingContext.stencilOp()\n\n/**\n * @constant {number}\n */\nexport const KEEP = 0x1e00;\n\n/**\n * @constant {number}\n */\nexport const REPLACE = 0x1e01;\n\n/**\n * @constant {number}\n */\nexport const INCR = 0x1e02;\n\n/**\n * @constant {number}\n */\nexport const DECR = 0x1e03;\n\n/**\n * @constant {number}\n */\nexport const INVERT = 0x150a;\n\n/**\n * @constant {number}\n */\nexport const INCR_WRAP = 0x8507;\n\n/**\n * @constant {number}\n */\nexport const DECR_WRAP = 0x8508;\n\n// Textures\n// Constants passed to WebGLRenderingContext.texParameteri(), WebGLRenderingContext.texParameterf(), WebGLRenderingContext.bindTexture(), WebGLRenderingContext.texImage2D(), and others\n\n/**\n * @constant {number}\n */\nexport const NEAREST = 0x2600;\n\n/**\n * @constant {number}\n */\nexport const LINEAR = 0x2601;\n\n/**\n * @constant {number}\n */\nexport const NEAREST_MIPMAP_NEAREST = 0x2700;\n\n/**\n * @constant {number}\n */\nexport const LINEAR_MIPMAP_NEAREST = 0x2701;\n\n/**\n * @constant {number}\n */\nexport const NEAREST_MIPMAP_LINEAR = 0x2702;\n\n/**\n * @constant {number}\n */\nexport const LINEAR_MIPMAP_LINEAR = 0x2703;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_MAG_FILTER = 0x2800;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_MIN_FILTER = 0x2801;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_WRAP_S = 0x2802;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_WRAP_T = 0x2803;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_2D = 0x0de1;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE = 0x1702;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP = 0x8513;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_BINDING_CUBE_MAP = 0x8514;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_NEGATIVE_X = 0x8516;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_POSITIVE_Y = 0x8517;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_NEGATIVE_Y = 0x8518;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_POSITIVE_Z = 0x8519;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_CUBE_MAP_NEGATIVE_Z = 0x851a;\n\n/**\n * @constant {number}\n */\nexport const MAX_CUBE_MAP_TEXTURE_SIZE = 0x851c;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE0 = 0x84c0;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE1 = 0x84c1;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE2 = 0x84c2;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE3 = 0x84c3;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE4 = 0x84c4;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE5 = 0x84c5;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE6 = 0x84c6;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE7 = 0x84c7;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE8 = 0x84c8;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE9 = 0x84c9;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE10 = 0x84ca;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE11 = 0x84cb;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE12 = 0x84cc;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE13 = 0x84cd;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE14 = 0x84ce;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE15 = 0x84cf;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE16 = 0x84d0;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE17 = 0x84d1;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE18 = 0x84d2;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE19 = 0x84d3;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE20 = 0x84d4;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE21 = 0x84d5;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE22 = 0x84d6;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE23 = 0x84d7;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE24 = 0x84d8;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE25 = 0x84d9;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE26 = 0x84da;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE27 = 0x84db;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE28 = 0x84dc;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE29 = 0x84dd;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE30 = 0x84de;\n\n/**\n * A texture unit\n * @constant {number}\n */\nexport const TEXTURE31 = 0x84df;\n\n/**\n * The current active texture unit\n * @constant {number}\n */\nexport const ACTIVE_TEXTURE = 0x84e0;\n\n/**\n * @constant {number}\n */\nexport const REPEAT = 0x2901;\n\n/**\n * @constant {number}\n */\nexport const CLAMP_TO_EDGE = 0x812f;\n\n/**\n * @constant {number}\n */\nexport const MIRRORED_REPEAT = 0x8370;\n\n// Uniform types\n\n/**\n * @constant {number}\n */\nexport const FLOAT_VEC2 = 0x8b50;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_VEC3 = 0x8b51;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_VEC4 = 0x8b52;\n\n/**\n * @constant {number}\n */\nexport const INT_VEC2 = 0x8b53;\n\n/**\n * @constant {number}\n */\nexport const INT_VEC3 = 0x8b54;\n\n/**\n * @constant {number}\n */\nexport const INT_VEC4 = 0x8b55;\n\n/**\n * @constant {number}\n */\nexport const BOOL = 0x8b56;\n\n/**\n * @constant {number}\n */\nexport const BOOL_VEC2 = 0x8b57;\n\n/**\n * @constant {number}\n */\nexport const BOOL_VEC3 = 0x8b58;\n\n/**\n * @constant {number}\n */\nexport const BOOL_VEC4 = 0x8b59;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT2 = 0x8b5a;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT3 = 0x8b5b;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT4 = 0x8b5c;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_2D = 0x8b5e;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_CUBE = 0x8b60;\n\n// Shader precision-specified types\n\n/**\n * @constant {number}\n */\nexport const LOW_FLOAT = 0x8df0;\n\n/**\n * @constant {number}\n */\nexport const MEDIUM_FLOAT = 0x8df1;\n\n/**\n * @constant {number}\n */\nexport const HIGH_FLOAT = 0x8df2;\n\n/**\n * @constant {number}\n */\nexport const LOW_INT = 0x8df3;\n\n/**\n * @constant {number}\n */\nexport const MEDIUM_INT = 0x8df4;\n\n/**\n * @constant {number}\n */\nexport const HIGH_INT = 0x8df5;\n\n// Framebuffers and renderbuffers\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER = 0x8d40;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER = 0x8d41;\n\n/**\n * @constant {number}\n */\nexport const RGBA4 = 0x8056;\n\n/**\n * @constant {number}\n */\nexport const RGB5_A1 = 0x8057;\n\n/**\n * @constant {number}\n */\nexport const RGB565 = 0x8d62;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_COMPONENT16 = 0x81a5;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_INDEX = 0x1901;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_INDEX8 = 0x8d48;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_STENCIL = 0x84f9;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_WIDTH = 0x8d42;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_HEIGHT = 0x8d43;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_INTERNAL_FORMAT = 0x8d44;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_RED_SIZE = 0x8d50;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_GREEN_SIZE = 0x8d51;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_BLUE_SIZE = 0x8d52;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_ALPHA_SIZE = 0x8d53;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_DEPTH_SIZE = 0x8d54;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_STENCIL_SIZE = 0x8d55;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 0x8cd0;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 0x8cd1;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 0x8cd2;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8cd3;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT0 = 0x8ce0;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_ATTACHMENT = 0x8d00;\n\n/**\n * @constant {number}\n */\nexport const STENCIL_ATTACHMENT = 0x8d20;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_STENCIL_ATTACHMENT = 0x821a;\n\n/**\n * @constant {number}\n */\nexport const NONE = 0;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_COMPLETE = 0x8cd5;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8cd6;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8cd7;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8cd9;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_UNSUPPORTED = 0x8cdd;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_BINDING = 0x8ca6;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_BINDING = 0x8ca7;\n\n/**\n * @constant {number}\n */\nexport const MAX_RENDERBUFFER_SIZE = 0x84e8;\n\n/**\n * @constant {number}\n */\nexport const INVALID_FRAMEBUFFER_OPERATION = 0x0506;\n\n// Pixel storage modes\n// Constants passed to WebGLRenderingContext.pixelStorei()\n\n/**\n * @constant {number}\n */\nexport const UNPACK_FLIP_Y_WEBGL = 0x9240;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;\n\n// Additional constants defined WebGL 2\n// These constants are defined on the WebGL2RenderingContext interface. All WebGL 1 constants are also available in a WebGL 2 context\n\n// Getting GL parameter information\n// Constants passed to WebGLRenderingContext.getParameter() to specify what information to return\n\n/**\n * @constant {number}\n */\nexport const READ_BUFFER = 0x0c02;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_ROW_LENGTH = 0x0cf2;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_SKIP_ROWS = 0x0cf3;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_SKIP_PIXELS = 0x0cf4;\n\n/**\n * @constant {number}\n */\nexport const PACK_ROW_LENGTH = 0x0d02;\n\n/**\n * @constant {number}\n */\nexport const PACK_SKIP_ROWS = 0x0d03;\n\n/**\n * @constant {number}\n */\nexport const PACK_SKIP_PIXELS = 0x0d04;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_BINDING_3D = 0x806a;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_SKIP_IMAGES = 0x806d;\n\n/**\n * @constant {number}\n */\nexport const UNPACK_IMAGE_HEIGHT = 0x806e;\n\n/**\n * @constant {number}\n */\nexport const MAX_3D_TEXTURE_SIZE = 0x8073;\n\n/**\n * @constant {number}\n */\nexport const MAX_ELEMENTS_VERTICES = 0x80e8;\n\n/**\n * @constant {number}\n */\nexport const MAX_ELEMENTS_INDICES = 0x80e9;\n\n/**\n * @constant {number}\n */\nexport const MAX_TEXTURE_LOD_BIAS = 0x84fd;\n\n/**\n * @constant {number}\n */\nexport const MAX_FRAGMENT_UNIFORM_COMPONENTS = 0x8b49;\n\n/**\n * @constant {number}\n */\nexport const MAX_VERTEX_UNIFORM_COMPONENTS = 0x8b4a;\n\n/**\n * @constant {number}\n */\nexport const MAX_ARRAY_TEXTURE_LAYERS = 0x88ff;\n\n/**\n * @constant {number}\n */\nexport const MIN_PROGRAM_TEXEL_OFFSET = 0x8904;\n\n/**\n * @constant {number}\n */\nexport const MAX_PROGRAM_TEXEL_OFFSET = 0x8905;\n\n/**\n * @constant {number}\n */\nexport const MAX_VARYING_COMPONENTS = 0x8b4b;\n\n/**\n * @constant {number}\n */\nexport const FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\n\n/**\n * @constant {number}\n */\nexport const RASTERIZER_DISCARD = 0x8c89;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ARRAY_BINDING = 0x85b5;\n\n/**\n * @constant {number}\n */\nexport const MAX_VERTEX_OUTPUT_COMPONENTS = 0x9122;\n\n/**\n * @constant {number}\n */\nexport const MAX_FRAGMENT_INPUT_COMPONENTS = 0x9125;\n\n/**\n * @constant {number}\n */\nexport const MAX_SERVER_WAIT_TIMEOUT = 0x9111;\n\n/**\n * @constant {number}\n */\nexport const MAX_ELEMENT_INDEX = 0x8d6b;\n\n// Textures\n// Constants passed to WebGLRenderingContext.texParameteri(), WebGLRenderingContext.texParameterf(), WebGLRenderingContext.bindTexture(), WebGLRenderingContext.texImage2D(), and others\n\n/**\n * @constant {number}\n */\nexport const RED = 0x1903;\n\n/**\n * @constant {number}\n */\nexport const RGB8 = 0x8051;\n\n/**\n * @constant {number}\n */\nexport const RGBA8 = 0x8058;\n\n/**\n * @constant {number}\n */\nexport const RGB10_A2 = 0x8059;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_3D = 0x806f;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_WRAP_R = 0x8072;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_MIN_LOD = 0x813a;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_MAX_LOD = 0x813b;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_BASE_LEVEL = 0x813c;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_MAX_LEVEL = 0x813d;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_COMPARE_MODE = 0x884c;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_COMPARE_FUNC = 0x884d;\n\n/**\n * @constant {number}\n */\nexport const SRGB = 0x8c40;\n\n/**\n * @constant {number}\n */\nexport const SRGB8 = 0x8c41;\n\n/**\n * @constant {number}\n */\nexport const SRGB8_ALPHA8 = 0x8c43;\n\n/**\n * @constant {number}\n */\nexport const COMPARE_REF_TO_TEXTURE = 0x884e;\n\n/**\n * @constant {number}\n */\nexport const RGBA32F = 0x8814;\n\n/**\n * @constant {number}\n */\nexport const RGB32F = 0x8815;\n\n/**\n * @constant {number}\n */\nexport const RGBA16F = 0x881a;\n\n/**\n * @constant {number}\n */\nexport const RGB16F = 0x881b;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_2D_ARRAY = 0x8c1a;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_BINDING_2D_ARRAY = 0x8c1d;\n\n/**\n * @constant {number}\n */\nexport const R11F_G11F_B10F = 0x8c3a;\n\n/**\n * @constant {number}\n */\nexport const RGB9_E5 = 0x8c3d;\n\n/**\n * @constant {number}\n */\nexport const RGBA32UI = 0x8d70;\n\n/**\n * @constant {number}\n */\nexport const RGB32UI = 0x8d71;\n\n/**\n * @constant {number}\n */\nexport const RGBA16UI = 0x8d76;\n\n/**\n * @constant {number}\n */\nexport const RGB16UI = 0x8d77;\n\n/**\n * @constant {number}\n */\nexport const RGBA8UI = 0x8d7c;\n\n/**\n * @constant {number}\n */\nexport const RGB8UI = 0x8d7d;\n\n/**\n * @constant {number}\n */\nexport const RGBA32I = 0x8d82;\n\n/**\n * @constant {number}\n */\nexport const RGB32I = 0x8d83;\n\n/**\n * @constant {number}\n */\nexport const RGBA16I = 0x8d88;\n\n/**\n * @constant {number}\n */\nexport const RGB16I = 0x8d89;\n\n/**\n * @constant {number}\n */\nexport const RGBA8I = 0x8d8e;\n\n/**\n * @constant {number}\n */\nexport const RGB8I = 0x8d8f;\n\n/**\n * @constant {number}\n */\nexport const RED_INTEGER = 0x8d94;\n\n/**\n * @constant {number}\n */\nexport const RGB_INTEGER = 0x8d98;\n\n/**\n * @constant {number}\n */\nexport const RGBA_INTEGER = 0x8d99;\n\n/**\n * @constant {number}\n */\nexport const R8 = 0x8229;\n\n/**\n * @constant {number}\n */\nexport const RG8 = 0x822b;\n\n/**\n * @constant {number}\n */\nexport const R16F = 0x822d;\n\n/**\n * @constant {number}\n */\nexport const R32F = 0x822e;\n\n/**\n * @constant {number}\n */\nexport const RG16F = 0x822f;\n\n/**\n * @constant {number}\n */\nexport const RG32F = 0x8230;\n\n/**\n * @constant {number}\n */\nexport const R8I = 0x8231;\n\n/**\n * @constant {number}\n */\nexport const R8UI = 0x8232;\n\n/**\n * @constant {number}\n */\nexport const R16I = 0x8233;\n\n/**\n * @constant {number}\n */\nexport const R16UI = 0x8234;\n\n/**\n * @constant {number}\n */\nexport const R32I = 0x8235;\n\n/**\n * @constant {number}\n */\nexport const R32UI = 0x8236;\n\n/**\n * @constant {number}\n */\nexport const RG8I = 0x8237;\n\n/**\n * @constant {number}\n */\nexport const RG8UI = 0x8238;\n\n/**\n * @constant {number}\n */\nexport const RG16I = 0x8239;\n\n/**\n * @constant {number}\n */\nexport const RG16UI = 0x823a;\n\n/**\n * @constant {number}\n */\nexport const RG32I = 0x823b;\n\n/**\n * @constant {number}\n */\nexport const RG32UI = 0x823c;\n\n/**\n * @constant {number}\n */\nexport const R8_SNORM = 0x8f94;\n\n/**\n * @constant {number}\n */\nexport const RG8_SNORM = 0x8f95;\n\n/**\n * @constant {number}\n */\nexport const RGB8_SNORM = 0x8f96;\n\n/**\n * @constant {number}\n */\nexport const RGBA8_SNORM = 0x8f97;\n\n/**\n * @constant {number}\n */\nexport const RGB10_A2UI = 0x906f;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_IMMUTABLE_FORMAT = 0x912f;\n\n/**\n * @constant {number}\n */\nexport const TEXTURE_IMMUTABLE_LEVELS = 0x82df;\n\n// Pixel types\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_2_10_10_10_REV = 0x8368;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_10F_11F_11F_REV = 0x8c3b;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_5_9_9_9_REV = 0x8c3e;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8dad;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_24_8 = 0x84fa;\n\n/**\n * @constant {number}\n */\nexport const HALF_FLOAT = 0x140b;\n\n/**\n * @constant {number}\n */\nexport const RG = 0x8227;\n\n/**\n * @constant {number}\n */\nexport const RG_INTEGER = 0x8228;\n\n/**\n * @constant {number}\n */\nexport const INT_2_10_10_10_REV = 0x8d9f;\n\n// Queries\n\n/**\n * @constant {number}\n */\nexport const CURRENT_QUERY = 0x8865;\n\n/**\n * @constant {number}\n */\nexport const QUERY_RESULT = 0x8866;\n\n/**\n * @constant {number}\n */\nexport const QUERY_RESULT_AVAILABLE = 0x8867;\n\n/**\n * @constant {number}\n */\nexport const ANY_SAMPLES_PASSED = 0x8c2f;\n\n/**\n * @constant {number}\n */\nexport const ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\n\n// Draw buffers\n\n/**\n * @constant {number}\n */\nexport const MAX_DRAW_BUFFERS = 0x8824;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER0 = 0x8825;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER1 = 0x8826;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER2 = 0x8827;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER3 = 0x8828;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER4 = 0x8829;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER5 = 0x882a;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER6 = 0x882b;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER7 = 0x882c;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER8 = 0x882d;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER9 = 0x882e;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER10 = 0x882f;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER11 = 0x8830;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER12 = 0x8831;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER13 = 0x8832;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER14 = 0x8833;\n\n/**\n * @constant {number}\n */\nexport const DRAW_BUFFER15 = 0x8834;\n\n/**\n * @constant {number}\n */\nexport const MAX_COLOR_ATTACHMENTS = 0x8cdf;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT1 = 0x8ce1;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT2 = 0x8ce2;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT3 = 0x8ce3;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT4 = 0x8ce4;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT5 = 0x8ce5;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT6 = 0x8ce6;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT7 = 0x8ce7;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT8 = 0x8ce8;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT9 = 0x8ce9;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT10 = 0x8cea;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT11 = 0x8ceb;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT12 = 0x8cec;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT13 = 0x8ced;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT14 = 0x8cee;\n\n/**\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT15 = 0x8cef;\n\n// Samplers\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_3D = 0x8b5f;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_2D_SHADOW = 0x8b62;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_2D_ARRAY = 0x8dc1;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_2D_ARRAY_SHADOW = 0x8dc4;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_CUBE_SHADOW = 0x8dc5;\n\n/**\n * @constant {number}\n */\nexport const INT_SAMPLER_2D = 0x8dca;\n\n/**\n * @constant {number}\n */\nexport const INT_SAMPLER_3D = 0x8dcb;\n\n/**\n * @constant {number}\n */\nexport const INT_SAMPLER_CUBE = 0x8dcc;\n\n/**\n * @constant {number}\n */\nexport const INT_SAMPLER_2D_ARRAY = 0x8dcf;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_SAMPLER_2D = 0x8dd2;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_SAMPLER_3D = 0x8dd3;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_SAMPLER_CUBE = 0x8dd4;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8dd7;\n\n/**\n * @constant {number}\n */\nexport const MAX_SAMPLES = 0x8d57;\n\n/**\n * @constant {number}\n */\nexport const SAMPLER_BINDING = 0x8919;\n\n// Buffers\n\n/**\n * @constant {number}\n */\nexport const PIXEL_PACK_BUFFER = 0x88eb;\n\n/**\n * @constant {number}\n */\nexport const PIXEL_UNPACK_BUFFER = 0x88ec;\n\n/**\n * @constant {number}\n */\nexport const PIXEL_PACK_BUFFER_BINDING = 0x88ed;\n\n/**\n * @constant {number}\n */\nexport const PIXEL_UNPACK_BUFFER_BINDING = 0x88ef;\n\n/**\n * @constant {number}\n */\nexport const COPY_READ_BUFFER = 0x8f36;\n\n/**\n * @constant {number}\n */\nexport const COPY_WRITE_BUFFER = 0x8f37;\n\n/**\n * @constant {number}\n */\nexport const COPY_READ_BUFFER_BINDING = 0x8f36;\n\n/**\n * @constant {number}\n */\nexport const COPY_WRITE_BUFFER_BINDING = 0x8f37;\n\n// Data types\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT2X3 = 0x8b65;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT2X4 = 0x8b66;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT3X2 = 0x8b67;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT3X4 = 0x8b68;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT4X2 = 0x8b69;\n\n/**\n * @constant {number}\n */\nexport const FLOAT_MAT4X3 = 0x8b6a;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_VEC2 = 0x8dc6;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_VEC3 = 0x8dc7;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_INT_VEC4 = 0x8dc8;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_NORMALIZED = 0x8c17;\n\n/**\n * @constant {number}\n */\nexport const SIGNED_NORMALIZED = 0x8f9c;\n\n// Vertex attributes\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_INTEGER = 0x88fd;\n\n/**\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_DIVISOR = 0x88fe;\n\n// Transform feedback\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BUFFER_MODE = 0x8c7f;\n\n/**\n * @constant {number}\n */\nexport const MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 0x8c80;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_VARYINGS = 0x8c83;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BUFFER_START = 0x8c84;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BUFFER_SIZE = 0x8c85;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\n\n/**\n * @constant {number}\n */\nexport const MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 0x8c8a;\n\n/**\n * @constant {number}\n */\nexport const MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 0x8c8b;\n\n/**\n * @constant {number}\n */\nexport const INTERLEAVED_ATTRIBS = 0x8c8c;\n\n/**\n * @constant {number}\n */\nexport const SEPARATE_ATTRIBS = 0x8c8d;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BUFFER = 0x8c8e;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BUFFER_BINDING = 0x8c8f;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK = 0x8e22;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_PAUSED = 0x8e23;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_ACTIVE = 0x8e24;\n\n/**\n * @constant {number}\n */\nexport const TRANSFORM_FEEDBACK_BINDING = 0x8e25;\n\n// Framebuffers and renderbuffers\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 0x8210;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 0x8211;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_RED_SIZE = 0x8212;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 0x8213;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 0x8214;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 0x8215;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 0x8216;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 0x8217;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_DEFAULT = 0x8218;\n\n/**\n * @constant {number}\n */\nexport const DEPTH24_STENCIL8 = 0x88f0;\n\n/**\n * @constant {number}\n */\nexport const DRAW_FRAMEBUFFER_BINDING = 0x8ca6;\n\n/**\n * @constant {number}\n */\nexport const READ_FRAMEBUFFER = 0x8ca8;\n\n/**\n * @constant {number}\n */\nexport const DRAW_FRAMEBUFFER = 0x8ca9;\n\n/**\n * @constant {number}\n */\nexport const READ_FRAMEBUFFER_BINDING = 0x8caa;\n\n/**\n * @constant {number}\n */\nexport const RENDERBUFFER_SAMPLES = 0x8cab;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 0x8cd4;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 0x8d56;\n\n// Uniforms\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BUFFER = 0x8a11;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BUFFER_BINDING = 0x8a28;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BUFFER_START = 0x8a29;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BUFFER_SIZE = 0x8a2a;\n\n/**\n * @constant {number}\n */\nexport const MAX_VERTEX_UNIFORM_BLOCKS = 0x8a2b;\n\n/**\n * @constant {number}\n */\nexport const MAX_FRAGMENT_UNIFORM_BLOCKS = 0x8a2d;\n\n/**\n * @constant {number}\n */\nexport const MAX_COMBINED_UNIFORM_BLOCKS = 0x8a2e;\n\n/**\n * @constant {number}\n */\nexport const MAX_UNIFORM_BUFFER_BINDINGS = 0x8a2f;\n\n/**\n * @constant {number}\n */\nexport const MAX_UNIFORM_BLOCK_SIZE = 0x8a30;\n\n/**\n * @constant {number}\n */\nexport const MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 0x8a31;\n\n/**\n * @constant {number}\n */\nexport const MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 0x8a33;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BUFFER_OFFSET_ALIGNMENT = 0x8a34;\n\n/**\n * @constant {number}\n */\nexport const ACTIVE_UNIFORM_BLOCKS = 0x8a36;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_TYPE = 0x8a37;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_SIZE = 0x8a38;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_INDEX = 0x8a3a;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_OFFSET = 0x8a3b;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_ARRAY_STRIDE = 0x8a3c;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_MATRIX_STRIDE = 0x8a3d;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_IS_ROW_MAJOR = 0x8a3e;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_BINDING = 0x8a3f;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_DATA_SIZE = 0x8a40;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_ACTIVE_UNIFORMS = 0x8a42;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 0x8a43;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 0x8a44;\n\n/**\n * @constant {number}\n */\nexport const UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46;\n\n// Sync objects\n\n/**\n * @constant {number}\n */\nexport const OBJECT_TYPE = 0x9112;\n\n/**\n * @constant {number}\n */\nexport const SYNC_CONDITION = 0x9113;\n\n/**\n * @constant {number}\n */\nexport const SYNC_STATUS = 0x9114;\n\n/**\n * @constant {number}\n */\nexport const SYNC_FLAGS = 0x9115;\n\n/**\n * @constant {number}\n */\nexport const SYNC_FENCE = 0x9116;\n\n/**\n * @constant {number}\n */\nexport const SYNC_GPU_COMMANDS_COMPLETE = 0x9117;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNALED = 0x9118;\n\n/**\n * @constant {number}\n */\nexport const SIGNALED = 0x9119;\n\n/**\n * @constant {number}\n */\nexport const ALREADY_SIGNALED = 0x911a;\n\n/**\n * @constant {number}\n */\nexport const TIMEOUT_EXPIRED = 0x911b;\n\n/**\n * @constant {number}\n */\nexport const CONDITION_SATISFIED = 0x911c;\n\n/**\n * @constant {number}\n */\nexport const WAIT_FAILED = 0x911d;\n\n/**\n * @constant {number}\n */\nexport const SYNC_FLUSH_COMMANDS_BIT = 0x00000001;\n\n// Miscellaneous constants\n\n/**\n * @constant {number}\n */\nexport const COLOR = 0x1800;\n\n/**\n * @constant {number}\n */\nexport const DEPTH = 0x1801;\n\n/**\n * @constant {number}\n */\nexport const STENCIL = 0x1802;\n\n/**\n * @constant {number}\n */\nexport const MIN = 0x8007;\n\n/**\n * @constant {number}\n */\nexport const MAX = 0x8008;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_COMPONENT24 = 0x81a6;\n\n/**\n * @constant {number}\n */\nexport const STREAM_READ = 0x88e1;\n\n/**\n * @constant {number}\n */\nexport const STREAM_COPY = 0x88e2;\n\n/**\n * @constant {number}\n */\nexport const STATIC_READ = 0x88e5;\n\n/**\n * @constant {number}\n */\nexport const STATIC_COPY = 0x88e6;\n\n/**\n * @constant {number}\n */\nexport const DYNAMIC_READ = 0x88e9;\n\n/**\n * @constant {number}\n */\nexport const DYNAMIC_COPY = 0x88ea;\n\n/**\n * @constant {number}\n */\nexport const DEPTH_COMPONENT32F = 0x8cac;\n\n/**\n * @constant {number}\n */\nexport const DEPTH32F_STENCIL8 = 0x8cad;\n\n/**\n * @constant {number}\n */\nexport const INVALID_INDEX = 0xffffffff;\n\n/**\n * @constant {number}\n */\nexport const TIMEOUT_IGNORED = -1;\n\n/**\n * @constant {number}\n */\nexport const MAX_CLIENT_WAIT_TIMEOUT_WEBGL = 0x9247;\n\n// Constants defined in WebGL extensions\n\n// ANGLE_instanced_arrays\n// The ANGLE_instanced_arrays extension is part of the WebGL API and allows to draw the same object, or groups of similar objects multiple times, if they share the same vertex data, primitive count and type\n/**\n * Describes the frequency divisor used for instanced rendering\n * @constant {number}\n */\nexport const VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE = 0x88fe;\n\n// WEBGL_debug_renderer_info\n// The WEBGL_debug_renderer_info extension is part of the WebGL API and exposes two constants with information about the graphics driver for debugging purposes\n/**\n * Passed to getParameter to get the vendor string of the graphics driver\n * @constant {number}\n */\nexport const UNMASKED_VENDOR_WEBGL = 0x9245;\n\n/**\n * Passed to getParameter to get the renderer string of the graphics driver\n * @constant {number}\n */\nexport const UNMASKED_RENDERER_WEBGL = 0x9246;\n\n// EXT_texture_filter_anisotropic\n// The EXT_texture_filter_anisotropic extension is part of the WebGL API and exposes two constants for anisotropic filtering (AF)\n/**\n * Returns the maximum available anisotropy\n * @constant {number}\n */\nexport const MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\n\n/**\n * Passed to texParameter to set the desired maximum anisotropy for a texture\n * @constant {number}\n */\nexport const TEXTURE_MAX_ANISOTROPY_EXT = 0x84fe;\n\n// WEBGL_compressed_texture_s3tc\n// The WEBGL_compressed_texture_s3tc extension is part of the WebGL API and exposes four S3TC compressed texture formats\n/**\n * A DXT1-compressed image in an RGB image format\n * @constant {number}\n */\nexport const COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83f0;\n\n/**\n * A DXT1-compressed image in an RGB image format with a simple on/off alpha value\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83f1;\n\n/**\n * A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83f2;\n\n/**\n * A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83f3;\n\n// WEBGL_compressed_texture_s3tc_srgb\n// The WEBGL_compressed_texture_s3tc_srgb extension is part of the WebGL API and exposes four S3TC compressed texture formats for the sRGB colorspace\n/**\n * A DXT1-compressed image in an sRGB image format\n * @constant {number}\n */\nexport const COMPRESSED_SRGB_S3TC_DXT1_EXT = 0x8c4c;\n\n/**\n * A DXT1-compressed image in an sRGB image format with a simple on/off alpha value\n * @constant {number}\n */\nexport const COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 0x8c4d;\n\n/**\n * A DXT3-compressed image in an sRGBA image format\n * @constant {number}\n */\nexport const COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 0x8c4e;\n\n/**\n * A DXT5-compressed image in an sRGBA image format\n * @constant {number}\n */\nexport const COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 0x8c4f;\n\n// WEBGL_compressed_texture_etc\n// The WEBGL_compressed_texture_etc extension is part of the WebGL API and exposes 10 ETC/EAC compressed texture formats\n/**\n * One-channel (red) unsigned format compression\n * @constant {number}\n */\nexport const COMPRESSED_R11_EAC = 0x9270;\n\n/**\n * One-channel (red) signed format compression\n * @constant {number}\n */\nexport const COMPRESSED_SIGNED_R11_EAC = 0x9271;\n\n/**\n * Two-channel (red and green) unsigned format compression\n * @constant {number}\n */\nexport const COMPRESSED_RG11_EAC = 0x9272;\n\n/**\n * Two-channel (red and green) signed format compression\n * @constant {number}\n */\nexport const COMPRESSED_SIGNED_RG11_EAC = 0x9273;\n\n/**\n * Compresses RBG8 data with no alpha channel\n * @constant {number}\n */\nexport const COMPRESSED_RGB8_ETC2 = 0x9274;\n\n/**\n * Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately\n * @constant {number}\n */\nexport const COMPRESSED_RGBA8_ETC2_EAC = 0x9275;\n\n/**\n * Compresses sRBG8 data with no alpha channel\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ETC2 = 0x9276;\n\n/**\n * Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9277;\n\n/**\n * Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent\n * @constant {number}\n */\nexport const COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9278;\n\n/**\n * Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9279;\n\n// WEBGL_compressed_texture_pvrtc\n// The WEBGL_compressed_texture_pvrtc extension is part of the WebGL API and exposes four PVRTC compressed texture formats\n/**\n * RGB compression in 4-bit mode. One block for each 44 pixels\n * @constant {number}\n */\nexport const COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8c00;\n\n/**\n * RGBA compression in 4-bit mode. One block for each 44 pixels\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8c02;\n\n/**\n * RGB compression in 2-bit mode. One block for each 84 pixels\n * @constant {number}\n */\nexport const COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8c01;\n\n/**\n * RGBA compression in 2-bit mode. One block for each 84 pixels\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8c03;\n\n// WEBGL_compressed_texture_etc1\n// The WEBGL_compressed_texture_etc1 extension is part of the WebGL API and exposes the ETC1 compressed texture format\n/**\n * Compresses 24-bit RGB data with no alpha channel\n * @constant {number}\n */\nexport const COMPRESSED_RGB_ETC1_WEBGL = 0x8d64;\n\n// WEBGL_compressed_texture_atc\n// The WEBGL_compressed_texture_atc extension is part of the WebGL API and exposes 3 ATC compressed texture formats. ATC is a proprietary compression algorithm for compressing textures on handheld devices\n/**\n * Compresses RGB textures with no alpha channel\n * @constant {number}\n */\nexport const COMPRESSED_RGB_ATC_WEBGL = 0x8c92;\n\n/**\n * Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp)\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8c92;\n\n/**\n * Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient)\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87ee;\n\n// WEBGL_compressed_texture_astc\n// The WEBGL_compressed_texture_astc extension is part of the WebGL API and exposes Adaptive Scalable Texture Compression (ASTC) compressed texture formats to WebGL\n// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/\n// https://developer.nvidia.com/astc-texture-compression-for-game-assets\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 4x4\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_4X4_KHR = 0x93b0;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 5x4\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_5X4_KHR = 0x93b1;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 5x5\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_5X5_KHR = 0x93b2;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 6x5\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_6X5_KHR = 0x93b3;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 6x6\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_6X6_KHR = 0x93b4;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 8x5\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_8X5_KHR = 0x93b5;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 8x6\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_8X6_KHR = 0x93b6;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 8x8\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_8X8_KHR = 0x93b7;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 10x5\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_10X5_KHR = 0x93b8;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 10x6\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_10X6_KHR = 0x93b9;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 10x8\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_10X8_KHR = 0x93ba;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 10x10\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_10X10_KHR = 0x93bb;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 12x10\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_12X10_KHR = 0x93bc;\n\n/**\n * Compresses RGBA textures using ASTC compression in a blocksize of 12x12\n * @constant {number}\n */\nexport const COMPRESSED_RGBA_ASTC_12X12_KHR = 0x93bd;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 4x4\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR = 0x93d0;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 5x4\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR = 0x93d1;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 5x5\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR = 0x93d2;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 6x5\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR = 0x93d3;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 6x6\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR = 0x93d4;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x5\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR = 0x93d5;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x6\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR = 0x93d6;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x8\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR = 0x93d7;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x5\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR = 0x93d8;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x6\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR = 0x93d9;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x8\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR = 0x93da;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x10\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR = 0x93db;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 12x10\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR = 0x93dc;\n\n/**\n * Compresses SRGB8 textures using ASTC compression in a blocksize of 12x12\n * @constant {number}\n */\nexport const COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR = 0x93dd;\n\n// WEBGL_depth_texture\n// The WEBGL_depth_texture extension is part of the WebGL API and defines 2D depth and depth-stencil textures\n/**\n * Unsigned integer type for 24-bit depth texture data\n * @constant {number}\n */\nexport const UNSIGNED_INT_24_8_WEBGL = 0x84fa;\n\n// OES_texture_half_float\n// The OES_texture_half_float extension is part of the WebGL API and adds texture formats with 16- (aka half float) and 32-bit floating-point components\n/**\n * Half floating-point type (16-bit)\n * @constant {number}\n */\nexport const HALF_FLOAT_OES = 0x8d61;\n\n// WEBGL_color_buffer_float\n// The WEBGL_color_buffer_float extension is part of the WebGL API and adds the ability to render to 32-bit floating-point color buffers\n/**\n * RGBA 32-bit floating-point color-renderable format\n * @constant {number}\n */\nexport const RGBA32F_EXT = 0x8814;\n\n/**\n * RGB 32-bit floating-point color-renderable format\n * @constant {number}\n */\nexport const RGB32F_EXT = 0x8815;\n\n/**\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT = 0x8211;\n\n/**\n * @constant {number}\n */\nexport const UNSIGNED_NORMALIZED_EXT = 0x8c17;\n\n// EXT_blend_minmax\n// The EXT_blend_minmax extension is part of the WebGL API and extends blending capabilities by adding two new blend equations: the minimum or maximum color components of the source and destination colors\n/**\n * Produces the minimum color components of the source and destination colors\n * @constant {number}\n */\nexport const MIN_EXT = 0x8007;\n\n/**\n * Produces the maximum color components of the source and destination colors\n * @constant {number}\n */\nexport const MAX_EXT = 0x8008;\n\n// EXT_sRGB\n// The EXT_sRGB extension is part of the WebGL API and adds sRGB support to textures and framebuffer objects\n/**\n * Unsized sRGB format that leaves the precision up to the driver\n * @constant {number}\n */\nexport const SRGB_EXT = 0x8c40;\n\n/**\n * Unsized sRGB format with unsized alpha component\n * @constant {number}\n */\nexport const SRGB_ALPHA_EXT = 0x8c42;\n\n/**\n * Sized (8-bit) sRGB and alpha formats\n * @constant {number}\n */\nexport const SRGB8_ALPHA8_EXT = 0x8c43;\n\n/**\n * Returns the framebuffer color encoding\n * @constant {number}\n */\nexport const FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT = 0x8210;\n\n// OES_standard_derivatives\n// The OES_standard_derivatives extension is part of the WebGL API and adds the GLSL derivative functions dFdx, dFdy, and fwidth\n/**\n * Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth\n * @constant {number}\n */\nexport const FRAGMENT_SHADER_DERIVATIVE_HINT_OES = 0x8b8b;\n\n// WEBGL_draw_buffers\n// The WEBGL_draw_buffers extension is part of the WebGL API and enables a fragment shader to write to several textures, which is useful for deferred shading, for example\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT0_WEBGL = 0x8ce0;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT1_WEBGL = 0x8ce1;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT2_WEBGL = 0x8ce2;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT3_WEBGL = 0x8ce3;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT4_WEBGL = 0x8ce4;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT5_WEBGL = 0x8ce5;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT6_WEBGL = 0x8ce6;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT7_WEBGL = 0x8ce7;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT8_WEBGL = 0x8ce8;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT9_WEBGL = 0x8ce9;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT10_WEBGL = 0x8cea;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT11_WEBGL = 0x8ceb;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT12_WEBGL = 0x8cec;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT13_WEBGL = 0x8ced;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT14_WEBGL = 0x8cee;\n\n/**\n * Framebuffer color attachment point\n * @constant {number}\n */\nexport const COLOR_ATTACHMENT15_WEBGL = 0x8cef;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER0_WEBGL = 0x8825;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER1_WEBGL = 0x8826;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER2_WEBGL = 0x8827;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER3_WEBGL = 0x8828;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER4_WEBGL = 0x8829;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER5_WEBGL = 0x882a;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER6_WEBGL = 0x882b;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER7_WEBGL = 0x882c;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER8_WEBGL = 0x882d;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER9_WEBGL = 0x882e;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER10_WEBGL = 0x882f;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER11_WEBGL = 0x8830;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER12_WEBGL = 0x8831;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER13_WEBGL = 0x8832;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER14_WEBGL = 0x8833;\n\n/**\n * Draw buffer\n * @constant {number}\n */\nexport const DRAW_BUFFER15_WEBGL = 0x8834;\n\n/**\n * Maximum number of framebuffer color attachment points\n * @constant {number}\n */\nexport const MAX_COLOR_ATTACHMENTS_WEBGL = 0x8cdf;\n\n/**\n * Maximum number of draw buffers\n * @constant {number}\n */\nexport const MAX_DRAW_BUFFERS_WEBGL = 0x8824;\n\n// OES_vertex_array_object\n// The OES_vertex_array_object extension is part of the WebGL API and provides vertex array objects (VAOs) which encapsulate vertex array states. These objects keep pointers to vertex data and provide names for different sets of vertex data\n/**\n * The bound vertex array object (VAO)\n * @constant {number}\n */\nexport const VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\n// EXT_disjoint_timer_query\n// The EXT_disjoint_timer_query extension is part of the WebGL API and provides a way to measure the duration of a set of GL commands, without stalling the rendering pipeline\n/**\n * The number of bits used to hold the query result for the given target\n * @constant {number}\n */\nexport const QUERY_COUNTER_BITS_EXT = 0x8864;\n\n/**\n * The currently active query\n * @constant {number}\n */\nexport const CURRENT_QUERY_EXT = 0x8865;\n\n/**\n * The query result\n * @constant {number}\n */\nexport const QUERY_RESULT_EXT = 0x8866;\n\n/**\n * A Boolean indicating whether or not a query result is available\n * @constant {number}\n */\nexport const QUERY_RESULT_AVAILABLE_EXT = 0x8867;\n\n/**\n * Elapsed time (in nanoseconds)\n * @constant {number}\n */\nexport const TIME_ELAPSED_EXT = 0x88bf;\n\n/**\n * The current time\n * @constant {number}\n */\nexport const TIMESTAMP_EXT = 0x8e28;\n\n/**\n * A Boolean indicating whether or not the GPU performed any disjoint operation\n * @constant {number}\n */\nexport const GPU_DISJOINT_EXT = 0x8fbb;\n\n// Constants defined in WebGL draft extensions\n\n// KHR_parallel_shader_compile\n// The KHR_parallel_shader_compile extension is part of the WebGL draft API and provides multithreaded asynchronous shader compilation\n/**\n * Query to determine if the compilation process is complete\n * @constant {number}\n */\nexport const COMPLETION_STATUS_KHR = 0x91b1;\n","import { WIDTH, HEIGHT } from \"./constants\";\nimport * as constants from \"./constants\";\nimport * as GL from \"./webgl-constants\";\nimport type { Framebuffer } from \"./framebuffer\";\n\nconst PALETTE_SIZE = 4;\n\nexport class WebGLCompositor {\n    table: Uint32Array;\n    colorBuffer: Uint32Array;\n    paletteBuffer: Float32Array;\n    lastPalette: number[];\n    paletteLocation: WebGLUniformLocation | null;\n\n    constructor (public gl: WebGLRenderingContext) {\n        this.colorBuffer = new Uint32Array(WIDTH * HEIGHT >> 2);\n        this.paletteBuffer = new Float32Array(3 * PALETTE_SIZE);\n        this.lastPalette = Array(PALETTE_SIZE);\n        this.paletteLocation = null;\n\n        // Create a lookup table for each byte mapping to 4 bytes:\n        // 0bxxyyzzww --> 0bxx000000_yy000000_zz000000_ww000000\n        const table = new Uint32Array(256);\n        for (let ii = 0; ii < 256; ++ii) {\n            const xx = (ii >> 6) & 3;\n            const yy = (ii >> 4) & 3;\n            const zz = (ii >> 2) & 3;\n            const ww = ii & 3;\n            table[ii] = (xx << 30) | (yy << 22) | (zz << 14) | (ww << 6);\n        }\n        this.table = table;\n\n        const canvas = gl.canvas;\n        canvas.addEventListener(\"webglcontextlost\", event => {\n            event.preventDefault();\n        });\n        canvas.addEventListener(\"webglcontextrestored\", () => { this.initGL() });\n\n        this.initGL();\n\n        // // Test WebGL context loss\n        // window.addEventListener(\"mousedown\", () => {\n        //     console.log(\"Losing context\");\n        //     const ext = gl.getExtension('WEBGL_lose_context');\n        //     ext.loseContext();\n        //     setTimeout(() => {\n        //         ext.restoreContext();\n        //     }, 0);\n        // })\n    }\n\n    initGL () {\n        const gl = this.gl;\n\n        this.lastPalette = Array(PALETTE_SIZE);\n\n        function createShader (type: number, source: string) {\n            const shader = gl.createShader(type)!;\n\n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, GL.COMPILE_STATUS)) {\n                throw new Error(gl.getShaderInfoLog(shader) + '');\n            }\n            return shader;\n        }\n\n        function createTexture (slot: number) {\n            const texture = gl.createTexture();\n            gl.activeTexture(slot);\n            gl.bindTexture(GL.TEXTURE_2D, texture);\n            gl.texParameteri(GL.TEXTURE_2D, GL.TEXTURE_WRAP_S, GL.CLAMP_TO_EDGE);\n            gl.texParameteri(GL.TEXTURE_2D, GL.TEXTURE_WRAP_T, GL.CLAMP_TO_EDGE);\n            gl.texParameteri(GL.TEXTURE_2D, GL.TEXTURE_MAG_FILTER, GL.NEAREST);\n            gl.texParameteri(GL.TEXTURE_2D, GL.TEXTURE_MIN_FILTER, GL.NEAREST);\n        }\n\n        const vertexShader = createShader(GL.VERTEX_SHADER, `\n            attribute vec2 pos;\n            varying vec2 framebufferCoord;\n\n            void main () {\n                framebufferCoord = pos*vec2(0.5, -0.5) + 0.5;\n                gl_Position = vec4(pos, 0, 1);\n            }\n        `);\n\n        const lookupBlock = Array.from({length: PALETTE_SIZE - 1},\n                (_, i) => {\n                    return `p = mix(p, palette[${i + 1}],  step(${((i + 1) / PALETTE_SIZE).toFixed(2)}, index));`\n                }).join('\\n');\n\n        const fragmentShader = createShader(GL.FRAGMENT_SHADER, `\n            precision mediump float;\n            uniform vec3 palette[${PALETTE_SIZE}];\n            uniform sampler2D framebuffer;\n            varying vec2 framebufferCoord;\n\n            vec3 lookup(float index) {\n                vec3 p = palette[0];\n                ${lookupBlock}\n                return p;\n            }\n\n            void main () {\n                gl_FragColor = vec4(lookup(texture2D(framebuffer, framebufferCoord).r), 1.);\n            }\n        `);\n\n        // Setup shaders\n        const program = gl.createProgram()!;\n\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        if (!gl.getProgramParameter(program, GL.LINK_STATUS)) {\n            throw new Error(gl.getProgramInfoLog(program) + '');\n        }\n        gl.useProgram(program);\n\n        // Setup uniforms\n        this.paletteLocation = gl.getUniformLocation(program, \"palette\");\n        gl.uniform1i(gl.getUniformLocation(program, \"framebuffer\"), 0);\n\n        // Cleanup shaders\n        gl.detachShader(program, vertexShader);\n        gl.deleteShader(vertexShader);\n        gl.detachShader(program, fragmentShader);\n        gl.deleteShader(fragmentShader);\n\n        // Create framebuffer texture\n        createTexture(GL.TEXTURE0);\n        gl.texImage2D(GL.TEXTURE_2D, 0, GL.LUMINANCE, WIDTH, HEIGHT, 0, GL.LUMINANCE, GL.UNSIGNED_BYTE, null);\n\n        // Setup static geometry\n        const positionAttrib = gl.getAttribLocation(program, \"pos\");\n        const positionBuffer = gl.createBuffer();\n        const positionData = new Float32Array([\n            -1, -1, -1, +1, +1, +1,\n            +1, +1, +1, -1, -1, -1,\n        ]);\n        gl.bindBuffer(GL.ARRAY_BUFFER, positionBuffer);\n        gl.bufferData(GL.ARRAY_BUFFER, positionData, GL.STATIC_DRAW);\n        gl.enableVertexAttribArray(positionAttrib);\n        gl.vertexAttribPointer(positionAttrib, 2, GL.FLOAT, false, 0, 0);\n    }\n\n    composite (palette: Uint32Array, framebuffer: Framebuffer) {\n        const gl = this.gl;\n        const\n            bytes = framebuffer.bytes,\n            colorBuffer = this.colorBuffer,\n            table = this.table,\n            lastPalette = this.lastPalette,\n            rgb = this.paletteBuffer;\n\n        // Upload palette when needed\n        let syncPalette = false;\n\n        for (let ii = 0, n = 0; ii < PALETTE_SIZE; ++ii) {\n            const argb = palette[ii];\n\n            syncPalette = syncPalette || lastPalette[ii] !== argb;\n\n            rgb[n++] = ((argb >> 16) & 0xff) / 0xff;\n            rgb[n++] = ((argb >> 8) & 0xff) / 0xff;\n            rgb[n++] = (argb & 0xff) / 0xff;\n\n            lastPalette[ii] = argb;\n        }\n\n        if (syncPalette) {\n            gl.uniform3fv(this.paletteLocation, this.paletteBuffer);\n        }\n\n        // Unpack the framebuffer into one byte per pixel\n        for (let ii = 0; ii < WIDTH*HEIGHT >> 2; ++ii) {\n            colorBuffer[ii] = table[bytes[ii]];\n        }\n\n        // Upload framebuffer\n        gl.texImage2D(GL.TEXTURE_2D, 0, GL.LUMINANCE, WIDTH, HEIGHT, 0, GL.LUMINANCE, GL.UNSIGNED_BYTE, new Uint8Array(colorBuffer.buffer));\n\n        // Draw the fullscreen quad\n        gl.drawArrays(GL.TRIANGLES, 0, 6);\n    }\n}\n","import * as constants from \"./constants\";\nimport * as z85 from \"./z85\";\nimport { APU } from \"./apu\";\nimport { Framebuffer } from \"./framebuffer\";\nimport { WebGLCompositor } from \"./compositor\";\nimport * as devkit from \"./devkit\";\n\nexport class Runtime {\n    canvas: HTMLCanvasElement;\n    memory: WebAssembly.Memory;\n    apu: APU;\n    compositor: WebGLCompositor;\n    data: DataView;\n    framebuffer: Framebuffer;\n    pauseState: number;\n    wasmBuffer: Uint8Array | null = null;\n    wasmBufferByteLen: number;\n    wasm: WebAssembly.Instance | null = null;\n    warnedFileSize = false;\n\n    diskName: string;\n    diskBuffer: ArrayBuffer;\n    diskSize: number;\n\n    constructor (diskName: string) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = constants.WIDTH;\n        canvas.height = constants.HEIGHT;\n        this.canvas = canvas;\n\n        const gl = canvas.getContext(\"webgl\", {\n            alpha: false,\n            depth: false,\n            antialias: false,\n        });\n\n        if(!gl) {\n            throw new Error('web-runtime: could not create wegl context')  // TODO(2021-08-01): Fallback to Canvas2DCompositor\n        }\n\n        this.compositor = new WebGLCompositor(gl);\n        \n        this.apu = new APU();\n\n        this.diskName = diskName;\n        this.diskBuffer = new ArrayBuffer(constants.STORAGE_SIZE);\n\n        // Try to load from localStorage\n        let str;\n        try {\n            str = localStorage.getItem(diskName);\n        } catch (error) {\n            console.error(\"Error reading disk\", error);\n        }\n        this.diskSize = (str != null)\n            ? z85.decode(str, new Uint8Array(this.diskBuffer))\n            : 0;\n\n        this.memory = new WebAssembly.Memory({initial: 1, maximum: 1});\n        this.data = new DataView(this.memory.buffer);\n\n        this.framebuffer = new Framebuffer(this.memory.buffer);\n\n        this.reset();\n\n        this.pauseState = 0;\n        this.wasmBufferByteLen = 0;\n    }\n\n    async init () {\n        await this.apu.init();\n    }\n\n    setMouse (x: number, y: number, buttons: number) {\n        this.data.setInt16(constants.ADDR_MOUSE_X, x, true);\n        this.data.setInt16(constants.ADDR_MOUSE_Y, y, true);\n        this.data.setUint8(constants.ADDR_MOUSE_BUTTONS, buttons);\n    }\n\n    setGamepad (idx: number, buttons: number) {\n        this.data.setUint8(constants.ADDR_GAMEPAD1 + idx, buttons);\n    }\n\n    setNetplay (localPlayerIdx: number) {\n        this.data.setUint8(constants.ADDR_NETPLAY, 0b100 | (localPlayerIdx & 0b11));\n    }\n\n    getSystemFlag (mask: number) {\n        return this.data.getUint8(constants.ADDR_SYSTEM_FLAGS) & mask;\n    }\n\n    unlockAudio () {\n        this.apu.unlockAudio();\n    }\n\n    pauseAudio() {\n        this.apu.pauseAudio();\n    }\n\n    reset (zeroMemory?: boolean) {\n        // Initialize default color table and palette\n        const mem32 = new Uint32Array(this.memory.buffer);\n        if (zeroMemory) {\n            mem32.fill(0);\n        }\n        this.pauseState &= ~constants.PAUSE_CRASHED;\n        mem32.set(constants.COLORS, constants.ADDR_PALETTE >> 2);\n        this.data.setUint16(constants.ADDR_DRAW_COLORS, 0x1203, true);\n\n        // Initialize the mouse off screen\n        this.data.setInt16(constants.ADDR_MOUSE_X, 0x7fff, true);\n        this.data.setInt16(constants.ADDR_MOUSE_Y, 0x7fff, true);\n    }\n\n    async load (wasmBuffer: Uint8Array, enforceSizeLimit = true) {\n        const limit = 1 << 16;\n        this.wasmBuffer = wasmBuffer;\n        this.wasmBufferByteLen = wasmBuffer.byteLength;\n        this.wasm = null;\n\n        if (wasmBuffer.byteLength > limit) {\n            if (constants.GAMEDEV_MODE) {\n                if (!this.warnedFileSize) {\n                    this.warnedFileSize = true;\n                    this.print(`Warning: Cart is larger than ${limit} bytes. Ensure the release build of your cart is small enough to be bundled.`);\n                }\n            } else if (enforceSizeLimit) {\n                throw new Error(\"Cart too big!\");\n            }\n        }\n\n        const env = {\n            memory: this.memory,\n\n            rect: this.framebuffer.drawRect.bind(this.framebuffer),\n            oval: this.framebuffer.drawOval.bind(this.framebuffer),\n            line: this.framebuffer.drawLine.bind(this.framebuffer),\n\n            hline: this.framebuffer.drawHLine.bind(this.framebuffer),\n            vline: this.framebuffer.drawVLine.bind(this.framebuffer),\n\n            text: this.text.bind(this),\n            textUtf8: this.textUtf8.bind(this),\n            textUtf16: this.textUtf16.bind(this),\n\n            blit: this.blit.bind(this),\n            blitSub: this.blitSub.bind(this),\n\n            tone: this.apu.tone.bind(this.apu),\n\n            diskr: this.diskr.bind(this),\n            diskw: this.diskw.bind(this),\n\n            trace: this.trace.bind(this),\n            traceUtf8: this.traceUtf8.bind(this),\n            traceUtf16: this.traceUtf16.bind(this),\n            tracef: this.tracef.bind(this),\n        };\n\n        await this.bluescreenOnError(async () => {\n            const module = await WebAssembly.instantiate(wasmBuffer, { env });\n            this.wasm = module.instance;\n\n            // Call the WASI _start/_initialize function (different from WASM-4's start callback!)\n            if (typeof this.wasm.exports[\"_start\"] === 'function') {\n                this.wasm.exports._start();\n            }\n            if (typeof this.wasm.exports[\"_initialize\"] === 'function') {\n                this.wasm.exports._initialize();\n            }\n        });\n    }\n\n    async bluescreenOnError (fn: Function) {\n        try {\n            await fn();\n        } catch (err) {\n            if (err instanceof Error) {\n                const errorExplanation = errorToBlueScreenText(err);\n                this.blueScreen(errorExplanation);\n                this.printToServer(err.stack ?? '');\n            }\n\n            throw err;\n        }\n    }\n\n    text (textPtr: number, x: number, y: number) {\n        const text = new Uint8Array(this.memory.buffer, textPtr);\n        this.framebuffer.drawText(text, x, y);\n    }\n\n    textUtf8 (textPtr: number, byteLength: number, x: number, y: number) {\n        const text = new Uint8Array(this.memory.buffer, textPtr, byteLength);\n        this.framebuffer.drawText(text, x, y);\n    }\n\n    textUtf16 (textPtr: number, byteLength: number, x: number, y: number) {\n        const text = new Uint16Array(this.memory.buffer, textPtr, byteLength >> 1);\n        this.framebuffer.drawText(text, x, y);\n    }\n\n    blit (spritePtr: number, x: number, y: number, width: number, height: number, flags: number) {\n        this.blitSub(spritePtr, x, y, width, height, 0, 0, width, flags);\n    }\n\n    blitSub (spritePtr: number, x: number, y: number, width: number, height: number, srcX: number, srcY: number, stride: number, flags: number) {\n        const sprite = new Uint8Array(this.memory.buffer, spritePtr);\n        const bpp2 = (flags & 1);\n        const flipX = (flags & 2);\n        const flipY = (flags & 4);\n        const rotate = (flags & 8);\n\n        this.framebuffer.blit(sprite, x, y, width, height, srcX, srcY, stride, bpp2, flipX, flipY, rotate);\n    }\n\n    diskr (destPtr: number, size: number): number {\n        const bytesRead = Math.min(size, this.diskSize);\n        const src = new Uint8Array(this.diskBuffer, 0, bytesRead);\n        const dest = new Uint8Array(this.memory.buffer, destPtr);\n\n        dest.set(src);\n        return bytesRead;\n    }\n\n    diskw (srcPtr: number, size: number): number {\n        const bytesWritten = Math.min(size, constants.STORAGE_SIZE);\n        const src = new Uint8Array(this.memory.buffer, srcPtr, bytesWritten);\n        const dest = new Uint8Array(this.diskBuffer);\n\n        // Try to save to localStorage\n        const str = z85.encode(src);\n        try {\n            localStorage.setItem(this.diskName, str);\n        } catch (error) {\n            // TODO(2022-02-13): Show a warning to the user that storage is not persisted\n            console.error(\"Error writing disk\", error);\n        }\n\n        dest.set(src);\n        this.diskSize = bytesWritten;\n        return bytesWritten;\n    }\n\n    getCString (ptr: number) {\n        let str = \"\";\n        for (;;) {\n            const c = this.data.getUint8(ptr++);\n            if (c == 0) {\n                break;\n            }\n            str += String.fromCharCode(c);\n        }\n        return str;\n    }\n\n    print (str: string ) {\n        console.log(str);\n        this.printToServer(str);\n    }\n\n    printToServer (str: string) {\n        if (devkit.websocket != null && devkit.websocket.readyState == 1) {\n            devkit.websocket.send(str);\n        }\n    }\n\n    trace (cstrPtr: number) {\n        this.print(this.getCString(cstrPtr));\n    }\n\n    traceUtf8 (strUtf8Ptr: number, byteLength: number) {\n        const strUtf8 = new Uint8Array(this.memory.buffer, strUtf8Ptr, byteLength);\n        const str = new TextDecoder().decode(strUtf8);\n        this.print(str);\n    }\n\n    traceUtf16 (strUtf16Ptr: number, byteLength: number) {\n        const strUtf16 = new Uint8Array(this.memory.buffer, strUtf16Ptr, byteLength);\n        const str = new TextDecoder(\"utf-16\").decode(strUtf16);\n        this.print(str);\n    }\n\n    tracef (fmtPtr: number, argPtr: number) {\n        let output = \"\";\n        let ch;\n        while ((ch = this.data.getUint8(fmtPtr++))) {\n            if (ch == 37) {\n                switch (ch = this.data.getUint8(fmtPtr++)) {\n                case 37: // %\n                    output += \"%\";\n                    break;\n                case 99: // c\n                    output += String.fromCharCode(this.data.getInt32(argPtr, true));\n                    argPtr += 4;\n                    break;\n                case 100: // d\n                case 120: // x\n                    output += this.data.getInt32(argPtr, true).toString(ch == 100 ? 10 : 16);\n                    argPtr += 4;\n                    break;\n                case 115: // s\n                    output += this.getCString(this.data.getUint32(argPtr, true));\n                    argPtr += 4;\n                    break;\n                case 102: // f\n                    output += this.data.getFloat64(argPtr, true);\n                    argPtr += 8;\n                    break;\n                default: // unknown\n                    output += \"%\" + String.fromCharCode(ch);\n                    break;\n                }\n            } else {\n                output += String.fromCharCode(ch);\n            }\n        }\n        this.print(output);\n    }\n\n    start () {\n        let start_function = this.wasm!.exports[\"start\"];\n        if (typeof start_function === \"function\") {\n            this.bluescreenOnError(start_function);\n        }\n    }\n\n    update () {\n        if (this.pauseState != 0) {\n            return;\n        }\n\n        if (!this.getSystemFlag(constants.SYSTEM_PRESERVE_FRAMEBUFFER)) {\n            this.framebuffer.clear();\n        }\n\n        let update_function = this.wasm!.exports[\"update\"];\n        if (typeof update_function === \"function\") {\n            this.bluescreenOnError(update_function);\n        }\n        this.apu.tick();\n    }\n\n    blueScreen (text: string) {\n        this.pauseState |= constants.PAUSE_CRASHED;\n\n        const COLORS = [\n            0x1111ee, // blue\n            0x86c06c,\n            0xaaaaaa, // grey\n            0xffffff, // white\n        ];\n\n        const toCharArr = (s: string) => [...s].map(x => x.charCodeAt(0));\n\n        const title = ` ${constants.CRASH_TITLE} `;\n        const headerTitle = title;\n        const headerWidth = (8 * title.length);\n        const headerX = (160 - (8 * title.length)) / 2;\n        const headerY = 20;\n        const messageX = 9;\n        const messageY = 60;\n\n        const mem32 = new Uint32Array(this.memory.buffer);\n        mem32.set(COLORS, constants.ADDR_PALETTE >> 2);\n        this.data.setUint16(constants.ADDR_DRAW_COLORS, 0x1203, true);\n        this.framebuffer.clear();\n        this.framebuffer.drawHLine(headerX, headerY-1, headerWidth);\n        this.data.setUint16(constants.ADDR_DRAW_COLORS, 0x1131, true);\n        this.framebuffer.drawText(toCharArr(headerTitle), headerX, headerY);\n        this.data.setUint16(constants.ADDR_DRAW_COLORS, 0x1203, true);\n        this.framebuffer.drawText(toCharArr(text), messageX, messageY);\n        this.composite();\n    }\n\n    composite () {\n        const palette = new Uint32Array(this.memory.buffer, constants.ADDR_PALETTE, 4);\n\n        this.compositor.composite(palette, this.framebuffer);\n    }\n}\n\nfunction errorToBlueScreenText(err: Error) {\n    // hand written messages for specific errors\n    if (err instanceof WebAssembly.RuntimeError) {\n        let message;\n        if (err.message.match(/unreachable/)) {\n            message = \"The cartridge has\\nreached a code \\nsegment marked as\\nunreachable.\";\n        } else if (err.message.match(/out of bounds/)) {\n            message = \"The cartridge has\\nattempted a memory\\naccess that is\\nout of bounds.\";\n        }\n        return message + \"\\n\\n\\n\\n\\nHit R to reboot.\";\n    } else if (err instanceof WebAssembly.LinkError) {\n        return \"The cartridge has\\ntried to import\\na missing function.\\n\\n\\n\\nSee console for\\nmore details.\";\n    } else if (err instanceof WebAssembly.CompileError) {\n        return \"The cartridge is\\ncorrupted.\\n\\n\\n\\nSee console for\\nmore details.\";\n    } else if (err instanceof Wasm4Error) {\n        return err.wasm4Message;\n    }\n    return \"Unknown error.\\n\\n\\n\\nSee console for\\nmore details.\";\n}\n\nclass Wasm4Error extends Error {\n    wasm4Message: string;\n    constructor(w4Message: string) {\n        super(w4Message.replace('\\n', ' '));\n        this.name = \"Wasm4Error\";\n        this.wasm4Message = w4Message;\n    }\n}\n","import { LitElement, html, css } from \"lit\";\nimport { customElement, state, query } from 'lit/decorators.js';\n\nimport * as constants from \"../constants\";\nimport * as devkit from \"../devkit\";\nimport * as utils from \"./utils\";\nimport * as z85 from \"../z85\";\nimport { Netplay, DEV_NETPLAY } from \"../netplay\";\nimport { Runtime } from \"../runtime\";\nimport { State } from \"../state\";\n\nimport { MenuOverlay } from \"./menu-overlay\";\nimport { Notifications } from \"./notifications\";\n\nclass InputState {\n    gamepad = [0, 0, 0, 0];\n    mouseX = 0;\n    mouseY = 0;\n    mouseButtons = 0;\n}\n\n@customElement(\"wasm4-app\")\nexport class App extends LitElement {\n    static styles = css`\n        :host {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            touch-action: none;\n            user-select: none;\n            -webkit-user-select: none;\n            -webkit-tap-highlight-color: transparent;\n\n            background: #202020;\n        }\n\n        .content {\n            width: 100vmin;\n            height: 100vmin;\n            overflow: hidden;\n        }\n\n        /** Nudge the game upwards a bit in portrait to make space for the virtual gamepad. */\n        @media (pointer: coarse) and (max-aspect-ratio: 2/3) {\n            .content {\n                position: absolute;\n                top: calc((100% - 220px - 100vmin)/2)\n            }\n        }\n\n        .content canvas {\n            width: 100%;\n            height: 100%;\n            image-rendering: pixelated;\n            image-rendering: crisp-edges;\n        }\n    `;\n\n    private readonly runtime: Runtime;\n\n    @state() private hideGamepadOverlay = false;\n    @state() private showMenu = false;\n\n    @query(\"wasm4-menu-overlay\") private menuOverlay?: MenuOverlay;\n    @query(\"wasm4-notifications\") private notifications!: Notifications;\n\n    private savedGameState?: State;\n\n    readonly inputState = new InputState();\n    private readonly gamepadUnavailableWarned = new Set<string>();\n\n    private netplay?: Netplay;\n\n    private readonly diskPrefix: string;\n\n    readonly onPointerUp = (event: PointerEvent) => {\n        if (event.pointerType == \"touch\") {\n            // Try to go fullscreen on mobile\n            utils.requestFullscreen();\n        }\n\n        // Try to begin playing audio\n        this.runtime.unlockAudio();\n    }\n\n    constructor () {\n        super();\n\n        this.diskPrefix = document.getElementById(\"wasm4-disk-prefix\")?.textContent ?? utils.getUrlParam(\"disk-prefix\") as string;\n        this.runtime = new Runtime(`${this.diskPrefix}-disk`);\n\n        this.init();\n    }\n\n    async init () {\n        async function loadCartWasm (): Promise<Uint8Array> {\n            const cartJson = document.getElementById(\"wasm4-cart-json\");\n\n            // Is cart inlined?\n            if (cartJson) {\n                const { WASM4_CART, WASM4_CART_SIZE } = JSON.parse(cartJson.textContent ?? '');\n\n                // The cart was bundled in the html, decode it\n                const buffer = new Uint8Array(WASM4_CART_SIZE);\n                z85.decode(WASM4_CART, buffer);\n                return buffer;\n\n            } else {\n                // Load the cart from a url\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                //@ts-ignore\n                const cartUrl = utils.getUrlParam(\"url\") ?? globalThis[\"WASM4_CART_URL\"] ?? \"cart.wasm\"; \n                const res = await fetch(cartUrl);\n                if (res.ok) {\n                    return new Uint8Array(await res.arrayBuffer());\n                } else {\n                    throw new Error(`Could not load cart at url: ${cartUrl}`);\n                }\n            }\n        }\n\n        const runtime = this.runtime;\n        await runtime.init();\n\n        const canvas = runtime.canvas;\n\n        const hostPeerId = utils.getUrlParam(\"netplay\");\n        if (hostPeerId) {\n            this.netplay = this.createNetplay();\n            this.netplay.join(hostPeerId);\n        } else {\n            await runtime.load(await loadCartWasm());\n        }\n\n        let devtoolsManager = {\n            toggleDevtools () {\n                // Nothing\n            },\n            updateCompleted (...args: unknown[]) {\n                // Nothing\n            },\n        };\n        if (constants.GAMEDEV_MODE) {\n            devtoolsManager = await import('@wasm4/web-devtools').then(({ DevtoolsManager}) => new DevtoolsManager());\n        }\n\n        if (!this.netplay) {\n            runtime.start();\n        }\n\n        if (DEV_NETPLAY) {\n            this.copyNetplayLink();\n        }\n\n        if (constants.GAMEDEV_MODE) {\n            devkit.websocket?.addEventListener(\"message\", async event => {\n                switch (event.data) {\n                case \"reload\":\n                    this.resetCart(await loadCartWasm());\n                    break;\n                case \"hotswap\":\n                    this.resetCart(await loadCartWasm(), true);\n                    break;\n                }\n            });\n        }\n\n        function takeScreenshot () {\n            // We need to render a frame first\n            runtime.composite();\n\n            canvas.toBlob(blob => {\n                const url = URL.createObjectURL(blob!);\n                const anchor = document.createElement(\"a\");\n                anchor.href = url;\n                anchor.download = \"wasm4-screenshot.png\";\n                anchor.click();\n                URL.revokeObjectURL(url);\n            });\n        }\n\n        let videoRecorder: MediaRecorder | null = null;\n        function recordVideo () {\n            if (videoRecorder != null) {\n                return; // Still recording, ignore\n            }\n\n            const mimeType = \"video/webm\";\n            const videoStream = canvas.captureStream();\n            videoRecorder = new MediaRecorder(videoStream, {\n                mimeType,\n                videoBitsPerSecond: 25000000,\n            });\n\n            const chunks: Blob[] = [];\n            videoRecorder.ondataavailable = event => {\n                chunks.push(event.data);\n            };\n\n            videoRecorder.onstop = () => {\n                const blob = new Blob(chunks, { type: mimeType });\n                const url = URL.createObjectURL(blob);\n                const anchor = document.createElement(\"a\");\n                anchor.href = url;\n                anchor.download = \"wasm4-animation.webm\";\n                anchor.click();\n                URL.revokeObjectURL(url);\n            };\n\n            videoRecorder.start();\n            setTimeout(() => {\n                if(videoRecorder) {\n                    videoRecorder.requestData();\n                    videoRecorder.stop();\n                    videoRecorder = null;\n                }\n            }, 4000);\n        }\n\n        const onMouseEvent = (event: PointerEvent) => {\n            // Unhide the cursor if it was hidden by the keyboard handler\n            document.body.style.cursor = \"\";\n\n            if (event.isPrimary) {\n                const bounds = canvas.getBoundingClientRect();\n                const input = this.inputState;\n                input.mouseX = Math.fround(constants.WIDTH * (event.clientX - bounds.left) / bounds.width);\n                input.mouseY = Math.fround(constants.HEIGHT * (event.clientY - bounds.top) / bounds.height);\n                input.mouseButtons = event.buttons & 0b111;\n            }\n        };\n        window.addEventListener(\"pointerdown\", onMouseEvent);\n        window.addEventListener(\"pointerup\", onMouseEvent);\n        window.addEventListener(\"pointermove\", onMouseEvent);\n\n        canvas.addEventListener(\"contextmenu\", event => {\n            event.preventDefault();\n        });\n\n        const HOTKEYS: Record<string, (...args:any[]) => any> = {\n            \"2\": this.saveGameState.bind(this),\n            \"4\": this.loadGameState.bind(this),\n            \"r\": this.resetCart.bind(this),\n            \"R\": this.resetCart.bind(this),\n            \"F8\": devtoolsManager.toggleDevtools,\n            \"F9\": takeScreenshot,\n            \"F10\": recordVideo,\n            \"F11\": utils.requestFullscreen,\n            \"Enter\": this.onMenuButtonPressed.bind(this),\n        };\n\n        const onKeyboardEvent = (event: KeyboardEvent) => {\n            if (event.ctrlKey || event.altKey) {\n                return; // Ignore ctrl/alt modified key presses because they may be the user trying to navigate\n            }\n\n            if (event.srcElement instanceof HTMLElement && event.srcElement.tagName == \"INPUT\") {\n                return; // Ignore if we have an input element focused\n            }\n\n            const down = (event.type == \"keydown\");\n\n            // Poke WebAudio\n            runtime.unlockAudio();\n\n            // We're using the keyboard now, hide the mouse cursor for extra immersion\n            document.body.style.cursor = \"none\";\n\n            if (down) {\n                const hotkeyFn = HOTKEYS[event.key];\n                if (hotkeyFn) {\n                    hotkeyFn();\n                    event.preventDefault();\n                    return;\n                }\n            }\n\n            let playerIdx = 0;\n            let mask = 0;\n            switch (event.code) {\n            // Player 1\n            case \"KeyX\": case \"KeyV\": case \"Space\": case \"Period\":\n                mask = constants.BUTTON_X;\n                break;\n            case \"KeyZ\": case \"KeyC\": case \"Comma\":\n                mask = constants.BUTTON_Z;\n                break;\n            case \"ArrowUp\":\n                mask = constants.BUTTON_UP;\n                break;\n            case \"ArrowDown\":\n                mask = constants.BUTTON_DOWN;\n                break;\n            case \"ArrowLeft\":\n                mask = constants.BUTTON_LEFT;\n                break;\n            case \"ArrowRight\":\n                mask = constants.BUTTON_RIGHT;\n                break;\n\n            // Player 2\n            case \"KeyA\": case \"KeyQ\":\n                playerIdx = 1;\n                mask = constants.BUTTON_X;\n                break;\n            case \"ShiftLeft\": case \"Tab\":\n                playerIdx = 1;\n                mask = constants.BUTTON_Z;\n                break;\n            case \"KeyE\":\n                playerIdx = 1;\n                mask = constants.BUTTON_UP;\n                break;\n            case \"KeyD\":\n                playerIdx = 1;\n                mask = constants.BUTTON_DOWN;\n                break;\n            case \"KeyS\":\n                playerIdx = 1;\n                mask = constants.BUTTON_LEFT;\n                break;\n            case \"KeyF\":\n                playerIdx = 1;\n                mask = constants.BUTTON_RIGHT;\n                break;\n\n            // Player 3\n            case \"NumpadMultiply\": case \"NumpadDecimal\":\n                playerIdx = 2;\n                mask = constants.BUTTON_X;\n                break;\n            case \"NumpadSubtract\": case \"NumpadEnter\":\n                playerIdx = 2;\n                mask = constants.BUTTON_Z;\n                break;\n            case \"Numpad8\":\n                playerIdx = 2;\n                mask = constants.BUTTON_UP;\n                break;\n            case \"Numpad5\":\n                playerIdx = 2;\n                mask = constants.BUTTON_DOWN;\n                break;\n            case \"Numpad4\":\n                playerIdx = 2;\n                mask = constants.BUTTON_LEFT;\n                break;\n            case \"Numpad6\":\n                playerIdx = 2;\n                mask = constants.BUTTON_RIGHT;\n                break;\n            }\n\n            if (mask != 0) {\n                event.preventDefault();\n\n                // Set or clear the button bit from the next input state\n                const gamepad = this.inputState.gamepad;\n                if (down) {\n                    gamepad[playerIdx] |= mask;\n                } else {\n                    gamepad[playerIdx] &= ~mask;\n                }\n            }\n        };\n        window.addEventListener(\"keydown\", onKeyboardEvent);\n        window.addEventListener(\"keyup\", onKeyboardEvent);\n\n        // Also listen to the top frame when we're embedded in an iframe\n        if (top && top != window) {\n            try {\n                top.addEventListener(\"keydown\", onKeyboardEvent);\n                top.addEventListener(\"keyup\", onKeyboardEvent);\n            } catch {\n                // Ignore iframe security errors\n            }\n        }\n\n        const pollPhysicalGamepads = () => {\n            if (!navigator.getGamepads) {\n                return; // Browser doesn't support gamepads\n            }\n\n            for (const gamepad of navigator.getGamepads()) {\n                if (gamepad == null) {\n                    continue; // Disconnected gamepad\n                } else if (gamepad.mapping != \"standard\") {\n                    // The gamepad is available, but nonstandard, so we don't actually know how to read it.\n                    // Let's warn once, and not use this gamepad afterwards.\n                    if (!this.gamepadUnavailableWarned.has(gamepad.id)) {\n                        this.gamepadUnavailableWarned.add(gamepad.id);\n                        this.notifications.show(\"Unsupported gamepad: \" + gamepad.id);\n                    }\n                    continue;\n                }\n\n                // https://www.w3.org/TR/gamepad/#remapping\n                const buttons = gamepad.buttons;\n                const axes = gamepad.axes;\n\n                let mask = 0;\n                if (buttons[12].pressed || axes[1] < -0.5) {\n                    mask |= constants.BUTTON_UP;\n                }\n                if (buttons[13].pressed || axes[1] > 0.5) {\n                    mask |= constants.BUTTON_DOWN;\n                }\n                if (buttons[14].pressed || axes[0] < -0.5) {\n                    mask |= constants.BUTTON_LEFT;\n                }\n                if (buttons[15].pressed || axes[0] > 0.5) {\n                    mask |= constants.BUTTON_RIGHT;\n                }\n                if (buttons[0].pressed || buttons[3].pressed || buttons[5].pressed || buttons[7].pressed) {\n                    mask |= constants.BUTTON_X;\n                }\n                if (buttons[1].pressed || buttons[2].pressed || buttons[4].pressed || buttons[6].pressed) {\n                    mask |= constants.BUTTON_Z;\n                }\n\n                if (buttons[9].pressed) {\n                    this.showMenu = true;\n                }\n\n                this.inputState.gamepad[gamepad.index % 4] = mask;\n            }\n        }\n\n        // When we should perform the next update\n        let timeNextUpdate = performance.now();\n        // Track the timestamp of the last frame\n        let lastTimeFrameStart = timeNextUpdate;\n\n        const onFrame = (timeFrameStart: number) => {\n            requestAnimationFrame(onFrame);\n\n            pollPhysicalGamepads();\n            let input = this.inputState;\n\n            if (this.menuOverlay != null) {\n                this.menuOverlay.applyInput();\n\n                // Pause while the menu is open, unless netplay is active\n                if (this.netplay) {\n                    // Prevent inputs on the menu from being passed through to the game\n                    input = new InputState();\n                } else {\n                    return; // Pause updates and rendering\n                }\n            }\n\n            let calledUpdate = false;\n\n            // Prevent timeFrameStart from getting too far ahead and death spiralling\n            if (timeFrameStart - timeNextUpdate >= 200) {\n                timeNextUpdate = timeFrameStart;\n            }\n\n            while (timeFrameStart >= timeNextUpdate) {\n                timeNextUpdate += 1000/60;\n\n                if (this.netplay) {\n                    if (this.netplay.update(input.gamepad[0])) {\n                        calledUpdate = true;\n                    }\n\n                } else {\n                    // Pass inputs into runtime memory\n                    for (let playerIdx = 0; playerIdx < 4; ++playerIdx) {\n                        runtime.setGamepad(playerIdx, input.gamepad[playerIdx]);\n                    }\n                    runtime.setMouse(input.mouseX, input.mouseY, input.mouseButtons);\n                    runtime.update();\n                    calledUpdate = true;\n                }\n            }\n\n            if (calledUpdate) {\n                this.hideGamepadOverlay = !!runtime.getSystemFlag(constants.SYSTEM_HIDE_GAMEPAD_OVERLAY);\n\n                runtime.composite();\n\n                if (constants.GAMEDEV_MODE) {\n                    // FIXED(2023-12-13): Pass the correct FPS for display                    \n                    devtoolsManager.updateCompleted(runtime, timeFrameStart - lastTimeFrameStart);\n                    lastTimeFrameStart = timeFrameStart;\n                }\n            }\n        }\n        requestAnimationFrame(onFrame);\n    }\n\n    onMenuButtonPressed () {\n        if (this.showMenu) {\n            // If the pause menu is already open, treat it as an X button\n            this.inputState.gamepad[0] |= constants.BUTTON_X;\n        } else {\n            this.showMenu = true;\n        }\n    }\n\n    closeMenu () {\n        if (this.showMenu) {\n            this.showMenu = false;\n\n            // Kind of a hack to prevent the button press to close the menu from being passed\n            // through to the game\n            for (let playerIdx = 0; playerIdx < 4; ++playerIdx) {\n                this.inputState.gamepad[playerIdx] = 0;\n            }\n        }\n    }\n\n    saveGameState () {\n        let state = this.savedGameState;\n        if (state == null) {\n            state = this.savedGameState = new State();\n        }\n        state.read(this.runtime);\n\n        this.notifications.show(\"State saved\");\n    }\n\n    loadGameState () {\n        if (this.netplay) {\n            this.notifications.show(\"State loading disabled during netplay\");\n            return;\n        }\n\n        const state = this.savedGameState;\n        if (state != null) {\n            state.write(this.runtime);\n            this.notifications.show(\"State loaded\");\n        } else {\n            this.notifications.show(\"Need to save a state first\");\n        }\n    }\n\n    exportGameDisk () {\n        if(this.runtime.diskSize <= 0) {\n            this.notifications.show(\"Disk is empty\");\n            return;\n        }\n\n        const disk = new Uint8Array(this.runtime.diskBuffer).slice(0, this.runtime.diskSize);\n        const blob = new Blob([disk], { type: \"application/octet-stream\" });\n        const link = document.createElement(\"a\");\n\n        link.style.display = \"none\";\n        link.href = URL.createObjectURL(blob);\n        link.download = `${this.diskPrefix}.disk`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n\n    importGameDisk () {\n        if (this.netplay) {\n            this.notifications.show(\"Disk importing disabled during netplay\");\n            return;\n        }\n\n        const app = this;\n        const input = document.createElement(\"input\");\n\n        input.style.display = \"none\";\n        input.type = \"file\";\n        input.accept = \".disk\";\n        input.multiple = false;\n\n        input.addEventListener(\"change\", () => {\n            const files = input.files as FileList;\n            let reader = new FileReader();\n            \n            reader.addEventListener(\"load\", () => {\n                let result = new Uint8Array(reader.result as ArrayBuffer).slice(0, constants.STORAGE_SIZE);\n                let disk = new Uint8Array(constants.STORAGE_SIZE);\n\n                disk.set(result);\n                app.runtime.diskBuffer = disk.buffer;\n                this.runtime.diskSize = result.length;\n                \n                const str = z85.encode(result);\n                try {\n                    localStorage.setItem(this.runtime.diskName, str);\n                    app.notifications.show(\"Disk imported\");\n                } catch (error) {\n                    app.notifications.show(\"Error importing disk\");\n                    console.error(\"Error importing disk\", error);\n                }\n\n                app.closeMenu();\n            });\n\n            reader.readAsArrayBuffer(files[0]);\n        });\n\n        document.body.appendChild(input);\n        input.click();\n        document.body.removeChild(input);\n    }\n\n    clearGameDisk () {\n        if (this.netplay) {\n            this.notifications.show(\"Disk clearing disabled during netplay\");\n            return;\n        }\n\n        this.runtime.diskBuffer = new ArrayBuffer(constants.STORAGE_SIZE);\n        this.runtime.diskSize = 0;\n        \n        try {\n            localStorage.removeItem(this.runtime.diskName);\n        } catch (error) {\n            this.notifications.show(\"Error clearing disk\");\n            console.error(\"Error clearing disk\", error);\n        }\n\n        this.notifications.show(\"Disk cleared\");\n    }\n\n    async copyNetplayLink () {\n        if (!this.netplay) {\n            this.netplay = this.createNetplay();\n            this.netplay.host();\n        }\n\n        utils.copyToClipboard(await this.netplay.getInviteLink());\n        this.notifications.show(\"Netplay link copied to clipboard\");\n    }\n\n    async resetCart (wasmBuffer?: Uint8Array, preserveState: boolean = false) {\n        if (this.netplay) {\n            this.notifications.show(\"Reset disabled during netplay\");\n            return;\n        }\n\n        if (!wasmBuffer) {\n            wasmBuffer = this.runtime.wasmBuffer!;\n        }\n\n        let state;\n        if (preserveState) {\n            // Take a snapshot\n            state = new State();\n            state.read(this.runtime);\n        }\n        this.runtime.reset(true);\n\n\n        this.runtime.pauseState |= constants.PAUSE_REBOOTING;\n        await this.runtime.load(wasmBuffer);\n        this.runtime.pauseState &= ~constants.PAUSE_REBOOTING;\n\n        if (state) {\n            // Restore the previous snapshot\n            state.write(this.runtime);\n        } else {\n            this.runtime.start();\n        }\n    }\n\n    private createNetplay (): Netplay {\n        const netplay = new Netplay(this.runtime);\n        netplay.onstart = playerIdx => this.notifications.show(`Joined as player ${playerIdx+1}`);\n        netplay.onjoin = playerIdx => this.notifications.show(`Player ${playerIdx+1} joined`);\n        netplay.onleave = playerIdx => this.notifications.show(`Player ${playerIdx+1} left`);\n        return netplay;\n    }\n\n    getNetplaySummary () {\n        return this.netplay ? this.netplay.getSummary() : [];\n    }\n\n    connectedCallback () {\n        super.connectedCallback();\n\n        window.addEventListener(\"pointerup\", this.onPointerUp);\n    }\n\n    disconnectedCallback () {\n        window.removeEventListener(\"pointerup\", this.onPointerUp);\n\n        super.disconnectedCallback();\n    }\n\n    render () {\n        return html`\n            <div class=\"content\">\n                ${this.showMenu ? html`<wasm4-menu-overlay .app=${this} />`: \"\"}\n                <wasm4-notifications></wasm4-notifications>\n                ${this.runtime.canvas}\n            </div>\n            ${!this.hideGamepadOverlay ? html`<wasm4-virtual-gamepad .app=${this} />` : \"\"}\n        `;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \"wasm4-app\": App;\n    }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nfunction*o(o,f){if(void 0!==o){let i=0;for(const t of o)yield f(t,i++)}}export{o as map};\n//# sourceMappingURL=map.js.map\n","import { LitElement, html, css } from \"lit\";\nimport { customElement, state } from 'lit/decorators.js';\nimport { map } from 'lit/directives/map.js';\n\nimport { App } from \"./app\";\nimport * as constants from \"../constants\";\n\nconst optionContext = {\n    DEFAULT: 0,\n    DISK: 1,\n};\n\nconst optionIndex = [\n    {\n        CONTINUE: 0,\n        SAVE_STATE: 1,\n        LOAD_STATE: 2,\n        DISK_OPTIONS: 3,\n        // OPTIONS: null,\n        COPY_NETPLAY_LINK: 4,\n        RESET_CART: 5,\n    },\n    {\n        BACK: 0,\n        EXPORT_DISK: 1,\n        IMPORT_DISK: 2,\n        CLEAR_DISK: 3,\n    }\n];\n\nconst options = [\n    [\n        \"CONTINUE\",\n        \"SAVE STATE\",\n        \"LOAD STATE\",\n        \"DISK OPTIONS\",\n        // \"OPTIONS\",\n        \"COPY NETPLAY URL\",\n        \"RESET CART\",\n    ],\n    [\n        \"BACK\",\n        \"EXPORT DISK\",\n        \"IMPORT DISK\",\n        \"CLEAR DISK\",\n    ]\n];\n\n@customElement(\"wasm4-menu-overlay\")\nexport class MenuOverlay extends LitElement {\n    static styles = css`\n        :host {\n            width: 100vmin;\n            height: 100vmin;\n            position: absolute;\n\n            color: #a0a0a0;\n            font: 16px wasm4-font;\n\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n\n            background: rgba(0, 0, 0, 0.85);\n        }\n\n        .version {\n            color: #fff;\n            padding-bottom: 1em;\n        }\n\n        .menu {\n            border: 2px solid #f0f0f0;\n            padding: 0 1em 0 1em;\n            line-height: 2em;\n        }\n\n        .netplay-summary {\n            margin-top: 2em;\n            line-height: 1.5em;\n        }\n\n        .ping-you {\n            color: #f0f0f0;\n        }\n\n        .ping-good {\n            color: green;\n        }\n\n        .ping-ok {\n            color: yellow;\n        }\n\n        .ping-bad {\n            color: red;\n        }\n\n        ul {\n            list-style: none;\n            padding-left: 0;\n            padding-right: 1em;\n        }\n\n        li::before {\n            content: \"\\\\00a0\\\\00a0\";\n        }\n        li.selected::before {\n            content: \"> \";\n        }\n        li.selected {\n            color: #fff;\n        }\n    `;\n\n    app!: App;\n\n    private lastGamepad = 0;\n\n    @state() private selectedIdx = 0;\n    @state() private netplaySummary: { playerIdx: number, ping: number }[] = [];\n\n    private netplayPollInterval?: number;\n\n    private optionContext: number = 0;\n\n    private optionContextHistory: {context: number, index: number}[] = [];\n\n    constructor () {\n        super();\n    }\n\n    get optionIndex (): any {\n        return optionIndex[this.optionContext];\n    }\n\n    get options (): string[] {\n        return options[this.optionContext];\n    }\n\n    previousContext () {\n        if(this.optionContextHistory.length > 0) {\n            const previousContext = this.optionContextHistory.pop() as {context: number, index: number};\n\n            this.resetInput();\n            this.optionContext = previousContext.context;\n            this.selectedIdx = previousContext.index;\n        }\n    }\n\n    switchContext (context: number, index: number = 0) {\n        this.optionContextHistory.push({\n            context: this.optionContext, \n            index: this.selectedIdx\n        });\n\n        this.resetInput();\n        this.optionContext = context;\n        this.selectedIdx = index;\n    }\n\n    resetInput () {\n        this.app.inputState.gamepad[0] = 0;\n    }\n\n    applyInput () {\n        // Mix all player's gamepads together for the purposes of menu input\n        let gamepad = 0;\n        for (const player of this.app.inputState.gamepad) {\n            gamepad |= player;\n        }\n\n        const pressedThisFrame = gamepad & (gamepad ^ this.lastGamepad);\n        this.lastGamepad = gamepad;\n\n        if (pressedThisFrame & (constants.BUTTON_X | constants.BUTTON_Z)) {\n            if(this.optionContext === optionContext.DEFAULT) {\n                switch (this.selectedIdx) {\n                    case this.optionIndex.CONTINUE:\n                        this.app.closeMenu();\n                        break;\n                    case this.optionIndex.SAVE_STATE:\n                        this.app.saveGameState();\n                        this.app.closeMenu();\n                        break;\n                    case this.optionIndex.LOAD_STATE:\n                        this.app.loadGameState();\n                        this.app.closeMenu();\n                        break;\n                    case this.optionIndex.DISK_OPTIONS:\n                        this.switchContext(optionContext.DISK);\n                        break;\n                    case this.optionIndex.COPY_NETPLAY_LINK:\n                        this.app.copyNetplayLink();\n                        this.app.closeMenu();\n                        break;\n                    case this.optionIndex.RESET_CART:\n                        this.app.resetCart();\n                        this.app.closeMenu();\n                        break;\n                }\n            }\n            else if(this.optionContext === optionContext.DISK) {\n                switch (this.selectedIdx) {\n                    case this.optionIndex.BACK:\n                        this.previousContext();\n                        break;\n                    case this.optionIndex.EXPORT_DISK:\n                        this.app.exportGameDisk();\n                        this.app.closeMenu();\n                        break;\n                    case this.optionIndex.IMPORT_DISK:\n                        this.resetInput();\n                        this.app.importGameDisk();\n                        break;\n                    case this.optionIndex.CLEAR_DISK:\n                        this.app.clearGameDisk();\n                        this.app.closeMenu();\n                        break;\n                }\n            }\n        }\n\n        if (pressedThisFrame & constants.BUTTON_DOWN) {\n            this.selectedIdx++;\n        }\n        if (pressedThisFrame & constants.BUTTON_UP) {\n            this.selectedIdx--;\n        }\n        this.selectedIdx = (this.selectedIdx + this.options.length) % this.options.length;\n    }\n\n    connectedCallback () {\n        super.connectedCallback();\n\n        const updateNetplaySummary = () => {\n            this.netplaySummary = this.app.getNetplaySummary();\n        };\n        updateNetplaySummary();\n        this.netplayPollInterval = window.setInterval(updateNetplaySummary, 1000);\n    }\n\n    disconnectedCallback () {\n        window.clearInterval(this.netplayPollInterval);\n\n        super.disconnectedCallback();\n    }\n\n    render () {\n        return html`\n            <div class=\"version\">\n                WASM-4 v${WASM4_VERSION}\n            </div>\n            <div class=\"menu\">\n                <ul style=\"display:${this.optionContext === optionContext.DEFAULT? \"inherit\": \"none\"}\">\n                    ${map(options[optionContext.DEFAULT], (option, idx) =>\n                        html`<li class=\"${this.selectedIdx == idx ? \"selected\" : \"\"}\"}>${option}</li>`)}\n                </ul>\n                <ul style=\"display:${this.optionContext === optionContext.DISK? \"inherit\": \"none\"}\">\n                    ${map(options[optionContext.DISK], (option, idx) =>\n                        html`<li class=\"${this.selectedIdx == idx ? \"selected\" : \"\"}\"}>${option}</li>`)}\n                </ul>\n            </div>\n            <div class=\"netplay-summary\">\n                ${map(this.netplaySummary, player => {\n                    const pingClass = player.ping < 100 ? \"good\" : player.ping < 200 ? \"ok\" : \"bad\";\n                    const ping = (player.ping < 0)\n                        ? html`<span class=\"ping-you\">YOU</span>`\n                        : html`<span class=\"ping-${pingClass}\">${Math.ceil(player.ping)}ms</span>`;\n                    return html`<div>PLAYER ${player.playerIdx >= 0 ? player.playerIdx+1 : \"?\"} ${ping}</div>`;\n                })}\n            </div>\n        `;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \"wasm4-menu-overlay\": MenuOverlay;\n    }\n}\n","import { LitElement, html, css } from \"lit\";\nimport { customElement, property, query } from 'lit/decorators.js';\n\nimport * as constants from \"../constants\";\nimport * as utils from \"./utils\";\nimport { App } from \"./app\";\n\nfunction setClass (element: Element | null, className: string, enabled: boolean | number) {\n    if(!element) {\n        return;\n    }\n    if (enabled) {\n        element.classList.add(className);\n    } else {\n        element.classList.remove(className);\n    }\n}\n\nfunction requestFullscreen () {\n    if (document.fullscreenElement == null) {\n        document.body.requestFullscreen({navigationUI: \"hide\"});\n    }\n}\n\n@customElement(\"wasm4-virtual-gamepad\")\nexport class VirtualGamepad extends LitElement {\n    static styles = css`\n        :host {\n            display: none;\n        }\n        @media (hover: none) or (pointer: coarse) {\n            :host {\n                display: inherit;\n            }\n        }\n\n        .dpad {\n            pointer-events: none;\n            position: absolute;\n            width: 39px;\n            height: 120px;\n            left: 69px;\n            bottom: 30px;\n            background: #444;\n            border-radius: 9px;\n        }\n        .dpad:before {\n            position: absolute;\n            width: 120px;\n            height: 39px;\n            top: 39px;\n            left: -39px;\n            background: #444;\n            border-radius: 9px;\n            content: \"\";\n        }\n        .dpad:after {\n            position: absolute;\n            height: 39px;\n            width: 39px;\n            top: 39px;\n            border-radius: 100%;\n            background: #333;\n            content: \"\";\n        }\n        .dpad.pressed-left:before {\n            border-left: 4px solid #A93671;\n            width: 116px;\n        }\n        .dpad.pressed-right:before {\n            border-right: 4px solid #A93671;\n            width: 116px;\n        }\n        .dpad.pressed-up {\n            border-top: 4px solid #A93671;\n        }\n        .dpad.pressed-down {\n            border-bottom: 4px solid #A93671;\n            height: 116px;\n        }\n\n        .action1 {\n            right: 80px;\n            bottom: 30px;\n        }\n        .action2 {\n            right: 30px;\n            bottom: 90px;\n        }\n        .action1, .action2 {\n            pointer-events: none;\n            position: absolute;\n            width: 60px;\n            height: 60px;\n            border: 4px solid #A93671;\n            border-radius: 50px;\n\n            /** TODO(2022-03-14): Button text should be centered but is off slightly. */\n            color: #A93671;\n            font: 24px wasm4-font;\n            text-align: center;\n            line-height: 60px;\n        }\n        .action1.pressed, .action2.pressed {\n            background: #A93671;\n        }\n\n        .menu {\n            position: absolute;\n            background: #444;\n            width: 60px;\n            height: 20px;\n            bottom: 200px;\n            right: 35px;\n            border-radius: 10px;\n        }\n    `;\n\n    app!: App;\n\n    @query(\".dpad\") dpad!: HTMLElement;\n    @query(\".action1\") action1!: HTMLElement;\n    @query(\".action2\") action2!: HTMLElement;\n\n    readonly touchEvents = new Map();\n\n    readonly onPointerEvent = (event: PointerEvent) => {\n        if (event.pointerType != \"touch\") {\n            return;\n        }\n        event.preventDefault();\n\n        switch (event.type) {\n        case \"pointerdown\": case \"pointermove\":\n            this.touchEvents.set(event.pointerId, event);\n            break;\n        default:\n            this.touchEvents.delete(event.pointerId);\n            break;\n        }\n\n        let buttons = 0;\n        if (this.touchEvents.size) {\n            const DPAD_MAX_DISTANCE = 100;\n            const DPAD_DEAD_ZONE = 10;\n            const BUTTON_MAX_DISTANCE = 50;\n            const DPAD_ACTIVE_ZONE = 3 / 5; // cos of active angle, greater that cos 60 (1/2)\n\n            const dpadBounds = this.dpad!.getBoundingClientRect();\n            const dpadX = dpadBounds.x + dpadBounds.width/2;\n            const dpadY = dpadBounds.y + dpadBounds.height/2;\n\n            const action1Bounds = this.action1!.getBoundingClientRect();\n            const action1X = action1Bounds.x + action1Bounds.width/2;\n            const action1Y = action1Bounds.y + action1Bounds.height/2;\n\n            const action2Bounds = this.action2!.getBoundingClientRect();\n            const action2X = action2Bounds.x + action2Bounds.width/2;\n            const action2Y = action2Bounds.y + action2Bounds.height/2;\n\n            let x, y, dist, cosX, cosY;\n            for (const touch of this.touchEvents.values()) {\n                x = touch.clientX - dpadX;\n                y = touch.clientY - dpadY;\n                dist = Math.sqrt( x*x + y * y );\n\n                if (dist < DPAD_MAX_DISTANCE && dist > DPAD_DEAD_ZONE) {\n                    cosX = x / dist;\n                    cosY = y / dist;\n\n                    if (-cosX > DPAD_ACTIVE_ZONE) {\n                        buttons |= constants.BUTTON_LEFT;\n                    } else if (cosX > DPAD_ACTIVE_ZONE) {\n                        buttons |= constants.BUTTON_RIGHT;\n                    }\n                    if (-cosY > DPAD_ACTIVE_ZONE) {\n                        buttons |= constants.BUTTON_UP;\n                    } else if (cosY > DPAD_ACTIVE_ZONE) {\n                        buttons |= constants.BUTTON_DOWN;\n                    }\n                }\n\n                x = touch.clientX - action1X;\n                y = touch.clientY - action1Y;\n                if (x*x + y*y < BUTTON_MAX_DISTANCE*BUTTON_MAX_DISTANCE) {\n                    buttons |= constants.BUTTON_X;\n                }\n\n                x = touch.clientX - action2X;\n                y = touch.clientY - action2Y;\n                if (x*x + y*y < BUTTON_MAX_DISTANCE*BUTTON_MAX_DISTANCE) {\n                    buttons |= constants.BUTTON_Z;\n                }\n            }\n        }\n\n        setClass(this.action1, \"pressed\", buttons & constants.BUTTON_X);\n        setClass(this.action2, \"pressed\", buttons & constants.BUTTON_Z);\n        setClass(this.dpad, \"pressed-left\", buttons & constants.BUTTON_LEFT);\n        setClass(this.dpad, \"pressed-right\", buttons & constants.BUTTON_RIGHT);\n        setClass(this.dpad, \"pressed-up\", buttons & constants.BUTTON_UP);\n        setClass(this.dpad, \"pressed-down\", buttons & constants.BUTTON_DOWN);\n\n        this.app.inputState.gamepad[0] = buttons;\n    }\n\n    connectedCallback () {\n        super.connectedCallback();\n\n        window.addEventListener(\"pointercancel\", this.onPointerEvent);\n        window.addEventListener(\"pointerdown\", this.onPointerEvent);\n        window.addEventListener(\"pointermove\", this.onPointerEvent);\n        window.addEventListener(\"pointerup\", this.onPointerEvent);\n    }\n\n    disconnectedCallback () {\n        window.removeEventListener(\"pointercancel\", this.onPointerEvent);\n        window.removeEventListener(\"pointerdown\", this.onPointerEvent);\n        window.removeEventListener(\"pointermove\", this.onPointerEvent);\n        window.removeEventListener(\"pointerup\", this.onPointerEvent);\n\n        super.disconnectedCallback();\n    }\n\n    onMenuButtonPressed (event: Event) {\n        this.app.onMenuButtonPressed();\n\n        // Prevent the window handler from clearing our menu close button press\n        event.stopImmediatePropagation();\n    }\n\n    render () {\n        return html`\n            <div class=\"menu\" @pointerdown=\"${this.onMenuButtonPressed}\"></div>\n            <div class=\"dpad\"></div>\n            <div class=\"action1\">X</div>\n            <div class=\"action2\">Z</div>\n        `;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \"wasm4-virtual-gamepad\": VirtualGamepad;\n    }\n}\n","import { LitElement, html, css } from \"lit\";\nimport { customElement, state } from 'lit/decorators.js';\n\n@customElement(\"wasm4-notifications\")\nexport class Notifications extends LitElement {\n    static styles = css`\n        :host {\n            width: 100vmin;\n            height: 100vmin;\n            position: absolute;\n            pointer-events: none;\n\n            color: #fff;\n            font: 24px wasm4-font;\n\n            display: flex;\n            flex-direction: column;\n        }\n\n        .notification {\n            background: rgba(0, 0, 0, 0.85);\n            padding: 0.5em;\n            /* animation: appear 0.5s ease-out, disappear 0.5s 4.5s ease-in; */\n            /* animation-fill-mode: forwards; */\n            animation: appear 0.5s ease-out;\n        }\n\n        @keyframes appear {\n            from {\n                padding-left: 2em;\n                opacity: 0;\n            }\n            to {\n                opacity: 1;\n                padding-left: 0.5em;\n            }\n        }\n\n        /*@keyframes disappear {\n            from {\n                opacity: 1;\n            }\n            to {\n                opacity: 0;\n            }\n        }*/\n    `;\n\n    @state() private notifications: string[] = [];\n\n    show (text: string) {\n        this.notifications = this.notifications.concat([text]);\n        setTimeout(() => {\n            this.notifications = this.notifications.slice(1);\n        }, 5000);\n    }\n\n    render () {\n        return this.notifications.map(text => html`<div class=\"notification\">${text}</div>`);\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        \"wasm4-notifications\": Notifications;\n    }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{noChange as t}from\"../lit-html.js\";import{directive as s,Directive as i,PartType as r}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=s(class extends i{constructor(t){if(super(t),t.type!==r.ATTRIBUTE||\"class\"!==t.name||t.strings?.length>2)throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\")}render(t){return\" \"+Object.keys(t).filter((s=>t[s])).join(\" \")+\" \"}update(s,[i]){if(void 0===this.st){this.st=new Set,void 0!==s.strings&&(this.nt=new Set(s.strings.join(\" \").split(/\\s/).filter((t=>\"\"!==t))));for(const t in i)i[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(i)}const r=s.element.classList;for(const t of this.st)t in i||(r.remove(t),this.st.delete(t));for(const t in i){const s=!!i[t];s===this.st.has(t)||this.nt?.has(t)||(s?(r.add(t),this.st.add(t)):(r.remove(t),this.st.delete(t)))}return t}});export{e as classMap};\n//# sourceMappingURL=class-map.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{I:t}=o,i=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2},e=(o,t)=>void 0===t?void 0!==o?._$litType$:o?._$litType$===t,l=o=>null!=o?._$litType$?.h,c=o=>void 0!==o?._$litDirective$,d=o=>o?._$litDirective$,f=o=>void 0===o.strings,s=()=>document.createComment(\"\"),r=(o,i,n)=>{const e=o._$AA.parentNode,l=void 0===i?o._$AB:i._$AA;if(void 0===n){const i=e.insertBefore(s(),l),c=e.insertBefore(s(),l);n=new t(i,c,o,o.options)}else{const t=n._$AB.nextSibling,i=n._$AM,c=i!==o;if(c){let t;n._$AQ?.(o),n._$AM=o,void 0!==n._$AP&&(t=o._$AU)!==i._$AU&&n._$AP(t)}if(t!==l||c){let o=n._$AA;for(;o!==t;){const t=o.nextSibling;e.insertBefore(o,l),o=t}}}return n},v=(o,t,i=o)=>(o._$AI(t,i),o),u={},m=(o,t=u)=>o._$AH=t,p=o=>o._$AH,h=o=>{o._$AP?.(!1,!0);let t=o._$AA;const i=o._$AB.nextSibling;for(;t!==i;){const o=t.nextSibling;t.remove(),t=o}},j=o=>{o._$AR()};export{n as TemplateResultType,j as clearPart,p as getCommittedValue,d as getDirectiveClass,r as insertPart,l as isCompiledTemplateResult,c as isDirectiveResult,i as isPrimitive,f as isSingleExpression,e as isTemplateResult,h as removePart,v as setChildPartValue,m as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const d=l(s),{values:p,keys:a}=this.dt(t,r,c);if(!Array.isArray(d))return this.ut=a,p;const h=this.ut??=[],v=[];let m,y,x=0,j=d.length-1,k=0,w=p.length-1;for(;x<=j&&k<=w;)if(null===d[x])x++;else if(null===d[j])j--;else if(h[x]===a[k])v[k]=o(d[x],p[k]),x++,k++;else if(h[j]===a[w])v[w]=o(d[j],p[w]),j--,w--;else if(h[x]===a[w])v[w]=o(d[x],p[w]),i(s,v[w+1],d[x]),x++,w--;else if(h[j]===a[k])v[k]=o(d[j],p[k]),i(s,d[x],d[j]),j--,k++;else if(void 0===m&&(m=u(a,k,w),y=u(h,x,j)),m.has(h[x]))if(m.has(h[j])){const e=y.get(a[k]),t=void 0!==e?d[e]:null;if(null===t){const e=i(s,d[x]);o(e,p[k]),v[k]=e}else v[k]=o(t,p[k]),i(s,d[x],t),d[e]=null;k++}else n(d[j]),j--;else n(d[x]),x++;for(;k<=w;){const e=i(s,v[w+1]);o(e,p[k]),v[k++]=e}for(;x<=j;){const e=d[x++];null!==e&&n(e)}return this.ut=a,f(s,v),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","import{isSingleExpression as i}from\"./directive-helpers.js\";import{Directive as t,PartType as e}from\"./directive.js\";export{directive}from\"./directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=(i,t)=>{const e=i._$AN;if(void 0===e)return!1;for(const i of e)i._$AO?.(t,!1),s(i,t);return!0},o=i=>{let t,e;do{if(void 0===(t=i._$AM))break;e=t._$AN,e.delete(i),i=t}while(0===e?.size)},r=i=>{for(let t;t=i._$AM;i=t){let e=t._$AN;if(void 0===e)t._$AN=e=new Set;else if(e.has(i))break;e.add(i),c(t)}};function h(i){void 0!==this._$AN?(o(this),this._$AM=i,r(this)):this._$AM=i}function n(i,t=!1,e=0){const r=this._$AH,h=this._$AN;if(void 0!==h&&0!==h.size)if(t)if(Array.isArray(r))for(let i=e;i<r.length;i++)s(r[i],!1),o(r[i]);else null!=r&&(s(r,!1),o(r));else s(this,i)}const c=i=>{i.type==e.CHILD&&(i._$AP??=n,i._$AQ??=h)};class f extends t{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,t,e){super._$AT(i,t,e),r(this),this.isConnected=i._$AU}_$AO(i,t=!0){i!==this.isConnected&&(this.isConnected=i,i?this.reconnected?.():this.disconnected?.()),t&&(s(this,i),o(this))}setValue(t){if(i(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}export{f as AsyncDirective,t as Directive,e as PartType};\n//# sourceMappingURL=async-directive.js.map\n","import{nothing as t}from\"../lit-html.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{directive as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=()=>new h;class h{}const o=new WeakMap,n=s(class extends i{render(i){return t}update(i,[s]){const e=s!==this.Y;return e&&void 0!==this.Y&&this.rt(void 0),(e||this.lt!==this.ct)&&(this.Y=s,this.ht=i.options?.host,this.rt(this.ct=i.element)),t}rt(t){if(this.isConnected||(t=void 0),\"function\"==typeof this.Y){const i=this.ht??globalThis;let s=o.get(i);void 0===s&&(s=new WeakMap,o.set(i,s)),void 0!==s.get(this.Y)&&this.Y.call(this.ht,void 0),s.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){return\"function\"==typeof this.Y?o.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});export{e as createRef,n as ref};\n//# sourceMappingURL=ref.js.map\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import { css as h, unsafeCSS as Z, LitElement as f, html as n } from \"lit\";\nimport { state as P, customElement as g, property as l } from \"lit/decorators.js\";\nimport { classMap as _ } from \"lit/directives/class-map.js\";\nimport { repeat as $ } from \"lit/directives/repeat.js\";\nimport { createRef as mt, ref as ht } from \"lit/directives/ref.js\";\nimport { throttle as ft } from \"lodash-es\";\nconst gt = 160, ut = 160, bt = 1024, vt = [14743759, 8831084, 3172432, 464929], k = 4, L = 20, I = 22, V = 23, j = 24, N = 25, G = 26, H = 28, B = 30, Y = 31, K = 160, J = 1, Q = 2, tt = 16, et = 32, ot = 64, st = 128, rt = 1, at = 2, it = 4, nt = 1, lt = 2, S = 65536, dt = {\n  PALETTE: {\n    offset: k,\n    len: 16\n  },\n  DRAW_COLORS: {\n    offset: L,\n    len: 2\n  },\n  GAMEPAD1: {\n    offset: I,\n    len: 1\n  },\n  GAMEPAD2: {\n    offset: V,\n    len: 1\n  },\n  GAMEPAD3: {\n    offset: j,\n    len: 1\n  },\n  GAMEPAD4: {\n    offset: N,\n    len: 1\n  },\n  MOUSE_X: {\n    offset: G,\n    len: 2\n  },\n  MOUSE_Y: {\n    offset: H,\n    len: 2\n  },\n  MOUSE_BUTTONS: {\n    offset: B,\n    len: 1\n  },\n  SYSTEM_FLAGS: {\n    offset: Y,\n    len: 1\n  },\n  RESERVED: {\n    offset: 32,\n    len: 128\n  },\n  FRAMEBUFFER: {\n    offset: K,\n    len: 6400\n  },\n  PROGRAM_MEMORY: {\n    offset: 6560,\n    len: 58976\n  }\n}, wt = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  ADDR_DRAW_COLORS: L,\n  ADDR_FRAMEBUFFER: K,\n  ADDR_GAMEPAD1: I,\n  ADDR_GAMEPAD2: V,\n  ADDR_GAMEPAD3: j,\n  ADDR_GAMEPAD4: N,\n  ADDR_MOUSE_BUTTONS: B,\n  ADDR_MOUSE_X: G,\n  ADDR_MOUSE_Y: H,\n  ADDR_PALETTE: k,\n  ADDR_SYSTEM_FLAGS: Y,\n  BUTTON_DOWN: st,\n  BUTTON_LEFT: tt,\n  BUTTON_RIGHT: et,\n  BUTTON_UP: ot,\n  BUTTON_X: J,\n  BUTTON_Z: Q,\n  COLORS: vt,\n  HEIGHT: ut,\n  MAX_CART_SIZE: S,\n  MOUSE_LEFT: rt,\n  MOUSE_MIDDLE: it,\n  MOUSE_RIGHT: at,\n  STORAGE_SIZE: bt,\n  SYSTEM_HIDE_GAMEPAD_OVERLAY: lt,\n  SYSTEM_PRESERVE_FRAMEBUFFER: nt,\n  WIDTH: gt,\n  memoryMap: dt\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction xt(e) {\n  const t = [0, 0, 0, 0];\n  for (let o = 0; o < 4; o++)\n    t[o] = e.getUint32(k + o * 4, !0);\n  return t;\n}\nfunction yt(e, t) {\n  return [\n    e.getUint8(I) | t.gamepads[0],\n    e.getUint8(V) | t.gamepads[1],\n    e.getUint8(j) | t.gamepads[2],\n    e.getUint8(N) | t.gamepads[3]\n  ];\n}\nclass _t {\n  constructor(t, o) {\n    const r = t.getInt16(G, !0), s = t.getInt16(H, !0);\n    this.pointerPos = { x: r, y: s }, this.drawColors = t.getUint16(L, !0), this.palette = xt(t), this.gamepads = yt(t, o), this.systemFlags = t.getUint8(Y), this.mouseBtnByte = t.getUint8(B) | o.mouseButtons, this.getUint8 = (a) => t.getUint8(a), this.byteLen = t.byteLength;\n  }\n}\nconst z = \"wasm4-update-completed\";\nfunction $t() {\n  try {\n    return window.localStorage.getItem(\"disk\");\n  } catch (e) {\n    return console.error(e), null;\n  }\n}\nfunction Et({ dataView: e, fps: t, bufferedData: o, wasmBufferByteLen: r }, s = { bubbles: !0 }) {\n  return new CustomEvent(z, {\n    ...s,\n    detail: {\n      memory: new _t(e, o),\n      fps: t,\n      wasmBufferByteLen: r,\n      storedValue: $t()\n    }\n  });\n}\nclass Dt {\n  constructor(t) {\n    this.state = null, this.handleUpdateEvt = ({ detail: o }) => {\n      if (o != null && o.memory) {\n        const r = {\n          memoryView: o.memory,\n          storedValue: o.storedValue ?? null,\n          fps: o.fps,\n          wasmBufferByteLen: o.wasmBufferByteLen\n        };\n        this.state = r, this.host.requestUpdate();\n      }\n    }, (this.host = t).addController(this);\n  }\n  hostConnected() {\n    window.addEventListener(\n      z,\n      this.handleUpdateEvt\n    );\n  }\n  hostDisconnected() {\n    window.removeEventListener(\n      z,\n      this.handleUpdateEvt\n    );\n  }\n}\nconst F = \"wasm4-close-devtools-request\";\nfunction Ct() {\n  return new CustomEvent(F, {\n    bubbles: !0,\n    composed: !0\n  });\n}\nconst Ot = h`:host{color:var(--wasm4-devtools-text-primary, #fff);background-color:var(--wasm4-devtools-bg-primary, #202020)}.text-primary{color:var(--wasm4-devtools-text-primary, #fff)!important}.text-secondary{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))!important}.bg-primary{background-color:var(--wasm4-devtools-bg-primary, #202020)!important}.bg-secondary{background-color:var(--wasm4-devtools-bg-secondary, #444)!important}:host{font-size:var(--wasm4-devtools-text-size, 16px);font-family:monospace;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.text-align-left{text-align:left!important}.text-align-right{text-align:right!important}.text-align-center{text-align:center!important}.active{color:var(--wasm4-devtools-text-primary, #fff)}.dim{opacity:.4}.display-block{display:block!important}.info-box{text-align:center;padding:.2em .4em;color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7));background:var(--wasm4-devtools-bg-secondary, #444);border-radius:4px;min-width:60px;display:inline-block;font-size:.875em}.table{text-align:left;overflow:hidden;border-collapse:collapse;margin-bottom:0;border-style:solid;border-color:currentColor;border-width:1px;max-width:100%;font-size:var(--wasm4-devtools-text-size, 16px)}.table tbody,.table thead,.table tfoot,.table tr,.table td,.table th{overflow-wrap:break-word;text-align:inherit;font-size:inherit}.table td,.table th{border-width:0;border-style:none;border-color:inherit;font-size:.875em;padding:.3em .4em;min-width:50px;border-bottom:1px solid currentColor}a,a:visited{color:var(--wasm4-devtools-text-primary, #fff);outline:none;font-size:.875em}a:focus{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))}.list{padding-left:1.2em}.list li{list-style:disc}.fixed-wrapper{position:fixed;background:transparent;top:0;right:0;padding:4px;height:100vh;z-index:var(--wasm4-devtools-window-z-index, 11);pointer-events:none}.fixed-wrapper.pos-right .toggle-pos-btn{transform:rotateY(-180deg)}.fixed-wrapper.pos-left{right:auto;left:0}.fixed-wrapper.pos-left .toggle-pos-btn{transform:rotateY(0)}.devtools-wrapper{display:block;border:solid 1px gray;border-radius:4px;overflow:hidden;width:320px;position:relative;max-height:100%;pointer-events:auto}.devtools-wrapper:before{content:\"\";height:2.923em;width:100%}.devtools-wrapper .devtools-top-static-placeholder{height:2.923em;width:100%;padding:0}.devtools-wrapper .devtools-top{display:grid;grid-template-columns:1r auto;justify-content:space-between;grid-template-areas:\". win-btn\";align-items:center;overflow:hidden;padding:0 8px;position:absolute;background:theme;z-index:5;left:0;top:0;width:100%;height:2.923em}.devtools-wrapper .devtools-top-btn{grid-area:win-btn;height:inherit;-webkit-user-select:none;user-select:none;display:flex;justify-content:flex-end;align-items:center;grid-gap:4px}.devtools-wrapper .top-btn{border-radius:4px;background:transparent;border:none;box-shadow:none;color:inherit;display:flex;justify-content:center;align-items:center;width:2.2em;height:2.2em;cursor:pointer}.devtools-wrapper .devtools-body{max-height:calc(100vh - 2.923em - 8px);padding:0 8px 8px;overflow-x:hidden;overflow-y:auto}.devtools-wrapper .devtools-body::-webkit-scrollbar{-webkit-appearance:none;width:7px}.devtools-wrapper .devtools-body::-webkit-scrollbar-thumb{border-radius:4px;background-color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7));box-shadow:0 0 1px #ffffff80}.mouse-pos-list{display:grid;grid-template-columns:repeat(2,50px);grid-gap:16px}.mouse-pos{white-space:nowrap}.inline-section{display:flex;flex-flow:row nowrap;grid-gap:16px;align-items:center}.inline-section>*{margin:0}.cart-size-wrapper{display:grid;grid-auto-flow:row;justify-content:flex-start;align-items:flex-start;grid-gap:.25em}.cart-size-wrapper .size-box{display:flex;justify-content:space-between}.flags-wrapper{display:grid;grid-template-rows:1fr 1fr;grid-gap:16px}.flags-wrapper .flag-label{font-size:.875em}.tabs{display:flex;flex-flow:row nowrap;grid-gap:4px;cursor:pointer;font-weight:900;-webkit-user-select:none;user-select:none}.tabs .tab-item{pointer-events:auto;padding:4px}.tabs .tab-item[data-active=\"1\"]{border-bottom:1px solid currentColor}`, Pt = h`*,*:before,*:after{box-sizing:border-box}section{padding:.4em 0}article{padding:.4em 0}ul{list-style:none;margin:0;padding:.2em 0}h1,h2,h3,h4,h5,h6{margin:.4em 0;font-size:1em}p{padding:0;margin:0}[hidden]{display:none!important}`, Bt = h`:host{color:var(--wasm4-devtools-text-primary, #fff);background-color:var(--wasm4-devtools-bg-primary, #202020)}.text-primary{color:var(--wasm4-devtools-text-primary, #fff)!important}.text-secondary{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))!important}.bg-primary{background-color:var(--wasm4-devtools-bg-primary, #202020)!important}.bg-secondary{background-color:var(--wasm4-devtools-bg-secondary, #444)!important}:host{font-size:var(--wasm4-devtools-text-size, 16px);font-family:monospace;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.text-align-left{text-align:left!important}.text-align-right{text-align:right!important}.text-align-center{text-align:center!important}.active{color:var(--wasm4-devtools-text-primary, #fff)}.dim{opacity:.4}.display-block{display:block!important}.info-box{text-align:center;padding:.2em .4em;color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7));background:var(--wasm4-devtools-bg-secondary, #444);border-radius:4px;min-width:60px;display:inline-block;font-size:.875em}.table{text-align:left;overflow:hidden;border-collapse:collapse;margin-bottom:0;border-style:solid;border-color:currentColor;border-width:1px;max-width:100%;font-size:var(--wasm4-devtools-text-size, 16px)}.table tbody,.table thead,.table tfoot,.table tr,.table td,.table th{overflow-wrap:break-word;text-align:inherit;font-size:inherit}.table td,.table th{border-width:0;border-style:none;border-color:inherit;font-size:.875em;padding:.3em .4em;min-width:50px;border-bottom:1px solid currentColor}a,a:visited{color:var(--wasm4-devtools-text-primary, #fff);outline:none;font-size:.875em}a:focus{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))}.list{padding-left:1.2em}.list li{list-style:disc}`, Rt = [Pt, Bt].map((e) => Z(e));\nfunction u(...e) {\n  return Rt.concat(\n    e.map(\n      (t) => typeof t == \"string\" ? Z(t) : t\n    )\n  );\n}\nfunction Tt(e) {\n  return `#${e.toString(16).toLowerCase().padStart(6, \"0\")}`;\n}\nfunction E(e, t = 2) {\n  return e.toString(16).padStart(t, \"0\").toUpperCase();\n}\nfunction W(e) {\n  return e;\n}\nfunction C(e, t = 0) {\n  return (1 << e) - 1 ^ (1 << t) - 1;\n}\nfunction At(e, t) {\n  const o = Math.max(0, Math.min(t, e.byteLen - 1));\n  let r = [];\n  for (let s = o, a = o + 16; s < a; s++)\n    r[s] = E(e.getUint8(s), 2);\n  return r.join(\" \");\n}\nfunction X(e, t, o = 1) {\n  if (!Number.isFinite(e) || !Number.isFinite(t) || !Number.isFinite(o) || e > t || o === 0)\n    throw new TypeError(\n      `invalid range input: from ${e}, to ${t}, step ${o}`\n    );\n  const r = (t - e) / o >> 0;\n  let s = [];\n  for (let a = 0; a < r; a++)\n    s[a] = o * a + e;\n  return s;\n}\nvar Mt = Object.defineProperty, St = Object.getOwnPropertyDescriptor, R = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? St(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Mt(t, o, s), s;\n};\nconst U = \"wasm4-devtools\", A = [\"general\", \"controls\", \"mem\", \"info\"], zt = [C(3), C(7, 3), C(11, 7), C(15, 11)];\nlet v = class extends f {\n  constructor() {\n    super(...arguments), this.updateController = new Dt(this), this._expanded = !0, this._activeTab = A[0], this._fixedPosition = \"right\", this._handleCloseButtonClick = () => {\n      this.dispatchEvent(Ct());\n    }, this._handleTabClick = (e) => {\n      var o;\n      const t = (o = e.composedPath()[0]) == null ? void 0 : o.dataset.tabValue;\n      A.includes(t) && (this._activeTab = t);\n    }, this._toggleExapanded = () => {\n      this._expanded = !this._expanded;\n    }, this._changeFixedPosition = () => {\n      this._fixedPosition = this._fixedPosition === \"left\" ? \"right\" : \"left\";\n    }, this._renderGeneralView = ({\n      memoryView: e,\n      fps: t,\n      wasmBufferByteLen: o\n    }) => {\n      const r = e.drawColors ?? 0;\n      return n`<article>\n      <wasm4-palette\n        palette-heading=\"palette\"\n        .palette=${e.palette}\n      ></wasm4-palette>\n      <section>\n        <h4>draw colors</h4>\n        <table class=\"table text-align-right\">\n          <thead>\n            <tr>\n              <th>color</th>\n              <th>value</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${$(\n        zt,\n        W,\n        (s, a) => n`<tr>\n                <td class=\"text-align-center\">${a + 1}</td>\n                <td>${r & s}</td>\n              </tr>`\n      )}\n          </tbody>\n          <tfoot>\n            <tr>\n              <td class=\"text-align-center\">sum</td>\n              <td>${r}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </section>\n      <section class=\"inline-section\">\n        <h4>fps</h4>\n        <span class=\"info-box text-primary\">${t}</span>\n      </section>\n      <section class=\"cart-size-wrapper\">\n        <h4>cartridge size ${o > S ? \"\" : \"\"}</h4>\n        <div class=\"size-box\">\n          current\n          <span class=\"info-box text-primary\">${o}B</span>\n        </div>\n        <div class=\"size-box\">\n          limit <span class=\"info-box text-primary\">${S}B</span>\n        </div>\n      </section>\n      <section class=\"flags-section\">\n        <h4>system flags</h4>\n        <div class=\"flags-wrapper\">\n          <div>\n            <span class=\"flag-label\">preserve framebuffer</span>\n            <span class=\"info-box text-primary\"\n              >${e.systemFlags & nt}</span\n            >\n          </div>\n          <div>\n            <span class=\"flag-label\">hide gamepad overlay</span>\n            <span class=\"info-box text-primary\"\n              >${e.systemFlags & lt}</span\n            >\n          </div>\n        </div>\n      </section>\n    </article>`;\n    }, this._renderInfo = () => n` <wasm4-info-view></wasm4-info-view> `, this._renderControls = ({ memoryView: e }) => n`<wasm4-controls-view\n      .mouseButtons=${e.mouseBtnByte}\n      .mouseX=${e.pointerPos.x}\n      .mouseY=${e.pointerPos.y}\n      .gamepads=${e.gamepads}\n    ></wasm4-controls-view>`, this._renderMemory = ({ memoryView: e }) => n`<wasm4-memory-view\n      .memoryView=${e}\n    ></wasm4-memory-view>`, this._renderTab = (e) => {\n      let t;\n      switch (this._activeTab) {\n        case \"controls\":\n          t = this._renderControls;\n          break;\n        case \"info\":\n          t = this._renderInfo;\n          break;\n        case \"mem\":\n          t = this._renderMemory;\n          break;\n        default:\n          t = this._renderGeneralView;\n      }\n      return t.call(this, e);\n    };\n  }\n  render() {\n    if (!this.updateController.state)\n      return null;\n    const e = `move ${this._fixedPosition === \"left\" ? \"right\" : \"left\"}`;\n    return n`<div\n      class=${_({\n      \"fixed-wrapper\": 1,\n      [`pos-${this._fixedPosition}`]: 1\n    })}\n    >\n      <div class=\"devtools-wrapper bg-primary\">\n        <div class=\"devtools-top-static-placeholder\"></div>\n        <div class=\"devtools-top bg-primary\">\n          <h2>devtools</h2>\n          <div class=\"devtools-top-btn\">\n            <button\n              type=\"button\"\n              aria-label=\"collapse\"\n              class=\"top-btn\"\n              title=\"collapse\"\n              @click=${this._toggleExapanded}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                height=\"24px\"\n                width=\"24px\"\n                fill=\"currentColor\"\n              >\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n                <path d=\"M6 19h12v2H6v-2z\" />\n              </svg>\n            </button>\n            <button\n              type=\"button\"\n              aria-label=${e}\n              class=\"top-btn toggle-pos-btn\"\n              title=${e}\n              @click=${this._changeFixedPosition}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                height=\"24px\"\n                width=\"24px\"\n                fill=\"currentColor\"\n              >\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n                <path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" />\n              </svg>\n            </button>\n            <button\n              type=\"button\"\n              aria-label=\"close\"\n              class=\"top-btn\"\n              title=\"close\"\n              @click=${this._handleCloseButtonClick}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                height=\"24px\"\n                width=\"24px\"\n                fill=\"currentColor\"\n              >\n                <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n                <path\n                  d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class=\"devtools-body\" ?hidden=${!this._expanded}>\n          <ul class=\"tabs\" @click=${this._handleTabClick}>\n            ${$(\n      A,\n      W,\n      (t) => n`<li\n                  data-tab-value=${t}\n                  data-active=${+(t === this._activeTab)}\n                  class=\"tab-item\"\n                >\n                  ${t}\n                </li>`\n    )}\n          </ul>\n          ${this._renderTab(this.updateController.state)}\n        </div>\n      </div>\n    </div>`;\n  }\n};\nv.styles = u(Ot);\nR([\n  P()\n], v.prototype, \"_expanded\", 2);\nR([\n  P()\n], v.prototype, \"_activeTab\", 2);\nR([\n  P()\n], v.prototype, \"_fixedPosition\", 2);\nv = R([\n  g(U)\n], v);\nconst Ft = h`.palette-grid{display:grid;grid-template-columns:repeat(4,1fr);height:50px;border-radius:4px;overflow:hidden;font-weight:800;font-size:.875em}.palette-grid .color-box{display:flex;align-items:center;justify-content:center}.palette-article h3{margin-bottom:.2em}`;\nvar Ut = Object.defineProperty, kt = Object.getOwnPropertyDescriptor, q = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? kt(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Ut(t, o, s), s;\n};\nconst Lt = \"wasm4-palette\";\nlet D = class extends f {\n  constructor() {\n    super(...arguments), this.palette = [0, 0, 0, 0], this.heading = \"\";\n  }\n  render() {\n    return n`<section class=\"palette-article\">\n      ${this.heading && n`<h4>${this.heading}</h4>`}\n      <div class=\"palette-grid\">\n        ${this.palette.slice(0, 4).map((e) => {\n      const t = Tt(e), r = ((e & 255) + (e >> 8 & 255) + (e >> 16)) / 3 > 128 ? \"filter: invert(1)\" : \"\";\n      return n`<div\n            class=\"color-box\"\n            data-color=\"${t}\"\n            style=\"background: ${t}\"\n          >\n            <div style=${r}>${t}</div>\n          </div>`;\n    })}\n      </div>\n    </section>`;\n  }\n};\nD.styles = u(Ft);\nq([\n  l({ type: Array })\n], D.prototype, \"palette\", 2);\nq([\n  l({ type: String, attribute: \"palette-heading\" })\n], D.prototype, \"heading\", 2);\nD = q([\n  g(Lt)\n], D);\nconst It = h`.gamepad{pointer-events:none;position:relative;display:grid;grid-template-columns:1fr 1fr;justify-content:space-between;overflow:hidden}.gamepad-dpad{position:relative;width:39px;height:120px;background:#444;border-radius:9px;left:40px}.gamepad-dpad:before{position:absolute;width:120px;height:39px;top:39px;left:-39px;background:#444;border-radius:9px;content:\"\"}.gamepad-dpad:after{position:absolute;height:39px;width:39px;top:39px;border-radius:100%;background:#333;content:\"\"}.gamepad-dpad.pressed-left:before{border-left:4px solid #a93671;width:116px}.gamepad-dpad.pressed-right:before{border-right:4px solid #a93671;width:116px}.gamepad-dpad.pressed-up{border-top:4px solid #a93671}.gamepad-dpad.pressed-down{border-bottom:4px solid #a93671;height:116px}.gamepad-action1,.gamepad-action2{width:60px;height:60px;border:4px solid #a93671;border-radius:50px;flex:0 0 auto}.gamepad-action1{position:relative;right:60px}.gamepad-action1.pressed,.gamepad-action2.pressed{background:#a93671}.gamepad-actions{display:flex;flex-flow:column-reverse nowrap;align-items:flex-end;position:relative}`;\nvar Vt = Object.defineProperty, jt = Object.getOwnPropertyDescriptor, m = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? jt(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Vt(t, o, s), s;\n};\nconst Nt = \"wasm4-gamepad\";\nlet d = class extends f {\n  constructor() {\n    super(...arguments), this.action1 = !1, this.action2 = !1, this.up = !1, this.down = !1, this.left = !1, this.right = !1, this.rawValue = 0;\n  }\n  render() {\n    const e = this.up || !!(this.rawValue & ot), t = this.down || !!(this.rawValue & st), o = this.left || !!(this.rawValue & tt), r = this.right || !!(this.rawValue & et), s = this.action1 || !!(this.rawValue & J), a = this.action2 || !!(this.rawValue & Q);\n    return n`<div class=\"gamepad\">\n      <div\n        class=\"${_({\n      \"gamepad-dpad\": 1,\n      \"pressed-right\": r,\n      \"pressed-down\": t,\n      \"pressed-left\": o,\n      \"pressed-up\": e\n    })}\"\n      ></div>\n      <div class=\"gamepad-actions\">\n        <div\n          class=\"${_({ \"gamepad-action1\": 1, pressed: s })}\"\n        ></div>\n        <div\n          class=\"${_({ \"gamepad-action2\": 1, pressed: a })}\"\n        ></div>\n      </div>\n    </div>`;\n  }\n};\nd.styles = u(It);\nm([\n  l({ type: Boolean, reflect: !0, attribute: \"action-1\" })\n], d.prototype, \"action1\", 2);\nm([\n  l({ type: Boolean, reflect: !0, attribute: \"action-2\" })\n], d.prototype, \"action2\", 2);\nm([\n  l({ type: Boolean, reflect: !0 })\n], d.prototype, \"up\", 2);\nm([\n  l({ type: Boolean, reflect: !0 })\n], d.prototype, \"down\", 2);\nm([\n  l({ type: Boolean, reflect: !0 })\n], d.prototype, \"left\", 2);\nm([\n  l({ type: Boolean, reflect: !0 })\n], d.prototype, \"right\", 2);\nm([\n  l({ type: Number, reflect: !0, attribute: \"raw-value\" })\n], d.prototype, \"rawValue\", 2);\nd = m([\n  g(Nt)\n], d);\nvar Gt = Object.defineProperty, Ht = Object.getOwnPropertyDescriptor, x = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? Ht(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Gt(t, o, s), s;\n};\nconst Yt = \"wasm4-controls-view\";\nlet p = class extends f {\n  constructor() {\n    super(...arguments), this.mouseButtons = 0, this.gamepads = [0, 0, 0, 0], this.mouseX = 0, this.mouseY = 0, this.heading = \"\";\n  }\n  render() {\n    return n`<article class=\"bg-primary\" part=\"root-view\">\n      ${this.heading && n`<h3 class=\"heading\">${this.heading}</h3>`}\n      <section class=\"mouse-section\">\n        <h4 class=\"heading\">mouse position</h4>\n        <ul class=\"mouse-pos-list\">\n          <li class=\"info-box mouse-pos\">\n            <span class=\"text-primary\">x: ${this.mouseX}</span>\n          </li>\n          <li class=\"info-box mouse-pos\">\n            <span class=\"text-primary\">y: ${this.mouseY}</span>\n          </li>\n        </ul>\n      </section>\n      <wasm4-mouse-buttons\n        heading=\"mouse buttons\"\n        raw-value=${this.mouseButtons}\n      ></wasm4-mouse-buttons>\n      ${this.gamepads.map(\n      (e, t) => n`<section>\n            <h4>gamepad ${t + 1}</h4>\n            <wasm4-gamepad raw-value=${e}></wasm4-gamepad>\n          </section>`\n    )}\n    </article>`;\n  }\n};\np.styles = u();\nx([\n  l({ type: Number })\n], p.prototype, \"mouseButtons\", 2);\nx([\n  l({ type: Array })\n], p.prototype, \"gamepads\", 2);\nx([\n  l({ type: Number })\n], p.prototype, \"mouseX\", 2);\nx([\n  l({ type: Number })\n], p.prototype, \"mouseY\", 2);\nx([\n  l({ type: String, reflect: !0 })\n], p.prototype, \"heading\", 2);\np = x([\n  g(Yt)\n], p);\nconst qt = h`.mouse-buttons{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:8px}`;\nvar Wt = Object.defineProperty, Xt = Object.getOwnPropertyDescriptor, y = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? Xt(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Wt(t, o, s), s;\n};\nconst Zt = \"wasm4-mouse-buttons\";\nlet c = class extends f {\n  constructor() {\n    super(...arguments), this.middle = !1, this.right = !1, this.left = !1, this.rawValue = 0, this.heading = \"\";\n  }\n  render() {\n    const e = {\n      left: this.left || !!(this.rawValue & rt),\n      middle: this.middle || !!(this.rawValue & it),\n      right: this.right || !!(this.rawValue & at)\n    };\n    return n`<section>\n      ${this.heading && n`<h4 class=\"heading\">${this.heading}</h4>`}\n      <ul class=\"mouse-buttons\">\n        ${Object.entries(e).map(\n      ([t, o]) => n`<li\n              class=${_({\n        \"info-box\": 1,\n        dim: !o,\n        \"text-primary\": o\n      })}\n            >\n              ${t}\n            </li>`\n    )}\n      </ul>\n    </section> `;\n  }\n};\nc.styles = u(qt);\ny([\n  l({ type: Boolean, reflect: !0 })\n], c.prototype, \"middle\", 2);\ny([\n  l({ type: Boolean, reflect: !0 })\n], c.prototype, \"right\", 2);\ny([\n  l({ type: Boolean, reflect: !0 })\n], c.prototype, \"left\", 2);\ny([\n  l({ type: Number, reflect: !0, attribute: \"raw-value\" })\n], c.prototype, \"rawValue\", 2);\ny([\n  l({ type: String, reflect: !0 })\n], c.prototype, \"heading\", 2);\nc = y([\n  g(Zt)\n], c);\nconst Kt = h`:host{color:var(--wasm4-devtools-text-primary, #fff);background-color:var(--wasm4-devtools-bg-primary, #202020)}.text-primary{color:var(--wasm4-devtools-text-primary, #fff)!important}.text-secondary{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))!important}.bg-primary{background-color:var(--wasm4-devtools-bg-primary, #202020)!important}.bg-secondary{background-color:var(--wasm4-devtools-bg-secondary, #444)!important}:host{font-size:var(--wasm4-devtools-text-size, 16px);font-family:monospace;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.text-align-left{text-align:left!important}.text-align-right{text-align:right!important}.text-align-center{text-align:center!important}.active{color:var(--wasm4-devtools-text-primary, #fff)}.dim{opacity:.4}.display-block{display:block!important}.info-box{text-align:center;padding:.2em .4em;color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7));background:var(--wasm4-devtools-bg-secondary, #444);border-radius:4px;min-width:60px;display:inline-block;font-size:.875em}.table{text-align:left;overflow:hidden;border-collapse:collapse;margin-bottom:0;border-style:solid;border-color:currentColor;border-width:1px;max-width:100%;font-size:var(--wasm4-devtools-text-size, 16px)}.table tbody,.table thead,.table tfoot,.table tr,.table td,.table th{overflow-wrap:break-word;text-align:inherit;font-size:inherit}.table td,.table th{border-width:0;border-style:none;border-color:inherit;font-size:.875em;padding:.3em .4em;min-width:50px;border-bottom:1px solid currentColor}a,a:visited{color:var(--wasm4-devtools-text-primary, #fff);outline:none;font-size:.875em}a:focus{color:var(--wasm4-devtools-text-secondary, rgba(255, 255, 255, .7))}.list{padding-left:1.2em}.list li{list-style:disc}.memory-map{image-rendering:pixelated;border:2px solid gray;border-radius:4px;flex:0 0 auto;align-self:center}.color-formula{font-size:.65em;padding:.1em;max-width:280px}.memory-map-wrapper{display:block;margin:0 auto}.hex-view{padding:.2em 0;min-height:80px;font-size:.61em;width:max-content;white-space:nowrap;overflow-x:hidden;text-transform:uppercase}.hex-view .hex-header{border-bottom:1px solid var(--wasm4-devtools-text-primary, #fff);margin-bottom:.5em;padding:.5em 0}.hex-form{font-size:.875em}.hex-form input[type=number]{width:75px;border:none;margin:0;padding:.2em;line-height:1.15;border-radius:4px}.hex-form .form-group{display:flex;justify-content:flex-start;align-items:center;grid-gap:4px}`;\nvar Jt = Object.defineProperty, Qt = Object.getOwnPropertyDescriptor, T = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? Qt(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && Jt(t, o, s), s;\n};\nconst te = \"wasm4-memory-view\", b = 256, M = 65520, ee = \"b = (byte & 0xf) << 4; g = (byte & 0xf0)\";\nlet w = class extends f {\n  constructor() {\n    super(...arguments), this.heading = \"\", this.memoryView = null, this.hexEditor = {\n      values: {\n        firstRow: 0\n      }\n    }, this._hexViewFirstRow = X(0, 16).map((e) => E(e)).join(\" \"), this.memoryCanvasRef = mt(), this.imageData = new ImageData(b, b), this._animationFrameRequestId = 0, this._paintMemoryCanvas = () => {\n      var o;\n      const e = (o = this.memoryCanvasRef.value) == null ? void 0 : o.getContext(\"2d\"), t = this.memoryView;\n      if (!(!t || !e)) {\n        e.clearRect(0, 0, b, b);\n        for (let r = 0, s = this.imageData.data.byteLength; r < s; r += 4) {\n          const a = t.getUint8(r / 4), i = a & 240, ct = (a & 15) << 4;\n          this.imageData.data[r] = 0, this.imageData.data[r + 1] = i, this.imageData.data[r + 2] = ct, this.imageData.data[r + 3] = 255;\n        }\n        e.putImageData(this.imageData, 0, 0);\n      }\n    };\n  }\n  _handleHexEditorChange(e) {\n    const t = e.composedPath()[0];\n    if (t.name === \"firstRow\") {\n      const o = Number(t.value);\n      Number.isFinite(o) && o % 16 === 0 && o >= 0 && o <= M && o !== this.hexEditor.values.firstRow && (this.hexEditor = {\n        ...this.hexEditor,\n        values: {\n          ...this.hexEditor.values,\n          firstRow: o\n        }\n      });\n    }\n  }\n  _renderHexView(e) {\n    if (!e)\n      return;\n    const { firstRow: t } = this.hexEditor.values, r = X(0, 8).map((a) => t + a * 16).filter((a) => a <= M).map((a) => At(e, a)), s = `${E(t, 4)} - ${E(\n      t + 16 * r.length - 1,\n      4\n    )}`;\n    return n`\n      <section>\n        <h4>hex view</h4>\n        <form @input=${this._handleHexEditorChange} class=\"hex-form\">\n          <div class=\"form-group\">\n            <input\n              id=\"hex-view-first-row\"\n              name=\"firstRow\"\n              type=\"number\"\n              min=\"0\"\n              max=${M}\n              step=\"16\"\n            /><label for=\"hex-view-first-row\">range: ${s}</label>\n          </div>\n        </form>\n        <div class=\"hex-view\">\n          <div class=\"hex-header\">${this._hexViewFirstRow}</div>\n          ${r.map((a) => n`<div>${a}</div>`)}\n        </div>\n      </section>\n    `;\n  }\n  firstUpdated() {\n    this._animationFrameRequestId = window.requestAnimationFrame(\n      this._paintMemoryCanvas\n    );\n  }\n  updated(e) {\n    e.has(\"memoryView\") && (this._animationFrameRequestId = window.requestAnimationFrame(\n      this._paintMemoryCanvas\n    ));\n  }\n  // Clean up rAF requests that have not been executed yet.\n  disconnectedCallback() {\n    this._animationFrameRequestId && (window.cancelAnimationFrame(this._animationFrameRequestId), this._animationFrameRequestId = 0);\n  }\n  render() {\n    return n`<article class=\"bg-primary\" part=\"root-view\">\n      <section class=\"memory-map-wrapper\">\n        <h4>wasm memory (64KiB)</h4>\n        <canvas\n          width=${b}\n          height=${b}\n          class=\"memory-map\"\n          ${ht(this.memoryCanvasRef)}\n        ></canvas>\n        <div class=\"color-formula\">${ee}</div>\n      </section>\n      ${this._renderHexView(this.memoryView)}\n    </article>`;\n  }\n};\nw.styles = u(Kt);\nT([\n  l({ type: String, reflect: !0 })\n], w.prototype, \"heading\", 2);\nT([\n  l({ type: Object, reflect: !1 })\n], w.prototype, \"memoryView\", 2);\nT([\n  P()\n], w.prototype, \"hexEditor\", 2);\nw = T([\n  g(te)\n], w);\nvar oe = Object.defineProperty, se = Object.getOwnPropertyDescriptor, pt = (e, t, o, r) => {\n  for (var s = r > 1 ? void 0 : r ? se(t, o) : t, a = e.length - 1, i; a >= 0; a--)\n    (i = e[a]) && (s = (r ? i(t, o, s) : i(s)) || s);\n  return r && s && oe(t, o, s), s;\n};\nconst re = \"wasm4-info-view\", ae = [\n  { key: \"2\", description: \"Save state\" },\n  { key: \"4\", description: \"Load state\" },\n  { key: \"R\", description: \"Reboot cartridge\" },\n  { key: \"F8\", description: \"Open devtools\" },\n  { key: \"F9\", description: \"Take screenshot\" },\n  { key: \"F10\", description: \"Record 4 second video\" },\n  { key: \"F11\", description: \"Fullscreen\" }\n], ie = [\n  { label: \"website\", href: \"https://wasm4.org/\" },\n  { label: \"docs\", href: \"https://wasm4.org/docs\" },\n  { label: \"github\", href: \"https://github.com/aduros/wasm4\" }\n];\nlet O = class extends f {\n  constructor() {\n    super(...arguments), this.heading = \"\";\n  }\n  render() {\n    return n`\n      <article class=\"bg-primary\" part=\"root-view\">\n        ${this.heading && n`<h3 class=\"heading\">${this.heading}</h3>`}\n        <section>\n          <h4>links</h4>\n          <ul class=\"list\">\n            ${$(\n      ie,\n      ({ href: e }) => e,\n      ({ href: e, label: t }) => n`<li>\n                  <a target=\"_blank\" rel=\"noopener\" href=${e}>${t}</a>\n                </li>`\n    )}\n          </ul>\n        </section>\n        <section>\n          <h4>keybindings</h4>\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th>key</th>\n                <th>description</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${$(\n      ae,\n      ({ key: e }) => e,\n      ({ key: e, description: t }) => n`<tr>\n                    <td>${e}</td>\n                    <td>${t}</td>\n                  </tr>`\n    )}\n            </tbody>\n          </table>\n        </section>\n        <section>\n          <h4>memory map</h4>\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th>address</th>\n                <th>size (bytes)</th>\n                <th>description</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${$(\n      Object.entries(dt),\n      ([e, { offset: t }]) => t,\n      ([e, { offset: t, len: o }]) => n`<tr>\n                    <td>0x${E(t)}</td>\n                    <td>${o}</td>\n                    <td>${e}</td>\n                  </tr>`\n    )}\n            </tbody>\n          </table>\n        </section>\n      </article>\n    `;\n  }\n};\nO.styles = u();\npt([\n  l({ type: String, reflect: !0 })\n], O.prototype, \"heading\", 2);\nO = pt([\n  g(re)\n], O);\nclass ne {\n  constructor() {\n    this.mouseButtons = 0, this.gamepads = [0, 0, 0, 0], this.update = (t) => {\n      this.mouseButtons = this.mouseButtons | t.getUint8(B);\n      for (let o = 0, r = this.gamepads.length; o < r; o++)\n        this.gamepads[o] = t.getUint8(\n          wt[`ADDR_GAMEPAD${o + 1}`]\n        ) | this.gamepads[o];\n    }, this.flush = () => {\n      const t = {\n        mouseButtons: this.mouseButtons,\n        gamepads: this.gamepads.slice()\n      };\n      return this.mouseButtons = 0, this.gamepads.fill(0), t;\n    };\n  }\n}\nclass fe {\n  constructor() {\n    this._enabled = !1, this._bufferedData = new ne(), this._fpsBuffer = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], this._fpsBufferIdx = 0, this._calcAvgFPS = () => {\n      let t = this._fpsBuffer[0];\n      for (let o = 1; o < 10; o++)\n        t += this._fpsBuffer[o];\n      return Math.floor(t / 10);\n    }, this._nextFPSBufferIdx = () => (this._fpsBufferIdx == 9 ? this._fpsBufferIdx = 0 : this._fpsBufferIdx++, this._fpsBufferIdx), this.updateCompleted = (t, o) => {\n      this._enabled && (this._fpsBuffer[this._nextFPSBufferIdx()] = 1e3 / o, this._bufferedData.update(t.data), this._notifyUpdateCompleted(\n        t.data,\n        t.wasmBufferByteLen,\n        this._calcAvgFPS()\n      ));\n    }, this.removeDevTools = () => {\n      this._enabled && this.toggleDevtools();\n    }, this.toggleDevtools = () => {\n      this._enabled = !this._enabled, this._enabled ? (window.addEventListener(F, this.removeDevTools), document.body.appendChild(document.createElement(U))) : (window.removeEventListener(F, this.removeDevTools), Array.from(document.body.querySelectorAll(U)).forEach(\n        (t) => {\n          var o;\n          (o = t == null ? void 0 : t.parentElement) == null || o.removeChild(t);\n        }\n      ));\n    }, this._notifyUpdateCompleted = ft(\n      (t, o, r) => {\n        window.dispatchEvent(\n          Et({\n            dataView: t,\n            wasmBufferByteLen: o,\n            fps: r,\n            bufferedData: this._bufferedData.flush()\n          })\n        );\n      },\n      200\n    );\n  }\n}\nexport {\n  fe as DevtoolsManager,\n  p as Wasm4ControlsView,\n  v as Wasm4Devtools,\n  d as Wasm4Gamepad,\n  O as Wasm4InfoView,\n  w as Wasm4MemoryView,\n  c as Wasm4MouseButtons,\n  D as Wasm4Palette,\n  F as closeDevtoolsEventType,\n  Ct as createCloseDevtoolsEvent,\n  Et as createUpdateCompletedEvent,\n  z as updateCompletedEventType,\n  Yt as wasm4ControlsViewTagName,\n  U as wasm4DevtoolsTagName,\n  Nt as wasm4GamepadTagName,\n  re as wasm4InfoTagName,\n  te as wasm4MemoryViewTagName,\n  Zt as wasm4MouseTagName,\n  Lt as wasm4PaletteTagName\n};\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n"],"names":["t","globalThis","e","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","o","WeakMap","n$5","constructor","this","_$cssResult$","Error","cssText","styleSheet","length","get","replaceSync","set","toString","r","n","i","reduce","c","cssRules","is","defineProperty","getOwnPropertyDescriptor","getOwnPropertyNames","h","getOwnPropertySymbols","getPrototypeOf","Object","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","d","u","toAttribute","Boolean","Array","JSON","stringify","fromAttribute","Number","parse","f","y","attribute","type","String","converter","reflect","hasChanged","metadata","litPropertyMetadata","b$1","HTMLElement","addInitializer","_$Ei","push","observedAttributes","finalize","_$Eh","keys","createProperty","state","elementProperties","noAccessor","getPropertyDescriptor","call","requestUpdate","configurable","enumerable","getPropertyOptions","hasOwnProperty","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","_a","forEach","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$EC","removeAttribute","i2","P","_$ET","has","_$Ej","reject","scheduleUpdate","performUpdate","wrapped","shouldUpdate","willUpdate","hostUpdate","update","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","b","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","iterator","v","_","m","RegExp","g","$","x","_$litType$","strings","values","w","for","T","A","E","createTreeWalker","C","lastIndex","exec","test","startsWith","V$1","V","parts","el","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","k","H","I","R","tagName","append","data","indexOf","innerHTML","N","_$Co","_$Cl","_$litDirective$","_b","_$AO","_$AT","_$AS","S$1","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","M","nextSibling","L","_$AI","M$1","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","S","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","R$1","element","fill","j","k$1","arguments","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","L$1","z","D","U","B","F","Z","litHtmlPolyfillSupport","litHtmlVersions","s$2","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","r$4","litElementVersions","customElements","define","kind","init","Reflect","decorate","querySelector","WIDTH","HEIGHT","STORAGE_SIZE","COLORS","BUTTON_LEFT","BUTTON_RIGHT","BUTTON_UP","BUTTON_DOWN","FONT","Uint8Array","of","websocket","WebSocket","location","protocol","getUrlParam","url","URL","href","value","searchParams","hash","substring","requestFullscreen","fullscreenElement","expandIframe","iframe","window","frameElement","style","position","top","left","zIndex","width","height","promise","body","navigationUI","catch","ENCODER","DECODER","encode","src","extra","paddedSize","str","byte_nbr","divisor","idx","floor","decode","string","dest","char_nbr","string_len","dest_len","charCodeAt","State","memory","ArrayBuffer","diskBuffer","constants.STORAGE_SIZE","diskSize","read","runtime","buffer","write","toBytes","DataView","byteOffset","byteLength","setUint32","fromBytes","subarray","dataView","getUint32","HISTORY_LENGTH","History","frame","inputs","predicted","ii","Player","futureInputs","RollbackManager","currentFrame","rollbackIdx","history","players","addInputs","playerIdx","player","input","ll","min","prevHistory","first","setGamepad","nextHistory","shift","SignalClient","onMessage","bufferedOutput","connect","keepaliveInterval","setInterval","send","servers","server","socket","resolve","error","console","event","source","message","output","target","deferIfNotReady","readyState","close","clearInterval","PeerManager","onConnection","resolveLocalPeerId","connections","localPeerId","signalClient","async","iceServers","yourPeerId","connection","createConnection","setRemoteDescription","description","setLocalDescription","createAnswer","localDescription","toJSON","addIceCandidate","RTCIceCandidate","candidate","peerId","RTCPeerConnection","createOffer","connectionState","remotePeerId","CAPACITY","ChunkReader","channel","chunks","chunk","destPos","ChunkWriter","srcPos","flush","BitReader","readBit","readBits","BitWriter","write1","write0","writeBits","MovingAverage","discount","average","firstUpdate","MAX_TICK_SIZE","ceil","MAX_OUTBOUND_INPUTS","SEND_BUFFER","RemotePlayer","reliableChannel","unreliableChannel","nextNeededFrame","outboundFrame","outboundInputs","ping","drift","chunkReader","chunkWriter","addOutboundInput","count","frameIdx","sendMessage","sendUnreliableBuffer","sendPingRequest","setUint8","performance","now","sendPingReply","timestamp","sendTick","setInt8","inputWriter","prevInput","changed","button","Netplay","remotePlayers","localPlayerIdx","updateCount","peerMgr","otherPeers","from","remotePlayer","createRemotePlayer","setNetplay","rollbackMgr","join","then","blueScreen","getInviteLink","loc","hostname","createDataChannel","config","binaryType","onopen","onerror","all","negotiated","id","ordered","maxRetransmits","onClose","onleave","nextPlayerIdx","wasmBuffer","yourPlayerIdx","stateOffset","onjoin","otherPlayer","bytes","cartBytes","stateBytes","load","onstart","getUint8","requestedFrame","getInt8","inputFrame","inputCount","inputReader","delta","splice","estimatedRemoteFrame","outer","localInput","every8Ticks","every32Ticks","stall","maxDrift","max","getSummary","summary","sort","workletRawSource","APU","audioCtx","AudioContext","webkitAudioContext","sampleRate","blob","Blob","createObjectURL","audioWorklet","addModule","workletNode","AudioWorkletNode","outputChannelCount","processorPort","port","destination","processor","warn","registerProcessor","Function","fn","scriptNode","createScriptProcessor","onaudioprocess","outputLeft","outputBuffer","getChannelData","outputRight","process","tick","postMessage","tone","frequency","duration","volume","flags","unlockAudio","resume","pauseAudio","suspend","Framebuffer","drawColors","Uint16Array","clear","drawPoint","color","mask","drawPointUnclipped","drawHLineFast","startX","endX","fillEnd","fillStart","xx","to","fillColor","drawHLineUnclipped","drawHLine","len","dc0","strokeColor","drawVLine","startY","endY","yy","drawRect","endXUnclamped","endYUnclamped","dc1","drawOval","b1","north","west","east","south","a2","b2","dx","dy","err","start","err2","drawLine","x1","y1","x2","y2","swap","abs","sx","e2","drawText","charArray","currentX","charCode","blit","sprite","dstX","dstY","srcX","srcY","srcStride","bpp2","flipX","flipY","rotate","clipXMin","clipYMin","clipXMax","clipYMax","tx","ty","colorIdx","bitIndex","dc","LUMINANCE","TEXTURE_2D","WebGLCompositor","gl","colorBuffer","Uint32Array","paletteBuffer","Float32Array","lastPalette","paletteLocation","table","zz","ww","canvas","preventDefault","initGL","createShader","shader","shaderSource","compileShader","getShaderParameter","getShaderInfoLog","vertexShader","fragmentShader","PALETTE_SIZE","program","createProgram","attachShader","linkProgram","getProgramParameter","getProgramInfoLog","useProgram","getUniformLocation","uniform1i","detachShader","deleteShader","slot","texture","createTexture","activeTexture","bindTexture","GL.TEXTURE_2D","texParameteri","texImage2D","GL.LUMINANCE","positionAttrib","getAttribLocation","positionBuffer","createBuffer","positionData","bindBuffer","bufferData","enableVertexAttribArray","vertexAttribPointer","composite","palette","framebuffer","rgb","syncPalette","argb","uniform3fv","drawArrays","Runtime","diskName","wasm","warnedFileSize","constants.WIDTH","constants.HEIGHT","getContext","alpha","depth","antialias","compositor","apu","localStorage","getItem","z85.decode","WebAssembly","Memory","initial","maximum","reset","pauseState","wasmBufferByteLen","setMouse","buttons","setInt16","getSystemFlag","zeroMemory","mem32","constants.COLORS","constants.ADDR_PALETTE","setUint16","enforceSizeLimit","print","env","rect","bind","oval","line","hline","vline","text","textUtf8","textUtf16","blitSub","diskr","diskw","trace","traceUtf8","traceUtf16","tracef","bluescreenOnError","module","instantiate","instance","exports","_start","_initialize","errorExplanation","RuntimeError","match","LinkError","CompileError","Wasm4Error","wasm4Message","errorToBlueScreenText","printToServer","stack","textPtr","spritePtr","stride","destPtr","bytesRead","srcPtr","bytesWritten","z85.encode","setItem","getCString","ptr","fromCharCode","log","devkit.websocket","cstrPtr","strUtf8Ptr","strUtf8","TextDecoder","strUtf16Ptr","strUtf16","fmtPtr","argPtr","ch","getInt32","getFloat64","start_function","update_function","toCharArr","title","headerTitle","headerY","w4Message","replace","InputState","gamepad","mouseX","mouseY","mouseButtons","App","hideGamepadOverlay","showMenu","inputState","gamepadUnavailableWarned","onPointerUp","pointerType","diskPrefix","getElementById","utils.getUrlParam","loadCartWasm","cartJson","WASM4_CART","WASM4_CART_SIZE","cartUrl","res","fetch","ok","arrayBuffer","hostPeerId","netplay","createNetplay","devtoolsManager","toggleDevtools","updateCompleted","args","webDevtools","DevtoolsManager","resetCart","videoRecorder","onMouseEvent","cursor","isPrimary","bounds","getBoundingClientRect","fround","clientX","clientY","HOTKEYS","saveGameState","loadGameState","F8","F9","toBlob","anchor","download","click","revokeObjectURL","F10","mimeType","videoStream","captureStream","MediaRecorder","videoBitsPerSecond","ondataavailable","onstop","setTimeout","requestData","stop","F11","utils.requestFullscreen","Enter","onMenuButtonPressed","onKeyboardEvent","ctrlKey","altKey","srcElement","down","hotkeyFn","key","code","constants.BUTTON_X","constants.BUTTON_Z","constants.BUTTON_UP","constants.BUTTON_DOWN","constants.BUTTON_LEFT","constants.BUTTON_RIGHT","pollPhysicalGamepads","navigator","getGamepads","mapping","notifications","show","axes","pressed","timeNextUpdate","lastTimeFrameStart","onFrame","timeFrameStart","requestAnimationFrame","menuOverlay","applyInput","calledUpdate","closeMenu","savedGameState","state2","exportGameDisk","disk","link","display","removeChild","importGameDisk","app","accept","multiple","files","reader","FileReader","result","readAsArrayBuffer","clearGameDisk","removeItem","copyNetplayLink","clipboard","writeText","dialog","copyButton","marginLeft","onclick","closeButton","showModal","utils.copyToClipboard","preserveState","getNetplaySummary","html","css","__decorateClass$3","query","__decorateClass","customElement","optionContext","optionIndex","CONTINUE","SAVE_STATE","LOAD_STATE","DISK_OPTIONS","COPY_NETPLAY_LINK","RESET_CART","BACK","EXPORT_DISK","IMPORT_DISK","CLEAR_DISK","MenuOverlay","lastGamepad","selectedIdx","netplaySummary","optionContextHistory","previousContext","pop","resetInput","context","switchContext","pressedThisFrame","updateNetplaySummary","netplayPollInterval","option","pingClass","__decorateClass$2","setClass","className","enabled","classList","VirtualGamepad","touchEvents","onPointerEvent","pointerId","DPAD_MAX_DISTANCE","DPAD_DEAD_ZONE","BUTTON_MAX_DISTANCE","DPAD_ACTIVE_ZONE","dpadBounds","dpad","dpadX","dpadY","action1Bounds","action1","action1X","action1Y","action2Bounds","action2","action2X","action2Y","dist","cosX","cosY","touch","sqrt","stopImmediatePropagation","__decorateClass$1","Notifications","concat","_$Ct","_$Ci","filter","st","nt","_$AQ","dt","ut","reconnected","disconnected","setValue","Y","rt","lt","ct","ht","freeGlobal","global","freeSelf","self","root","objectProto","nativeObjectToString","symToStringTag","toStringTag","nullTag","undefinedTag","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","symbolTag","reWhitespace","reTrimStart","baseTrim","charAt","trimmedEndIndex","isObject","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","isObjectLike","isSymbol","other","valueOf","isBinary","Date","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","clearTimeout","cancel","PALETTE","offset","DRAW_COLORS","GAMEPAD1","GAMEPAD2","GAMEPAD3","GAMEPAD4","MOUSE_X","MOUSE_Y","MOUSE_BUTTONS","SYSTEM_FLAGS","RESERVED","FRAMEBUFFER","PROGRAM_MEMORY","wt","freeze","__proto__","ADDR_DRAW_COLORS","ADDR_FRAMEBUFFER","ADDR_GAMEPAD1","ADDR_GAMEPAD2","ADDR_GAMEPAD3","ADDR_GAMEPAD4","ADDR_MOUSE_BUTTONS","ADDR_MOUSE_X","ADDR_MOUSE_Y","ADDR_PALETTE","ADDR_SYSTEM_FLAGS","BUTTON_X","BUTTON_Z","MAX_CART_SIZE","MOUSE_LEFT","MOUSE_MIDDLE","MOUSE_RIGHT","SYSTEM_HIDE_GAMEPAD_OVERLAY","SYSTEM_PRESERVE_FRAMEBUFFER","memoryMap","_t","getInt16","pointerPos","getUint16","xt","gamepads","yt","systemFlags","mouseBtnByte","byteLen","$t","Et","fps","bufferedData","bubbles","CustomEvent","detail","storedValue","Dt","handleUpdateEvt","memoryView","Ct","composed","Ot","Rt","padStart","toUpperCase","W","X","isFinite","Mt","St","zt","updateController","_expanded","_activeTab","_fixedPosition","_handleCloseButtonClick","dispatchEvent","_handleTabClick","composedPath","dataset","tabValue","includes","_toggleExapanded","_changeFixedPosition","_renderGeneralView","_renderInfo","_renderControls","_renderMemory","_renderTab","Ft","Ut","kt","q","Lt","heading","Tt","It","Vt","jt","Nt","up","right","rawValue","Gt","Ht","Yt","qt","Wt","Xt","Zt","middle","entries","dim","Kt","Jt","Qt","te","hexEditor","firstRow","_hexViewFirstRow","memoryCanvasRef","imageData","ImageData","_animationFrameRequestId","_paintMemoryCanvas","clearRect","putImageData","_handleHexEditorChange","_renderHexView","At","cancelAnimationFrame","oe","se","pt","re","ae","ie","label","O","ne","_enabled","_bufferedData","_fpsBuffer","_fpsBufferIdx","_calcAvgFPS","_nextFPSBufferIdx","_notifyUpdateCompleted","removeDevTools","querySelectorAll","parentElement","ft"],"mappings":"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IAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,EAAM,IAAM,EAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,EAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAC1C,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,EAAM,GAAM,GAAM,GAAM,GAAM,GAAM,EAAM,IAC1C,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,EAAM,IAC1C,EAAM,GAAM,GAAM,EAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,EAAM,EAAM,GAAM,GAAM,GAAM,IAC1C,GAAM,GAAM,EAAM,EAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,EAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,EAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,EAAM,EAAM,GAAM,GAAM,IAC1C,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,EAAM,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,GAAM,GAAM,EAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,EAAM,GAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,GAAM,GAAM,EAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,GAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,GAAM,EAAM,GAAM,GAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,EAAM,IAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,EAAM,IAAM,IAAM,IAAM,EAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,GAAM,EAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,GAAM,EAAM,IAAM,EAAM,GAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,EAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,EAAM,GAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,EAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,EAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,EAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,EAAM,GAAM,EAAM,GAAM,EAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,EAAM,EAAM,GAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,GAAM,EAAM,GAAM,GAAM,GAAM,EAAM,GAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAC1C,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAC1C,IAAM,IAAM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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,27,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,52]}